import{a as m_,b as g_,c as __,d as x_,g as v_}from"/demos/zettelkablooey/_shared/chunk-WZIPHBFS.js";import{a as T,b as Yr,c as f_,d as qt,e as RS,f as Ma,h as p_,i as PS,r as yi}from"/demos/zettelkablooey/_shared/chunk-S4N6YITO.js";var br,Uf,Qh,pt,ze,J,Hi,at,Zh,Lr,ur,Me,fe,Tr,Jh,Qe,re,Bt,cr,bt=T(()=>{br=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(br||{}),Uf=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(Uf||{}),Qh=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Qh||{}),pt=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(pt||{}),ze=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(ze||{}),J=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(J||{}),Hi=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Hi||{}),at=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(at||{}),Zh=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Zh||{}),Lr=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Lr||{}),ur=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(ur||{}),Me=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(Me||{}),fe=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(fe||{}),Tr=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(Tr||{}),Jh=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(Jh||{}),Qe=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(Qe||{}),re=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(re||{}),Bt=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(Bt||{}),cr=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(cr||{})});var Gf,Hf=T(()=>{Gf={createCanvas:(e,t)=>{let r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")}});var B,y_=T(()=>{Hf();B={ADAPTER:Gf,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}});function IS(e){return function(t){return t.test(e)}}function Da(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var s=IS(r),n={apple:{phone:s(zf)&&!s(zi),ipod:s(b_),tablet:!s(zf)&&(s(T_)||M_(t))&&!s(zi),universal:s(E_),device:(s(zf)||s(b_)||s(T_)||s(E_)||M_(t))&&!s(zi)},amazon:{phone:s(lo),tablet:!s(lo)&&s(tu),device:s(lo)||s(tu)},android:{phone:!s(zi)&&s(lo)||!s(zi)&&s(Xf),tablet:!s(zi)&&!s(lo)&&!s(Xf)&&(s(tu)||s(S_)),device:!s(zi)&&(s(lo)||s(tu)||s(Xf)||s(S_))||s(/\bokhttp\b/i)},windows:{phone:s(zi),tablet:s(w_),device:s(zi)||s(w_)},other:{blackberry:s(A_),blackberry10:s(C_),opera:s(R_),firefox:s(I_),chrome:s(P_),device:s(A_)||s(C_)||s(R_)||s(I_)||s(P_)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}var zf,b_,T_,E_,Xf,S_,lo,tu,zi,w_,A_,C_,R_,P_,I_,M_,jf=T(()=>{zf=/iPhone/i,b_=/iPod/i,T_=/iPad/i,E_=/\biOS-universal(?:.+)Mac\b/i,Xf=/\bAndroid(?:.+)Mobile\b/i,S_=/Android/i,lo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,tu=/Silk/i,zi=/Windows Phone/i,w_=/\bWindows(?:.+)ARM\b/i,A_=/BlackBerry/i,C_=/BB10/i,R_=/Opera Mini/i,P_=/\b(CriOS|Chrome)(?:.+)Mobile/i,I_=/Mobile(?:.+)Firefox\b/i,M_=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"}});var D_=T(()=>{jf();jf()});var MS,kr,B_=T(()=>{D_();MS=Da.default??Da,kr=MS(globalThis.navigator)});var Lt=T(()=>{Hf();y_();B_()});var eu=T(()=>{Lt();Lt();B.RETINA_PREFIX=/@([0-9\.]+)x/;B.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1});var O_=Yr((C2,Vf)=>{"use strict";var DS=Object.prototype.hasOwnProperty,Ze="~";function Ba(){}Object.create&&(Ba.prototype=Object.create(null),new Ba().__proto__||(Ze=!1));function BS(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function N_(e,t,r,i,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var n=new BS(r,i||e,s),a=Ze?Ze+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],n]:e._events[a].push(n):(e._events[a]=n,e._eventsCount++),e}function ru(e,t){--e._eventsCount===0?e._events=new Ba:delete e._events[t]}function Xe(){this._events=new Ba,this._eventsCount=0}Xe.prototype.eventNames=function(){var t=[],r,i;if(this._eventsCount===0)return t;for(i in r=this._events)DS.call(r,i)&&t.push(Ze?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Xe.prototype.listeners=function(t){var r=Ze?Ze+t:t,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,n=i.length,a=new Array(n);s<n;s++)a[s]=i[s].fn;return a};Xe.prototype.listenerCount=function(t){var r=Ze?Ze+t:t,i=this._events[r];return i?i.fn?1:i.length:0};Xe.prototype.emit=function(t,r,i,s,n,a){var h=Ze?Ze+t:t;if(!this._events[h])return!1;var u=this._events[h],d=arguments.length,f,m;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,i),!0;case 4:return u.fn.call(u.context,r,i,s),!0;case 5:return u.fn.call(u.context,r,i,s,n),!0;case 6:return u.fn.call(u.context,r,i,s,n,a),!0}for(m=1,f=new Array(d-1);m<d;m++)f[m-1]=arguments[m];u.fn.apply(u.context,f)}else{var _=u.length,x;for(m=0;m<_;m++)switch(u[m].once&&this.removeListener(t,u[m].fn,void 0,!0),d){case 1:u[m].fn.call(u[m].context);break;case 2:u[m].fn.call(u[m].context,r);break;case 3:u[m].fn.call(u[m].context,r,i);break;case 4:u[m].fn.call(u[m].context,r,i,s);break;default:if(!f)for(x=1,f=new Array(d-1);x<d;x++)f[x-1]=arguments[x];u[m].fn.apply(u[m].context,f)}}return!0};Xe.prototype.on=function(t,r,i){return N_(this,t,r,i,!1)};Xe.prototype.once=function(t,r,i){return N_(this,t,r,i,!0)};Xe.prototype.removeListener=function(t,r,i,s){var n=Ze?Ze+t:t;if(!this._events[n])return this;if(!r)return ru(this,n),this;var a=this._events[n];if(a.fn)a.fn===r&&(!s||a.once)&&(!i||a.context===i)&&ru(this,n);else{for(var h=0,u=[],d=a.length;h<d;h++)(a[h].fn!==r||s&&!a[h].once||i&&a[h].context!==i)&&u.push(a[h]);u.length?this._events[n]=u.length===1?u[0]:u:ru(this,n)}return this};Xe.prototype.removeAllListeners=function(t){var r;return t?(r=Ze?Ze+t:t,this._events[r]&&ru(this,r)):(this._events=new Ba,this._eventsCount=0),this};Xe.prototype.off=Xe.prototype.removeListener;Xe.prototype.addListener=Xe.prototype.on;Xe.prefixed=Ze;Xe.EventEmitter=Xe;typeof Vf<"u"&&(Vf.exports=Xe)});var G_=Yr((R2,qf)=>{"use strict";qf.exports=nu;qf.exports.default=nu;function nu(e,t,r){r=r||2;var i=t&&t.length,s=i?t[0]*r:e.length,n=k_(e,0,s,r,!0),a=[];if(!n||n.next===n.prev)return a;var h,u,d,f,m,_,x;if(i&&(n=FS(e,t,n,r)),e.length>80*r){h=d=e[0],u=f=e[1];for(var y=r;y<s;y+=r)m=e[y],_=e[y+1],m<h&&(h=m),_<u&&(u=_),m>d&&(d=m),_>f&&(f=_);x=Math.max(d-h,f-u),x=x!==0?32767/x:0}return Na(n,a,r,h,u,x,0),a}function k_(e,t,r,i,s){var n,a;if(s===Yf(e,t,r,i)>0)for(n=t;n<r;n+=i)a=L_(n,e[n],e[n+1],a);else for(n=r-i;n>=t;n-=i)a=L_(n,e[n],e[n+1],a);return a&&ou(a,a.next)&&(La(a),a=a.next),a}function fn(e,t){if(!e)return e;t||(t=e);var r=e,i;do if(i=!1,!r.steiner&&(ou(r,r.next)||Kt(r.prev,r,r.next)===0)){if(La(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function Na(e,t,r,i,s,n,a){if(e){!a&&n&&XS(e,i,s,n);for(var h=e,u,d;e.prev!==e.next;){if(u=e.prev,d=e.next,n?OS(e,i,s,n):NS(e)){t.push(u.i/r|0),t.push(e.i/r|0),t.push(d.i/r|0),La(e),e=d.next,h=d.next;continue}if(e=d,e===h){a?a===1?(e=LS(fn(e),t,r),Na(e,t,r,i,s,n,2)):a===2&&kS(e,t,r,i,s,n):Na(fn(e),t,r,i,s,n,1);break}}}}function NS(e){var t=e.prev,r=e,i=e.next;if(Kt(t,r,i)>=0)return!1;for(var s=t.x,n=r.x,a=i.x,h=t.y,u=r.y,d=i.y,f=s<n?s<a?s:a:n<a?n:a,m=h<u?h<d?h:d:u<d?u:d,_=s>n?s>a?s:a:n>a?n:a,x=h>u?h>d?h:d:u>d?u:d,y=i.next;y!==t;){if(y.x>=f&&y.x<=_&&y.y>=m&&y.y<=x&&ho(s,h,n,u,a,d,y.x,y.y)&&Kt(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function OS(e,t,r,i){var s=e.prev,n=e,a=e.next;if(Kt(s,n,a)>=0)return!1;for(var h=s.x,u=n.x,d=a.x,f=s.y,m=n.y,_=a.y,x=h<u?h<d?h:d:u<d?u:d,y=f<m?f<_?f:_:m<_?m:_,b=h>u?h>d?h:d:u>d?u:d,S=f>m?f>_?f:_:m>_?m:_,C=Wf(x,y,t,r,i),M=Wf(b,S,t,r,i),w=e.prevZ,R=e.nextZ;w&&w.z>=C&&R&&R.z<=M;){if(w.x>=x&&w.x<=b&&w.y>=y&&w.y<=S&&w!==s&&w!==a&&ho(h,f,u,m,d,_,w.x,w.y)&&Kt(w.prev,w,w.next)>=0||(w=w.prevZ,R.x>=x&&R.x<=b&&R.y>=y&&R.y<=S&&R!==s&&R!==a&&ho(h,f,u,m,d,_,R.x,R.y)&&Kt(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;w&&w.z>=C;){if(w.x>=x&&w.x<=b&&w.y>=y&&w.y<=S&&w!==s&&w!==a&&ho(h,f,u,m,d,_,w.x,w.y)&&Kt(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;R&&R.z<=M;){if(R.x>=x&&R.x<=b&&R.y>=y&&R.y<=S&&R!==s&&R!==a&&ho(h,f,u,m,d,_,R.x,R.y)&&Kt(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function LS(e,t,r){var i=e;do{var s=i.prev,n=i.next.next;!ou(s,n)&&F_(s,i,i.next,n)&&Oa(s,n)&&Oa(n,s)&&(t.push(s.i/r|0),t.push(i.i/r|0),t.push(n.i/r|0),La(i),La(i.next),i=e=n),i=i.next}while(i!==e);return fn(i)}function kS(e,t,r,i,s,n){var a=e;do{for(var h=a.next.next;h!==a.prev;){if(a.i!==h.i&&WS(a,h)){var u=U_(a,h);a=fn(a,a.next),u=fn(u,u.next),Na(a,t,r,i,s,n,0),Na(u,t,r,i,s,n,0);return}h=h.next}a=a.next}while(a!==e)}function FS(e,t,r,i){var s=[],n,a,h,u,d;for(n=0,a=t.length;n<a;n++)h=t[n]*i,u=n<a-1?t[n+1]*i:e.length,d=k_(e,h,u,i,!1),d===d.next&&(d.steiner=!0),s.push(VS(d));for(s.sort(US),n=0;n<s.length;n++)r=GS(s[n],r);return r}function US(e,t){return e.x-t.x}function GS(e,t){var r=HS(e,t);if(!r)return t;var i=U_(r,e);return fn(i,i.next),fn(r,r.next)}function HS(e,t){var r=t,i=e.x,s=e.y,n=-1/0,a;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var h=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=i&&h>n&&(n=h,a=r.x<r.next.x?r:r.next,h===i))return a}r=r.next}while(r!==t);if(!a)return null;var u=a,d=a.x,f=a.y,m=1/0,_;r=a;do i>=r.x&&r.x>=d&&i!==r.x&&ho(s<f?i:n,s,d,f,s<f?n:i,s,r.x,r.y)&&(_=Math.abs(s-r.y)/(i-r.x),Oa(r,e)&&(_<m||_===m&&(r.x>a.x||r.x===a.x&&zS(a,r)))&&(a=r,m=_)),r=r.next;while(r!==u);return a}function zS(e,t){return Kt(e.prev,e,t.prev)<0&&Kt(t.next,e,e.next)<0}function XS(e,t,r,i){var s=e;do s.z===0&&(s.z=Wf(s.x,s.y,t,r,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,jS(s)}function jS(e){var t,r,i,s,n,a,h,u,d=1;do{for(r=e,e=null,n=null,a=0;r;){for(a++,i=r,h=0,t=0;t<d&&(h++,i=i.nextZ,!!i);t++);for(u=d;h>0||u>0&&i;)h!==0&&(u===0||!i||r.z<=i.z)?(s=r,r=r.nextZ,h--):(s=i,i=i.nextZ,u--),n?n.nextZ=s:e=s,s.prevZ=n,n=s;r=i}n.nextZ=null,d*=2}while(a>1);return e}function Wf(e,t,r,i,s){return e=(e-r)*s|0,t=(t-i)*s|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function VS(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function ho(e,t,r,i,s,n,a,h){return(s-a)*(t-h)>=(e-a)*(n-h)&&(e-a)*(i-h)>=(r-a)*(t-h)&&(r-a)*(n-h)>=(s-a)*(i-h)}function WS(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!$S(e,t)&&(Oa(e,t)&&Oa(t,e)&&YS(e,t)&&(Kt(e.prev,e,t.prev)||Kt(e,t.prev,t))||ou(e,t)&&Kt(e.prev,e,e.next)>0&&Kt(t.prev,t,t.next)>0)}function Kt(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function ou(e,t){return e.x===t.x&&e.y===t.y}function F_(e,t,r,i){var s=su(Kt(e,t,r)),n=su(Kt(e,t,i)),a=su(Kt(r,i,e)),h=su(Kt(r,i,t));return!!(s!==n&&a!==h||s===0&&iu(e,r,t)||n===0&&iu(e,i,t)||a===0&&iu(r,e,i)||h===0&&iu(r,t,i))}function iu(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function su(e){return e>0?1:e<0?-1:0}function $S(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&F_(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Oa(e,t){return Kt(e.prev,e,e.next)<0?Kt(e,t,e.next)>=0&&Kt(e,e.prev,t)>=0:Kt(e,t,e.prev)<0||Kt(e,e.next,t)<0}function YS(e,t){var r=e,i=!1,s=(e.x+t.x)/2,n=(e.y+t.y)/2;do r.y>n!=r.next.y>n&&r.next.y!==r.y&&s<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function U_(e,t){var r=new $f(e.i,e.x,e.y),i=new $f(t.i,t.x,t.y),s=e.next,n=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,i.next=r,r.prev=i,n.next=i,i.prev=n,i}function L_(e,t,r,i){var s=new $f(e,t,r);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function La(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function $f(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}nu.deviation=function(e,t,r,i){var s=t&&t.length,n=s?t[0]*r:e.length,a=Math.abs(Yf(e,0,n,r));if(s)for(var h=0,u=t.length;h<u;h++){var d=t[h]*r,f=h<u-1?t[h+1]*r:e.length;a-=Math.abs(Yf(e,d,f,r))}var m=0;for(h=0;h<i.length;h+=3){var _=i[h]*r,x=i[h+1]*r,y=i[h+2]*r;m+=Math.abs((e[_]-e[y])*(e[x+1]-e[_+1])-(e[_]-e[x])*(e[y+1]-e[_+1]))}return a===0&&m===0?0:Math.abs((m-a)/a)};function Yf(e,t,r,i){for(var s=0,n=t,a=r-i;n<r;n+=i)s+=(e[a]-e[n])*(e[n+1]+e[a+1]),a=n;return s}nu.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,s=0;s<e.length;s++){for(var n=0;n<e[s].length;n++)for(var a=0;a<t;a++)r.vertices.push(e[s][n][a]);s>0&&(i+=e[s-1].length,r.holes.push(i))}return r}});function pn(e){throw new RangeError(ZS[e])}function H_(e,t){let r=e.split("@"),i="";r.length>1&&(i=r[0]+"@",e=r[1]);let s=function(n,a){let h=[],u=n.length;for(;u--;)h[u]=a(n[u]);return h}((e=e.replace(QS,".")).split("."),t).join(".");return i+s}function tx(e){let t=[],r=0,i=e.length;for(;r<i;){let s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<i){let n=e.charCodeAt(r++);(64512&n)==56320?t.push(((1023&s)<<10)+(1023&n)+65536):(t.push(s),r--)}else t.push(s)}return t}function JS(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rp(){throw new Error("setTimeout has not been defined")}function ip(){throw new Error("clearTimeout has not been defined")}function ix(e){if(ji===setTimeout)return setTimeout(e,0);if((ji===rp||!ji)&&setTimeout)return ji=setTimeout,setTimeout(e,0);try{return ji(e,0)}catch{try{return ji.call(null,e,0)}catch{return ji.call(this||mo,e,0)}}}function rw(){po&&mn&&(po=!1,mn.length?$i=mn.concat($i):au=-1,$i.length&&sx())}function sx(){if(!po){var e=ix(rw);po=!0;for(var t=$i.length;t;){for(mn=$i,$i=[];++au<t;)mn&&mn[au].run();au=-1,t=$i.length}mn=null,po=!1,function(r){if(Vi===clearTimeout)return clearTimeout(r);if((Vi===ip||!Vi)&&clearTimeout)return Vi=clearTimeout,clearTimeout(r);try{Vi(r)}catch{try{return Vi.call(null,r)}catch{return Vi.call(this||mo,r)}}}(e)}}function V_(e,t){(this||mo).fun=e,(this||mo).array=t}function Xi(){}function iw(){if(W_)return Qf;W_=!0;var e=Qf={},t,r;function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=i}catch{t=i}try{typeof clearTimeout=="function"?r=clearTimeout:r=s}catch{r=s}})();function n(b){if(t===setTimeout)return setTimeout(b,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(b,0);try{return t(b,0)}catch{try{return t.call(null,b,0)}catch{return t.call(this||uo,b,0)}}}function a(b){if(r===clearTimeout)return clearTimeout(b);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(b);try{return r(b)}catch{try{return r.call(null,b)}catch{return r.call(this||uo,b)}}}var h=[],u=!1,d,f=-1;function m(){!u||!d||(u=!1,d.length?h=d.concat(h):f=-1,h.length&&_())}function _(){if(!u){var b=n(m);u=!0;for(var S=h.length;S;){for(d=h,h=[];++f<S;)d&&d[f].run();f=-1,S=h.length}d=null,u=!1,a(b)}}e.nextTick=function(b){var S=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)S[C-1]=arguments[C];h.push(new x(b,S)),h.length===1&&!u&&n(_)};function x(b,S){(this||uo).fun=b,(this||uo).array=S}x.prototype.run=function(){(this||uo).fun.apply(null,(this||uo).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function y(){}return e.on=y,e.addListener=y,e.once=y,e.off=y,e.removeListener=y,e.removeAllListeners=y,e.emit=y,e.prependListener=y,e.prependOnceListener=y,e.listeners=function(b){return[]},e.binding=function(b){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(b){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Qf}function sw(){if($_)return Zf;$_=!0;var e=Qt;function t(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function r(n,a){for(var h="",u=0,d=-1,f=0,m,_=0;_<=n.length;++_){if(_<n.length)m=n.charCodeAt(_);else{if(m===47)break;m=47}if(m===47){if(!(d===_-1||f===1))if(d!==_-1&&f===2){if(h.length<2||u!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var x=h.lastIndexOf("/");if(x!==h.length-1){x===-1?(h="",u=0):(h=h.slice(0,x),u=h.length-1-h.lastIndexOf("/")),d=_,f=0;continue}}else if(h.length===2||h.length===1){h="",u=0,d=_,f=0;continue}}a&&(h.length>0?h+="/..":h="..",u=2)}else h.length>0?h+="/"+n.slice(d+1,_):h=n.slice(d+1,_),u=_-d-1;d=_,f=0}else m===46&&f!==-1?++f:f=-1}return h}function i(n,a){var h=a.dir||a.root,u=a.base||(a.name||"")+(a.ext||"");return h?h===a.root?h+u:h+n+u:u}var s={resolve:function(){for(var a="",h=!1,u,d=arguments.length-1;d>=-1&&!h;d--){var f;d>=0?f=arguments[d]:(u===void 0&&(u=e.cwd()),f=u),t(f),f.length!==0&&(a=f+"/"+a,h=f.charCodeAt(0)===47)}return a=r(a,!h),h?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(t(a),a.length===0)return".";var h=a.charCodeAt(0)===47,u=a.charCodeAt(a.length-1)===47;return a=r(a,!h),a.length===0&&!h&&(a="."),a.length>0&&u&&(a+="/"),h?"/"+a:a},isAbsolute:function(a){return t(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,h=0;h<arguments.length;++h){var u=arguments[h];t(u),u.length>0&&(a===void 0?a=u:a+="/"+u)}return a===void 0?".":s.normalize(a)},relative:function(a,h){if(t(a),t(h),a===h||(a=s.resolve(a),h=s.resolve(h),a===h))return"";for(var u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var d=a.length,f=d-u,m=1;m<h.length&&h.charCodeAt(m)===47;++m);for(var _=h.length,x=_-m,y=f<x?f:x,b=-1,S=0;S<=y;++S){if(S===y){if(x>y){if(h.charCodeAt(m+S)===47)return h.slice(m+S+1);if(S===0)return h.slice(m+S)}else f>y&&(a.charCodeAt(u+S)===47?b=S:S===0&&(b=0));break}var C=a.charCodeAt(u+S),M=h.charCodeAt(m+S);if(C!==M)break;C===47&&(b=S)}var w="";for(S=u+b+1;S<=d;++S)(S===d||a.charCodeAt(S)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+h.slice(m+b):(m+=b,h.charCodeAt(m)===47&&++m,h.slice(m))},_makeLong:function(a){return a},dirname:function(a){if(t(a),a.length===0)return".";for(var h=a.charCodeAt(0),u=h===47,d=-1,f=!0,m=a.length-1;m>=1;--m)if(h=a.charCodeAt(m),h===47){if(!f){d=m;break}}else f=!1;return d===-1?u?"/":".":u&&d===1?"//":a.slice(0,d)},basename:function(a,h){if(h!==void 0&&typeof h!="string")throw new TypeError('"ext" argument must be a string');t(a);var u=0,d=-1,f=!0,m;if(h!==void 0&&h.length>0&&h.length<=a.length){if(h.length===a.length&&h===a)return"";var _=h.length-1,x=-1;for(m=a.length-1;m>=0;--m){var y=a.charCodeAt(m);if(y===47){if(!f){u=m+1;break}}else x===-1&&(f=!1,x=m+1),_>=0&&(y===h.charCodeAt(_)?--_===-1&&(d=m):(_=-1,d=x))}return u===d?d=x:d===-1&&(d=a.length),a.slice(u,d)}else{for(m=a.length-1;m>=0;--m)if(a.charCodeAt(m)===47){if(!f){u=m+1;break}}else d===-1&&(f=!1,d=m+1);return d===-1?"":a.slice(u,d)}},extname:function(a){t(a);for(var h=-1,u=0,d=-1,f=!0,m=0,_=a.length-1;_>=0;--_){var x=a.charCodeAt(_);if(x===47){if(!f){u=_+1;break}continue}d===-1&&(f=!1,d=_+1),x===46?h===-1?h=_:m!==1&&(m=1):h!==-1&&(m=-1)}return h===-1||d===-1||m===0||m===1&&h===d-1&&h===u+1?"":a.slice(h,d)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return i("/",a)},parse:function(a){t(a);var h={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return h;var u=a.charCodeAt(0),d=u===47,f;d?(h.root="/",f=1):f=0;for(var m=-1,_=0,x=-1,y=!0,b=a.length-1,S=0;b>=f;--b){if(u=a.charCodeAt(b),u===47){if(!y){_=b+1;break}continue}x===-1&&(y=!1,x=b+1),u===46?m===-1?m=b:S!==1&&(S=1):m!==-1&&(S=-1)}return m===-1||x===-1||S===0||S===1&&m===x-1&&m===_+1?x!==-1&&(_===0&&d?h.base=h.name=a.slice(1,x):h.base=h.name=a.slice(_,x)):(_===0&&d?(h.name=a.slice(1,m),h.base=a.slice(1,x)):(h.name=a.slice(_,m),h.base=a.slice(_,x)),h.ext=a.slice(m,x)),_>0?h.dir=a.slice(0,_-1):d&&(h.dir="/"),h},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,Zf=s,Zf}function Fr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Fa(e,t,r){if(e&&bi.isObject(e)&&e instanceof Fr)return e;var i=new Fr;return i.parse(e,t,r),i}function dw(){if(Z_)return ep;Z_=!0;var e=ie;function t(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function r(n,a){for(var h="",u=0,d=-1,f=0,m,_=0;_<=n.length;++_){if(_<n.length)m=n.charCodeAt(_);else{if(m===47)break;m=47}if(m===47){if(!(d===_-1||f===1))if(d!==_-1&&f===2){if(h.length<2||u!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var x=h.lastIndexOf("/");if(x!==h.length-1){x===-1?(h="",u=0):(h=h.slice(0,x),u=h.length-1-h.lastIndexOf("/")),d=_,f=0;continue}}else if(h.length===2||h.length===1){h="",u=0,d=_,f=0;continue}}a&&(h.length>0?h+="/..":h="..",u=2)}else h.length>0?h+="/"+n.slice(d+1,_):h=n.slice(d+1,_),u=_-d-1;d=_,f=0}else m===46&&f!==-1?++f:f=-1}return h}function i(n,a){var h=a.dir||a.root,u=a.base||(a.name||"")+(a.ext||"");return h?h===a.root?h+u:h+n+u:u}var s={resolve:function(){for(var a="",h=!1,u,d=arguments.length-1;d>=-1&&!h;d--){var f;d>=0?f=arguments[d]:(u===void 0&&(u=e.cwd()),f=u),t(f),f.length!==0&&(a=f+"/"+a,h=f.charCodeAt(0)===47)}return a=r(a,!h),h?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(t(a),a.length===0)return".";var h=a.charCodeAt(0)===47,u=a.charCodeAt(a.length-1)===47;return a=r(a,!h),a.length===0&&!h&&(a="."),a.length>0&&u&&(a+="/"),h?"/"+a:a},isAbsolute:function(a){return t(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,h=0;h<arguments.length;++h){var u=arguments[h];t(u),u.length>0&&(a===void 0?a=u:a+="/"+u)}return a===void 0?".":s.normalize(a)},relative:function(a,h){if(t(a),t(h),a===h||(a=s.resolve(a),h=s.resolve(h),a===h))return"";for(var u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var d=a.length,f=d-u,m=1;m<h.length&&h.charCodeAt(m)===47;++m);for(var _=h.length,x=_-m,y=f<x?f:x,b=-1,S=0;S<=y;++S){if(S===y){if(x>y){if(h.charCodeAt(m+S)===47)return h.slice(m+S+1);if(S===0)return h.slice(m+S)}else f>y&&(a.charCodeAt(u+S)===47?b=S:S===0&&(b=0));break}var C=a.charCodeAt(u+S),M=h.charCodeAt(m+S);if(C!==M)break;C===47&&(b=S)}var w="";for(S=u+b+1;S<=d;++S)(S===d||a.charCodeAt(S)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+h.slice(m+b):(m+=b,h.charCodeAt(m)===47&&++m,h.slice(m))},_makeLong:function(a){return a},dirname:function(a){if(t(a),a.length===0)return".";for(var h=a.charCodeAt(0),u=h===47,d=-1,f=!0,m=a.length-1;m>=1;--m)if(h=a.charCodeAt(m),h===47){if(!f){d=m;break}}else f=!1;return d===-1?u?"/":".":u&&d===1?"//":a.slice(0,d)},basename:function(a,h){if(h!==void 0&&typeof h!="string")throw new TypeError('"ext" argument must be a string');t(a);var u=0,d=-1,f=!0,m;if(h!==void 0&&h.length>0&&h.length<=a.length){if(h.length===a.length&&h===a)return"";var _=h.length-1,x=-1;for(m=a.length-1;m>=0;--m){var y=a.charCodeAt(m);if(y===47){if(!f){u=m+1;break}}else x===-1&&(f=!1,x=m+1),_>=0&&(y===h.charCodeAt(_)?--_===-1&&(d=m):(_=-1,d=x))}return u===d?d=x:d===-1&&(d=a.length),a.slice(u,d)}else{for(m=a.length-1;m>=0;--m)if(a.charCodeAt(m)===47){if(!f){u=m+1;break}}else d===-1&&(f=!1,d=m+1);return d===-1?"":a.slice(u,d)}},extname:function(a){t(a);for(var h=-1,u=0,d=-1,f=!0,m=0,_=a.length-1;_>=0;--_){var x=a.charCodeAt(_);if(x===47){if(!f){u=_+1;break}continue}d===-1&&(f=!1,d=_+1),x===46?h===-1?h=_:m!==1&&(m=1):h!==-1&&(m=-1)}return h===-1||d===-1||m===0||m===1&&h===d-1&&h===u+1?"":a.slice(h,d)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return i("/",a)},parse:function(a){t(a);var h={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return h;var u=a.charCodeAt(0),d=u===47,f;d?(h.root="/",f=1):f=0;for(var m=-1,_=0,x=-1,y=!0,b=a.length-1,S=0;b>=f;--b){if(u=a.charCodeAt(b),u===47){if(!y){_=b+1;break}continue}x===-1&&(y=!1,x=b+1),u===46?m===-1?m=b:S!==1&&(S=1):m!==-1&&(S=-1)}return m===-1||x===-1||S===0||S===1&&m===x-1&&m===_+1?x!==-1&&(_===0&&d?h.base=h.name=a.slice(1,x):h.base=h.name=a.slice(_,x)):(_===0&&d?(h.name=a.slice(1,m),h.base=a.slice(1,x)):(h.name=a.slice(_,m),h.base=a.slice(_,x)),h.ext=a.slice(m,x)),_>0?h.dir=a.slice(0,_-1):d&&(h.dir="/"),h},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,ep=s,ep}function Sw(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return np?ww(e):Aw(e)}function ww(e){let t=e.hostname,r=e.pathname;for(let i=0;i<r.length;i++)if(r[i]==="%"){let s=r.codePointAt(i+2)||32;if(r[i+1]==="2"&&s===102||r[i+1]==="5"&&s===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(xw,"\\"),r=decodeURIComponent(r),t!=="")return`\\\\${t}${r}`;{let i=r.codePointAt(1)|32,s=r[2];if(i<gw||i>_w||s!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}function Aw(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let r=0;r<t.length;r++)if(t[r]==="%"){let i=t.codePointAt(r+2)||32;if(t[r+1]==="2"&&i===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function Cw(e){let t=J_.resolve(e),r=e.charCodeAt(e.length-1);(r===mw||np&&r===pw)&&t[t.length-1]!==J_.sep&&(t+="/");let i=new URL("file://");return t.includes("%")&&(t=t.replace(vw,"%25")),!np&&t.includes("\\")&&(t=t.replace(yw,"%5C")),t.includes(`
`)&&(t=t.replace(bw,"%0A")),t.includes("\r")&&(t=t.replace(Tw,"%0D")),t.includes("	")&&(t=t.replace(Ew,"%09")),i.pathname=t,i}function Uw(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return op?Gw(e):Hw(e)}function Gw(e){let t=e.hostname,r=e.pathname;for(let i=0;i<r.length;i++)if(r[i]==="%"){let s=r.codePointAt(i+2)||32;if(r[i+1]==="2"&&s===102||r[i+1]==="5"&&s===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(Bw,"\\"),r=decodeURIComponent(r),t!=="")return`\\\\${t}${r}`;{let i=r.codePointAt(1)|32,s=r[2];if(i<Mw||i>Dw||s!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}function Hw(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let r=0;r<t.length;r++)if(t[r]==="%"){let i=t.codePointAt(r+2)||32;if(t[r+1]==="2"&&i===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function zw(e){let t=Y_.resolve(e),r=e.charCodeAt(e.length-1);(r===Iw||op&&r===Pw)&&t[t.length-1]!==Y_.sep&&(t+="/");let i=new URL("file://");return t.includes("%")&&(t=t.replace(Nw,"%25")),!op&&t.includes("\\")&&(t=t.replace(Ow,"%5C")),t.includes(`
`)&&(t=t.replace(Lw,"%0A")),t.includes("\r")&&(t=t.replace(kw,"%0D")),t.includes("	")&&(t=t.replace(Fw,"%09")),i.pathname=t,i}var fo,qS,KS,QS,ZS,Ti,Kf,z_,ex,X_,j_,gn,tw,ka,ew,Wi,rx,ji,Vi,mo,ae,mn,$i,po,au,ie,Qf,W_,uo,Qt,Zf,$_,Y_,Ht,nw,bi,ow,aw,lw,hw,sp,q_,K_,Q_,uw,cw,Jf,co,tp,ep,Z_,J_,fw,pw,mw,gw,_w,np,xw,vw,yw,bw,Tw,Ew,Rw,P2,nx,ox,I2,ax,M2,Pw,Iw,Mw,Dw,op,Bw,Nw,Ow,Lw,kw,Fw,lx=T(()=>{fo=2147483647,qS=/^xn--/,KS=/[^\0-\x7E]/,QS=/[\x2E\u3002\uFF0E\uFF61]/g,ZS={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ti=Math.floor,Kf=String.fromCharCode;z_=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},ex=function(e,t,r){let i=0;for(e=r?Ti(e/700):e>>1,e+=Ti(e/t);e>455;i+=36)e=Ti(e/35);return Ti(i+36*e/(e+38))},X_=function(e){let t=[],r=e.length,i=0,s=128,n=72,a=e.lastIndexOf("-");a<0&&(a=0);for(let u=0;u<a;++u)e.charCodeAt(u)>=128&&pn("not-basic"),t.push(e.charCodeAt(u));for(let u=a>0?a+1:0;u<r;){let d=i;for(let m=1,_=36;;_+=36){u>=r&&pn("invalid-input");let x=(h=e.charCodeAt(u++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36;(x>=36||x>Ti((fo-i)/m))&&pn("overflow"),i+=x*m;let y=_<=n?1:_>=n+26?26:_-n;if(x<y)break;let b=36-y;m>Ti(fo/b)&&pn("overflow"),m*=b}let f=t.length+1;n=ex(i-d,f,d==0),Ti(i/f)>fo-s&&pn("overflow"),s+=Ti(i/f),i%=f,t.splice(i++,0,s)}var h;return String.fromCodePoint(...t)},j_=function(e){let t=[],r=(e=tx(e)).length,i=128,s=0,n=72;for(let u of e)u<128&&t.push(Kf(u));let a=t.length,h=a;for(a&&t.push("-");h<r;){let u=fo;for(let f of e)f>=i&&f<u&&(u=f);let d=h+1;u-i>Ti((fo-s)/d)&&pn("overflow"),s+=(u-i)*d,i=u;for(let f of e)if(f<i&&++s>fo&&pn("overflow"),f==i){let m=s;for(let _=36;;_+=36){let x=_<=n?1:_>=n+26?26:_-n;if(m<x)break;let y=m-x,b=36-x;t.push(Kf(z_(x+y%b,0))),m=Ti(y/b)}t.push(Kf(z_(m,0))),n=ex(s,d,h==a),s=0,++h}++s,++i}return t.join("")},gn={version:"2.1.0",ucs2:{decode:tx,encode:e=>String.fromCodePoint(...e)},decode:X_,encode:j_,toASCII:function(e){return H_(e,function(t){return KS.test(t)?"xn--"+j_(t):t})},toUnicode:function(e){return H_(e,function(t){return qS.test(t)?X_(t.slice(4).toLowerCase()):t})}};gn.decode;gn.encode;gn.toASCII;gn.toUnicode;gn.ucs2;gn.version;tw=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if(typeof e!="string"||e.length===0)return s;var n=/\+/g;e=e.split(t);var a=1e3;i&&typeof i.maxKeys=="number"&&(a=i.maxKeys);var h=e.length;a>0&&h>a&&(h=a);for(var u=0;u<h;++u){var d,f,m,_,x=e[u].replace(n,"%20"),y=x.indexOf(r);y>=0?(d=x.substr(0,y),f=x.substr(y+1)):(d=x,f=""),m=decodeURIComponent(d),_=decodeURIComponent(f),JS(s,m)?Array.isArray(s[m])?s[m].push(_):s[m]=[s[m],_]:s[m]=_}return s},ka=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},ew=function(e,t,r,i){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(s){var n=encodeURIComponent(ka(s))+r;return Array.isArray(e[s])?e[s].map(function(a){return n+encodeURIComponent(ka(a))}).join(t):n+encodeURIComponent(ka(e[s]))}).join(t):i?encodeURIComponent(ka(i))+r+encodeURIComponent(ka(e)):""},Wi={};Wi.decode=Wi.parse=tw,Wi.encode=Wi.stringify=ew;Wi.decode;Wi.encode;Wi.parse;Wi.stringify;mo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:globalThis,ae=rx={};(function(){try{ji=typeof setTimeout=="function"?setTimeout:rp}catch{ji=rp}try{Vi=typeof clearTimeout=="function"?clearTimeout:ip}catch{Vi=ip}})();$i=[],po=!1,au=-1;ae.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];$i.push(new V_(e,t)),$i.length!==1||po||ix(sx)},V_.prototype.run=function(){(this||mo).fun.apply(null,(this||mo).array)},ae.title="browser",ae.browser=!0,ae.env={},ae.argv=[],ae.version="",ae.versions={},ae.on=Xi,ae.addListener=Xi,ae.once=Xi,ae.off=Xi,ae.removeListener=Xi,ae.removeAllListeners=Xi,ae.emit=Xi,ae.prependListener=Xi,ae.prependOnceListener=Xi,ae.listeners=function(e){return[]},ae.binding=function(e){throw new Error("process.binding is not supported")},ae.cwd=function(){return"/"},ae.chdir=function(e){throw new Error("process.chdir is not supported")},ae.umask=function(){return 0};ie=rx;ie.addListener;ie.argv;ie.binding;ie.browser;ie.chdir;ie.cwd;ie.emit;ie.env;ie.listeners;ie.nextTick;ie.off;ie.on;ie.once;ie.prependListener;ie.prependOnceListener;ie.removeAllListeners;ie.removeListener;ie.title;ie.umask;ie.version;ie.versions;Qf={},W_=!1,uo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:globalThis;Qt=iw();Qt.platform="browser";Qt.addListener;Qt.argv;Qt.binding;Qt.browser;Qt.chdir;Qt.cwd;Qt.emit;Qt.env;Qt.listeners;Qt.nextTick;Qt.off;Qt.on;Qt.once;Qt.prependListener;Qt.prependOnceListener;Qt.removeAllListeners;Qt.removeListener;Qt.title;Qt.umask;Qt.version;Qt.versions;Zf={},$_=!1;Y_=sw(),Ht={},nw=gn,bi={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}};Ht.parse=Fa,Ht.resolve=function(e,t){return Fa(e,!1,!0).resolve(t)},Ht.resolveObject=function(e,t){return e?Fa(e,!1,!0).resolveObject(t):t},Ht.format=function(e){return bi.isString(e)&&(e=Fa(e)),e instanceof Fr?e.format():Fr.prototype.format.call(e)},Ht.Url=Fr;ow=/^([a-z0-9.+-]+:)/i,aw=/:[0-9]*$/,lw=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,hw=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),sp=["'"].concat(hw),q_=["%","/","?",";","#"].concat(sp),K_=["/","?","#"],Q_=/^[+a-z0-9A-Z_-]{0,63}$/,uw=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,cw={javascript:!0,"javascript:":!0},Jf={javascript:!0,"javascript:":!0},co={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},tp=Wi;Fr.prototype.parse=function(e,t,r){if(!bi.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=i!==-1&&i<e.indexOf("#")?"?":"#",n=e.split(s);n[0]=n[0].replace(/\\/g,"/");var a=e=n.join(s);if(a=a.trim(),!r&&e.split("#").length===1){var h=lw.exec(a);if(h)return this.path=a,this.href=a,this.pathname=h[1],h[2]?(this.search=h[2],this.query=t?tp.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=ow.exec(a);if(u){var d=(u=u[0]).toLowerCase();this.protocol=d,a=a.substr(u.length)}if(r||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=a.substr(0,2)==="//";!f||u&&Jf[u]||(a=a.substr(2),this.slashes=!0)}if(!Jf[u]&&(f||u&&!co[u])){for(var m,_,x=-1,y=0;y<K_.length;y++)(b=a.indexOf(K_[y]))!==-1&&(x===-1||b<x)&&(x=b);for((_=x===-1?a.lastIndexOf("@"):a.lastIndexOf("@",x))!==-1&&(m=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(m)),x=-1,y=0;y<q_.length;y++){var b;(b=a.indexOf(q_[y]))!==-1&&(x===-1||b<x)&&(x=b)}x===-1&&(x=a.length),this.host=a.slice(0,x),a=a.slice(x),this.parseHost(),this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S)for(var C=this.hostname.split(/\./),M=(y=0,C.length);y<M;y++){var w=C[y];if(w&&!w.match(Q_)){for(var R="",tt=0,et=w.length;tt<et;tt++)w.charCodeAt(tt)>127?R+="x":R+=w[tt];if(!R.match(Q_)){var j=C.slice(0,y),z=C.slice(y+1),it=w.match(uw);it&&(j.push(it[1]),z.unshift(it[2])),z.length&&(a="/"+z.join(".")+a),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),S||(this.hostname=nw.toASCII(this.hostname));var V=this.port?":"+this.port:"",K=this.hostname||"";this.host=K+V,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!cw[d])for(y=0,M=sp.length;y<M;y++){var ot=sp[y];if(a.indexOf(ot)!==-1){var k=encodeURIComponent(ot);k===ot&&(k=escape(ot)),a=a.split(ot).join(k)}}var F=a.indexOf("#");F!==-1&&(this.hash=a.substr(F),a=a.slice(0,F));var _t=a.indexOf("?");if(_t!==-1?(this.search=a.substr(_t),this.query=a.substr(_t+1),t&&(this.query=tp.parse(this.query)),a=a.slice(0,_t)):t&&(this.search="",this.query={}),a&&(this.pathname=a),co[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){V=this.pathname||"";var ht=this.search||"";this.path=V+ht}return this.href=this.format(),this},Fr.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=e+this.host:this.hostname&&(s=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&bi.isObject(this.query)&&Object.keys(this.query).length&&(n=tp.stringify(this.query));var a=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||co[t])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),t+s+(r=r.replace(/[?#]/g,function(h){return encodeURIComponent(h)}))+(a=a.replace("#","%23"))+i},Fr.prototype.resolve=function(e){return this.resolveObject(Fa(e,!1,!0)).format()},Fr.prototype.resolveObject=function(e){if(bi.isString(e)){var t=new Fr;t.parse(e,!1,!0),e=t}for(var r=new Fr,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];r[n]=this[n]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),h=0;h<a.length;h++){var u=a[h];u!=="protocol"&&(r[u]=e[u])}return co[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!co[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var m=d[f];r[m]=e[m]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||Jf[e.protocol])r.pathname=e.pathname;else{for(var _=(e.pathname||"").split("/");_.length&&!(e.host=_.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),r.pathname=_.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var x=r.pathname||"",y=r.search||"";r.path=x+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&r.pathname.charAt(0)==="/",S=e.host||e.pathname&&e.pathname.charAt(0)==="/",C=S||b||r.host&&e.pathname,M=C,w=r.pathname&&r.pathname.split("/")||[],R=(_=e.pathname&&e.pathname.split("/")||[],r.protocol&&!co[r.protocol]);if(R&&(r.hostname="",r.port=null,r.host&&(w[0]===""?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(_[0]===""?_[0]=e.host:_.unshift(e.host)),e.host=null),C=C&&(_[0]===""||w[0]==="")),S)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=_;else if(_.length)w||(w=[]),w.pop(),w=w.concat(_),r.search=e.search,r.query=e.query;else if(!bi.isNullOrUndefined(e.search))return R&&(r.hostname=r.host=w.shift(),(it=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=it.shift(),r.host=r.hostname=it.shift())),r.search=e.search,r.query=e.query,bi.isNull(r.pathname)&&bi.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var tt=w.slice(-1)[0],et=(r.host||e.host||w.length>1)&&(tt==="."||tt==="..")||tt==="",j=0,z=w.length;z>=0;z--)(tt=w[z])==="."?w.splice(z,1):tt===".."?(w.splice(z,1),j++):j&&(w.splice(z,1),j--);if(!C&&!M)for(;j--;j)w.unshift("..");!C||w[0]===""||w[0]&&w[0].charAt(0)==="/"||w.unshift(""),et&&w.join("/").substr(-1)!=="/"&&w.push("");var it,V=w[0]===""||w[0]&&w[0].charAt(0)==="/";return R&&(r.hostname=r.host=V?"":w.length?w.shift():"",(it=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=it.shift(),r.host=r.hostname=it.shift())),(C=C||r.host&&w.length)&&!V&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),bi.isNull(r.pathname)&&bi.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},Fr.prototype.parseHost=function(){var e=this.host,t=aw.exec(e);t&&((t=t[0])!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};Ht.Url;Ht.format;Ht.resolve;Ht.resolveObject;ep={},Z_=!1;J_=dw(),fw=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Ht.URL=typeof URL<"u"?URL:null;Ht.pathToFileURL=Cw;Ht.fileURLToPath=Sw;Ht.Url;Ht.format;Ht.resolve;Ht.resolveObject;Ht.URL;pw=92,mw=47,gw=97,_w=122,np=fw==="win32",xw=/\//g,vw=/%/g,yw=/\\/g,bw=/\n/g,Tw=/\r/g,Ew=/\t/g;Rw=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Ht.URL=typeof URL<"u"?URL:null;Ht.pathToFileURL=zw;Ht.fileURLToPath=Uw;P2=Ht.Url,nx=Ht.format,ox=Ht.resolve,I2=Ht.resolveObject,ax=Ht.parse,M2=Ht.URL,Pw=92,Iw=47,Mw=97,Dw=122,op=Rw==="win32",Bw=/\//g,Nw=/%/g,Ow=/\\/g,Lw=/\n/g,kw=/\r/g,Fw=/\t/g});var lu,ap=T(()=>{lx();lu={parse:ax,format:nx,resolve:ox}});function qr(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Ua(e){return e.split("?")[0].split("#")[0]}function Xw(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function jw(e,t,r){return e.replace(new RegExp(Xw(t),"g"),r)}function Vw(e,t){let r="",i=0,s=-1,n=0,a=-1;for(let h=0;h<=e.length;++h){if(h<e.length)a=e.charCodeAt(h);else{if(a===47)break;a=47}if(a===47){if(!(s===h-1||n===1))if(s!==h-1&&n===2){if(r.length<2||i!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){let u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",i=0):(r=r.slice(0,u),i=r.length-1-r.lastIndexOf("/")),s=h,n=0;continue}}else if(r.length===2||r.length===1){r="",i=0,s=h,n=0;continue}}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+=`/${e.slice(s+1,h)}`:r=e.slice(s+1,h),i=h-s-1;s=h,n=0}else a===46&&n!==-1?++n:n=-1}return r}var lp,hx=T(()=>{Lt();lp={toPosix(e){return jw(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){qr(e),e=this.toPosix(e);let t="",r=/^file:\/\/\//.exec(e),i=/^[^/:]+:\/\//.exec(e),s=/^[^/:]+:\//.exec(e);if(r||i||s){let n=r?.[0]||i?.[0]||s?.[0];t=n,e=e.slice(n.length)}return t},toAbsolute(e,t,r){if(this.isDataUrl(e))return e;let i=Ua(this.toPosix(t??B.ADAPTER.getBaseUrl())),s=Ua(this.toPosix(r??this.rootname(i)));return qr(e),e=this.toPosix(e),e.startsWith("/")?lp.join(s,e.slice(1)):this.isAbsolute(e)?e:this.join(i,e)},normalize(e){if(e=this.toPosix(e),qr(e),e.length===0)return".";let t="",r=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));let i=e.endsWith("/");return e=Vw(e,!1),e.length>0&&i&&(e+="/"),r?`/${e}`:t+e},isAbsolute(e){return qr(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){let i=e[r];if(qr(i),i.length>0)if(t===void 0)t=i;else{let s=e[r-1]??"";this.extname(s)?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(qr(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0),r=t===47,i=-1,s=!0,n=this.getProtocol(e),a=e;e=e.slice(n.length);for(let h=e.length-1;h>=1;--h)if(t=e.charCodeAt(h),t===47){if(!s){i=h;break}}else s=!1;return i===-1?r?"/":this.isUrl(a)?n+e:n:r&&i===1?"//":n+e.slice(0,i)},rootname(e){qr(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){let r=e.indexOf("/",t.length);r!==-1?t=e.slice(0,r):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){qr(e),t&&qr(t),e=Ua(this.toPosix(e));let r=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let a=t.length-1,h=-1;for(n=e.length-1;n>=0;--n){let u=e.charCodeAt(n);if(u===47){if(!s){r=n+1;break}}else h===-1&&(s=!1,h=n+1),a>=0&&(u===t.charCodeAt(a)?--a===-1&&(i=n):(a=-1,i=h))}return r===i?i=h:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){qr(e),e=Ua(this.toPosix(e));let t=-1,r=0,i=-1,s=!0,n=0;for(let a=e.length-1;a>=0;--a){let h=e.charCodeAt(a);if(h===47){if(!s){r=a+1;break}continue}i===-1&&(s=!1,i=a+1),h===46?t===-1?t=a:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===r+1?"":e.slice(t,i)},parse(e){qr(e);let t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Ua(this.toPosix(e));let r=e.charCodeAt(0),i=this.isAbsolute(e),s,n="";t.root=this.rootname(e),i||this.hasProtocol(e)?s=1:s=0;let a=-1,h=0,u=-1,d=!0,f=e.length-1,m=0;for(;f>=s;--f){if(r=e.charCodeAt(f),r===47){if(!d){h=f+1;break}continue}u===-1&&(d=!1,u=f+1),r===46?a===-1?a=f:m!==1&&(m=1):a!==-1&&(m=-1)}return a===-1||u===-1||m===0||m===1&&a===u-1&&a===h+1?u!==-1&&(h===0&&i?t.base=t.name=e.slice(1,u):t.base=t.name=e.slice(h,u)):(h===0&&i?(t.name=e.slice(1,a),t.base=e.slice(1,u)):(t.name=e.slice(h,a),t.base=e.slice(h,u)),t.ext=e.slice(a,u)),t.dir=this.dirname(e),n&&(t.dir=n+t.dir),t},sep:"/",delimiter:":"}});function yt(e,t,r=3){if(ux[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(i))),ux[t]=!0}var ux,Ga=T(()=>{ux={}});function cx(){yt("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function dx(){yt("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}var fx=T(()=>{Ga()});function hu(){return typeof hp>"u"&&(hp=function(){let t={stencil:!0,failIfMajorPerformanceCaveat:B.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!B.ADAPTER.getWebGLRenderingContext())return!1;let r=B.ADAPTER.createCanvas(),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),s=!!i?.getContextAttributes()?.stencil;if(i){let n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,s}catch{return!1}}()),hp}var hp,px=T(()=>{eu();Lt()});var Ww,Yi,we,Ur,Tx,mx,up,$w,uu,Ex,Sx,gx,_x,xx,Ha,Yw,qw,Kw,Qw,fp,vx,Zw,cp,dp,yx,pp,Kr,bx,wx,Ax=T(()=>{Ww={grad:.9,turn:360,rad:360/(2*Math.PI)},Yi=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},we=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},Ur=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},Tx=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},mx=function(e){return{r:Ur(e.r,0,255),g:Ur(e.g,0,255),b:Ur(e.b,0,255),a:Ur(e.a)}},up=function(e){return{r:we(e.r),g:we(e.g),b:we(e.b),a:we(e.a,3)}},$w=/^#([0-9a-f]{3,8})$/i,uu=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Ex=function(e){var t=e.r,r=e.g,i=e.b,s=e.a,n=Math.max(t,r,i),a=n-Math.min(t,r,i),h=a?n===t?(r-i)/a:n===r?2+(i-t)/a:4+(t-r)/a:0;return{h:60*(h<0?h+6:h),s:n?a/n*100:0,v:n/255*100,a:s}},Sx=function(e){var t=e.h,r=e.s,i=e.v,s=e.a;t=t/360*6,r/=100,i/=100;var n=Math.floor(t),a=i*(1-r),h=i*(1-(t-n)*r),u=i*(1-(1-t+n)*r),d=n%6;return{r:255*[i,h,a,a,u,i][d],g:255*[u,i,i,h,a,a][d],b:255*[a,a,u,i,i,h][d],a:s}},gx=function(e){return{h:Tx(e.h),s:Ur(e.s,0,100),l:Ur(e.l,0,100),a:Ur(e.a)}},_x=function(e){return{h:we(e.h),s:we(e.s),l:we(e.l),a:we(e.a,3)}},xx=function(e){return Sx((r=(t=e).s,{h:t.h,s:(r*=((i=t.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:t.a}));var t,r,i},Ha=function(e){return{h:(t=Ex(e)).h,s:(s=(200-(r=t.s))*(i=t.v)/100)>0&&s<200?r*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,r,i,s},Yw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Kw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Qw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fp={string:[[function(e){var t=$w.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?we(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?we(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Kw.exec(e)||Qw.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:mx({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Yw.exec(e)||qw.exec(e);if(!t)return null;var r,i,s=gx({h:(r=t[1],i=t[2],i===void 0&&(i="deg"),Number(r)*(Ww[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return xx(s)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,i=e.b,s=e.a,n=s===void 0?1:s;return Yi(t)&&Yi(r)&&Yi(i)?mx({r:Number(t),g:Number(r),b:Number(i),a:Number(n)}):null},"rgb"],[function(e){var t=e.h,r=e.s,i=e.l,s=e.a,n=s===void 0?1:s;if(!Yi(t)||!Yi(r)||!Yi(i))return null;var a=gx({h:Number(t),s:Number(r),l:Number(i),a:Number(n)});return xx(a)},"hsl"],[function(e){var t=e.h,r=e.s,i=e.v,s=e.a,n=s===void 0?1:s;if(!Yi(t)||!Yi(r)||!Yi(i))return null;var a=function(h){return{h:Tx(h.h),s:Ur(h.s,0,100),v:Ur(h.v,0,100),a:Ur(h.a)}}({h:Number(t),s:Number(r),v:Number(i),a:Number(n)});return Sx(a)},"hsv"]]},vx=function(e,t){for(var r=0;r<t.length;r++){var i=t[r][0](e);if(i)return[i,t[r][1]]}return[null,void 0]},Zw=function(e){return typeof e=="string"?vx(e.trim(),fp.string):typeof e=="object"&&e!==null?vx(e,fp.object):[null,void 0]},cp=function(e,t){var r=Ha(e);return{h:r.h,s:Ur(r.s+100*t,0,100),l:r.l,a:r.a}},dp=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},yx=function(e,t){var r=Ha(e);return{h:r.h,s:r.s,l:Ur(r.l+100*t,0,100),a:r.a}},pp=function(){function e(t){this.parsed=Zw(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return we(dp(this.rgba),2)},e.prototype.isDark=function(){return dp(this.rgba)<.5},e.prototype.isLight=function(){return dp(this.rgba)>=.5},e.prototype.toHex=function(){return t=up(this.rgba),r=t.r,i=t.g,s=t.b,a=(n=t.a)<1?uu(we(255*n)):"","#"+uu(r)+uu(i)+uu(s)+a;var t,r,i,s,n,a},e.prototype.toRgb=function(){return up(this.rgba)},e.prototype.toRgbString=function(){return t=up(this.rgba),r=t.r,i=t.g,s=t.b,(n=t.a)<1?"rgba("+r+", "+i+", "+s+", "+n+")":"rgb("+r+", "+i+", "+s+")";var t,r,i,s,n},e.prototype.toHsl=function(){return _x(Ha(this.rgba))},e.prototype.toHslString=function(){return t=_x(Ha(this.rgba)),r=t.h,i=t.s,s=t.l,(n=t.a)<1?"hsla("+r+", "+i+"%, "+s+"%, "+n+")":"hsl("+r+", "+i+"%, "+s+"%)";var t,r,i,s,n},e.prototype.toHsv=function(){return t=Ex(this.rgba),{h:we(t.h),s:we(t.s),v:we(t.v),a:we(t.a,3)};var t},e.prototype.invert=function(){return Kr({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Kr(cp(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Kr(cp(this.rgba,-t))},e.prototype.grayscale=function(){return Kr(cp(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Kr(yx(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Kr(yx(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Kr({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):we(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=Ha(this.rgba);return typeof t=="number"?Kr({h:t,s:r.s,l:r.l,a:r.a}):we(r.h)},e.prototype.isEqual=function(t){return this.toHex()===Kr(t).toHex()},e}(),Kr=function(e){return e instanceof pp?e:new pp(e)},bx=[],wx=function(e){e.forEach(function(t){bx.indexOf(t)<0&&(t(pp,fp),bx.push(t))})}});function Cx(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in r)i[r[s]]=s;var n={};e.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,u,d=i[this.toHex()];if(d)return d;if(a?.closest){var f=this.toRgb(),m=1/0,_="black";if(!n.length)for(var x in r)n[x]=new e(r[x]).toRgb();for(var y in r){var b=(h=f,u=n[y],Math.pow(h.r-u.r,2)+Math.pow(h.g-u.g,2)+Math.pow(h.b-u.b,2));b<m&&(m=b,_=y)}return _}},t.string.push([function(a){var h=a.toLowerCase(),u=h==="transparent"?"#0000":r[h];return u?new e(u).toRgb():null},"name"])}var Rx=T(()=>{});var go,xt,Px=T(()=>{Ax();Rx();wx([Cx]);go=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof go)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){let r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,n)=>s===t[n]);if(e!==null&&t!==null){let s=Object.keys(e),n=Object.keys(t);return s.length!==n.length?!1:s.every(a=>e[a]===t[a])}return e===t}toRgba(){let[e,t,r,i]=this._components;return{r:e,g:t,b:r,a:i}}toRgb(){let[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){let[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){let[t,r,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];let[t,r,i]=this._components;return e[0]=t,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,r,i,s]=go.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){let[t,r,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];let[t,r,i,s]=this._components;return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}normalize(e){let t,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let n=e;t=(n>>16&255)/255,r=(n>>8&255)/255,i=(n&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,i,s=255]=e,t/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let a=go.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}let n=Kr(e);n.isValid()&&({r:t,g:r,b:i,a:s}=n.rgba,t/=255,r/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);let[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),r)}),e)}},xt=go;xt.shared=new go;xt.temp=new go;xt.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i});var Ss=T(()=>{Px()});function Ix(e,t=[]){return yt("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),xt.shared.setValue(e).toRgbArray(t)}function Mx(e){return yt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),xt.shared.setValue(e).toHex()}function Dx(e){return yt("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),xt.shared.setValue(e).toNumber()}function Bx(e){return yt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),xt.shared.setValue(e).toNumber()}var Nx=T(()=>{Ss();Ga()});function Jw(){let e=[],t=[];for(let i=0;i<32;i++)e[i]=i,t[i]=i;e[pt.NORMAL_NPM]=pt.NORMAL,e[pt.ADD_NPM]=pt.ADD,e[pt.SCREEN_NPM]=pt.SCREEN,t[pt.NORMAL]=pt.NORMAL_NPM,t[pt.ADD]=pt.ADD_NPM,t[pt.SCREEN]=pt.SCREEN_NPM;let r=[];return r.push(t),r.push(e),r}function Ox(e,t){return za[t?1:0][e]}function Lx(e,t,r,i=!0){return yt("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),xt.shared.setValue(e).premultiply(t,i).toArray(r??new Float32Array(4))}function kx(e,t){return yt("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),xt.shared.setValue(e).toPremultiplied(t)}function Fx(e,t,r,i=!0){return yt("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),xt.shared.setValue(e).premultiply(t,i).toArray(r??new Float32Array(4))}var za,Ux=T(()=>{Ss();bt();Ga();za=Jw()});var cu,mp=T(()=>{cu=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i});function Gx(e,t=null){let r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${r}`);for(let i=0,s=0;i<r;i+=6,s+=4)t[i+0]=s+0,t[i+1]=s+1,t[i+2]=s+2,t[i+3]=s+0,t[i+4]=s+2,t[i+5]=s+3;return t}var Hx=T(()=>{});function ws(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}var gp=T(()=>{});function zx(e,t){let r=0,i=0,s={};for(let u=0;u<e.length;u++)i+=t[u],r+=e[u].length;let n=new ArrayBuffer(r*4),a=null,h=0;for(let u=0;u<e.length;u++){let d=t[u],f=e[u],m=ws(f);s[m]||(s[m]=new tA[m](n)),a=s[m];for(let _=0;_<f.length;_++){let x=(_/d|0)*i+h,y=_%d;a[x+y]=f[_]}h+=d}return new Float32Array(n)}var tA,Xx=T(()=>{gp();tA={Float32Array,Uint32Array,Int32Array,Uint8Array}});function As(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function Xa(e){return!(e&e-1)&&!!e}function ja(e){let t=(e>65535?1:0)<<4;e>>>=t;let r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}var jx=T(()=>{});function du(e,t,r){let i=e.length,s;if(t>=i||r===0)return;r=t+r>i?i-t:r;let n=i-r;for(s=t;s<n;++s)e[s]=e[s+r];e.length=n}var Vx=T(()=>{});function Wx(e){return e===0?0:e<0?-1:1}var $x=T(()=>{});function Ei(){return++eA}var eA,Yx=T(()=>{eA=0});var qx,_o,_p=T(()=>{qx=class{constructor(e,t,r,i){this.left=e,this.top=t,this.right=r,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}},_o=qx;_o.EMPTY=new qx(0,0,0,0)});function Kx(){let e;for(e in Ae)Ae[e].destroy();for(e in Je)Je[e].destroy()}function Qx(){let e;for(e in Ae)delete Ae[e];for(e in Je)delete Je[e]}var Va,Ae,Je,Zx=T(()=>{Va={},Ae=Object.create(null),Je=Object.create(null)});var fu,Jx=T(()=>{Lt();fu=class{constructor(t,r,i){this._canvas=B.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||B.RESOLUTION,this.resize(t,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,r){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}});function tv(e,t,r){for(let i=0,s=4*r*t;i<t;++i,s+=4)if(e[s+3]!==0)return!1;return!0}function ev(e,t,r,i,s){let n=4*t;for(let a=i,h=i*n+4*r;a<=s;++a,h+=n)if(e[h+3]!==0)return!1;return!0}function pu(e){let{width:t,height:r}=e,i=e.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");let n=i.getImageData(0,0,t,r).data,a=0,h=0,u=t-1,d=r-1;for(;h<r&&tv(n,t,h);)++h;if(h===r)return _o.EMPTY;for(;tv(n,t,d);)--d;for(;ev(n,t,a,h,d);)++a;for(;ev(n,t,u,h,d);)--u;return++u,++d,new _o(a,h,u,d)}var xp=T(()=>{_p()});function rv(e){let t=pu(e),{width:r,height:i}=t,s=null;if(!t.isEmpty()){let n=e.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");s=n.getImageData(t.left,t.top,r,i)}return{width:r,height:i,data:s}}var iv=T(()=>{xp()});function sv(e){let t=cu.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var nv=T(()=>{mp()});function gu(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,mu||(mu=document.createElement("a")),mu.href=e;let r=lu.parse(mu.href),i=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!i||r.protocol!==t.protocol?"anonymous":""}var mu,ov=T(()=>{ap()});function Wa(e,t=1){let r=B.RETINA_PREFIX?.exec(e);return r?parseFloat(r[1]):t}var av=T(()=>{eu();Lt()});var Q={};f_(Q,{BaseTextureCache:()=>Je,BoundingBox:()=>_o,CanvasRenderTarget:()=>fu,DATA_URI:()=>cu,EventEmitter:()=>Cs.default,ProgramCache:()=>Va,TextureCache:()=>Ae,clearTextureCache:()=>Qx,correctBlendMode:()=>Ox,createIndicesForQuads:()=>Gx,decomposeDataUri:()=>sv,deprecation:()=>yt,destroyTextureCache:()=>Kx,determineCrossOrigin:()=>gu,earcut:()=>lv.default,getBufferType:()=>ws,getCanvasBoundingBox:()=>pu,getResolutionOfUrl:()=>Wa,hex2rgb:()=>Ix,hex2string:()=>Mx,interleaveTypedArrays:()=>zx,isMobile:()=>kr,isPow2:()=>Xa,isWebGLSupported:()=>hu,log2:()=>ja,nextPow2:()=>As,path:()=>lp,premultiplyBlendMode:()=>za,premultiplyRgba:()=>Lx,premultiplyTint:()=>kx,premultiplyTintToRgba:()=>Fx,removeItems:()=>du,rgb2hex:()=>Bx,sayHello:()=>dx,sign:()=>Wx,skipHello:()=>cx,string2hex:()=>Dx,trimCanvas:()=>rv,uid:()=>Ei,url:()=>lu});var Cs,lv,De=T(()=>{eu();Lt();Cs=qt(O_(),1),lv=qt(G_(),1);ap();hx();fx();px();Nx();Ux();mp();Hx();gp();Xx();jx();Vx();$x();Yx();Ga();_p();Zx();Jx();xp();iv();nv();ov();av()});var N,vp,hv,U,Nt=T(()=>{N=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(N||{}),vp=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},hv=(e,t)=>vp(e).priority??t,U={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(vp).forEach(t=>{t.type.forEach(r=>this._removeHandlers[r]?.(t))}),this},add(...e){return e.map(vp).forEach(t=>{t.type.forEach(r=>{let i=this._addHandlers,s=this._queue;i[r]?i[r](t):(s[r]=s[r]||[],s[r].push(t))})}),this},handle(e,t,r){let i=this._addHandlers,s=this._removeHandlers;if(i[e]||s[e])throw new Error(`Extension type ${e} already has a handler`);i[e]=t,s[e]=r;let n=this._queue;return n[e]&&(n[e].forEach(a=>t(a)),delete n[e]),this},handleByMap(e,t){return this.handle(e,r=>{t[r.name]=r.ref},r=>{delete t[r.name]})},handleByList(e,t,r=-1){return this.handle(e,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,n)=>hv(n,r)-hv(s,r)))},i=>{let s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})}}});var Rs,yp=T(()=>{Rs=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}});function iA(e){let t="";for(let r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}function _u(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let r=t.createShader(t.FRAGMENT_SHADER);for(;;){let i=rA.replace(/%forloop%/gi,iA(e));if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}var rA,xu=T(()=>{rA=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`)});var bp,Tp,Ep,Sp,wp,Ap,ge,$a=T(()=>{bt();bp=0,Tp=1,Ep=2,Sp=3,wp=4,Ap=5,ge=class{constructor(){this.data=0,this.blendMode=pt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<bp)}set blend(t){!!(this.data&1<<bp)!==t&&(this.data^=1<<bp)}get offsets(){return!!(this.data&1<<Tp)}set offsets(t){!!(this.data&1<<Tp)!==t&&(this.data^=1<<Tp)}get culling(){return!!(this.data&1<<Ep)}set culling(t){!!(this.data&1<<Ep)!==t&&(this.data^=1<<Ep)}get depthTest(){return!!(this.data&1<<Sp)}set depthTest(t){!!(this.data&1<<Sp)!==t&&(this.data^=1<<Sp)}get depthMask(){return!!(this.data&1<<Ap)}set depthMask(t){!!(this.data&1<<Ap)!==t&&(this.data^=1<<Ap)}get clockwiseFrontFace(){return!!(this.data&1<<wp)}set clockwiseFrontFace(t){!!(this.data&1<<wp)!==t&&(this.data^=1<<wp)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==pt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let t=new ge;return t.depthTest=!1,t.blend=!0,t}}});function vo(e,t){if(!e)return null;let r="";if(typeof e=="string"){let i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);i&&(r=i[1].toLowerCase())}for(let i=xo.length-1;i>=0;--i){let s=xo[i];if(s.test&&s.test(e,r))return new s(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var xo,yo=T(()=>{xo=[]});var le,uv=T(()=>{le=class{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,r,i,s,n,a,h,u){if(arguments.length>8)throw new Error("max arguments reached");let{name:d,items:f}=this;this._aliasCount++;for(let m=0,_=f.length;m<_;m++)f[m][d](t,r,i,s,n,a,h,u);return f===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){let r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}};Object.defineProperties(le.prototype,{dispatch:{value:le.prototype.emit},run:{value:le.prototype.emit}})});var qi=T(()=>{uv()});var Er,_n=T(()=>{qi();Er=class{constructor(t=0,r=0){this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new le("setRealSize"),this.onUpdate=new le("update"),this.onError=new le("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,r,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,r){return!1}}});var dr,bo=T(()=>{bt();_n();dr=class extends Er{constructor(t,r){let{width:i,height:s}=r||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=t}upload(t,r,i){let s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===fe.UNPACK);let n=r.realWidth,a=r.realHeight;return i.width===n&&i.height===a?s.texSubImage2D(r.target,0,0,0,n,a,r.format,i.type,this.data):(i.width=n,i.height=a,s.texImage2D(r.target,0,i.internalFormat,n,a,0,r.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}});var sA,To,lt,Ki=T(()=>{bt();Lt();De();yo();bo();_n();sA={scaleMode:Lr.NEAREST,format:J.RGBA,alphaMode:fe.NPM},To=class extends Cs.default{constructor(e=null,t=null){super(),t=Object.assign({},To.defaultOptions,t);let{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:n,width:a,height:h,wrapMode:u,format:d,type:f,target:m,resolution:_,resourceOptions:x}=t;e&&!(e instanceof Er)&&(e=vo(e,x),e.internal=!0),this.resolution=_||B.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((h||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=n,this.format=d,this.type=f,this.target=m,this.alphaMode=r,this.uid=Ei(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&h>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Xa(this.realWidth)&&Xa(this.realHeight)}setResolution(e){let t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Je[this.cacheId],delete Ae[this.cacheId],this.cacheId=null),this.dispose(),To.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=B.STRICT_TEXTURE_CACHE){let i=typeof e=="string",s=null;if(i)s=e;else{if(!e._pixiId){let a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${Ei()}`}s=e._pixiId}let n=Je[s];if(i&&r&&!n)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return n||(n=new To(e,t),n.cacheId=s,To.addToCache(n,s)),n}static fromBuffer(e,t,r,i){e=e||new Float32Array(t*r*4);let s=new dr(e,{width:t,height:r}),n=e instanceof Float32Array?at.FLOAT:at.UNSIGNED_BYTE;return new To(s,Object.assign({},sA,{type:n},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Je[t]&&Je[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Je[t]=e)}static removeFromCache(e){if(typeof e=="string"){let t=Je[e];if(t){let r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Je[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Je[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}},lt=To;lt.defaultOptions={mipmap:Me.POW2,anisotropicLevel:0,scaleMode:Lr.LINEAR,wrapMode:ur.CLAMP,alphaMode:fe.UNPACK,target:Hi.TEXTURE_2D,format:J.RGBA,type:at.UNSIGNED_BYTE};lt._globalBatch=0});var Ps,Cp=T(()=>{bt();Ps=class{constructor(){this.texArray=null,this.blend=0,this.type=ze.TRIANGLES,this.start=0,this.size=0,this.data=null}}});var nA,Dt,Eo=T(()=>{bt();qi();nA=0,Dt=class{constructor(t,r=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=nA++,this.disposeRunner=new le("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?cr.ELEMENT_ARRAY_BUFFER:cr.ARRAY_BUFFER}get index(){return this.type===cr.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Dt(t)}}});var Is,Rp=T(()=>{bt();Is=class{constructor(t,r=0,i=!1,s=at.FLOAT,n,a,h,u=1){this.buffer=t,this.size=r,this.normalized=i,this.type=s,this.stride=n,this.start=a,this.instance=h,this.divisor=u}destroy(){this.buffer=null}static from(t,r,i,s,n){return new Is(t,r,i,s,n)}}});function cv(e,t){let r=0,i=0,s={};for(let u=0;u<e.length;u++)i+=t[u],r+=e[u].length;let n=new ArrayBuffer(r*4),a=null,h=0;for(let u=0;u<e.length;u++){let d=t[u],f=e[u],m=ws(f);s[m]||(s[m]=new oA[m](n)),a=s[m];for(let _=0;_<f.length;_++){let x=(_/d|0)*i+h,y=_%d;a[x+y]=f[_]}h+=d}return new Float32Array(n)}var oA,dv=T(()=>{De();oA={Float32Array,Uint32Array,Int32Array,Uint8Array}});var fv,aA,lA,je,Ya=T(()=>{bt();qi();De();Rp();Eo();dv();fv={5126:4,5123:2,5121:1},aA=0,lA={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},je=class{constructor(t=[],r={}){this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=aA++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new le("disposeGeometry"),this.refCount=0}addAttribute(t,r,i=0,s=!1,n,a,h,u=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Dt||(r instanceof Array&&(r=new Float32Array(r)),r=new Dt(r));let d=t.split("|");if(d.length>1){for(let m=0;m<d.length;m++)this.addAttribute(d[m],r,i,s,n);return this}let f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[t]=new Is(f,i,s,n,a,h,u),this.instanced=this.instanced||u,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Dt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Dt(t)),t.type=cr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;let t=[],r=[],i=new Dt,s;for(s in this.attributes){let n=this.attributes[s],a=this.buffers[n.buffer];t.push(a.data),r.push(n.size*fv[n.type]/4),n.buffer=0}for(i.data=cv(t,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(let t in this.attributes){let r=this.attributes[t];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){let t=new je;for(let r=0;r<this.buffers.length;r++)t.buffers[r]=new Dt(this.buffers[r].data.slice(0));for(let r in this.attributes){let i=this.attributes[r];t.attributes[r]=new Is(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=cr.ELEMENT_ARRAY_BUFFER),t}static merge(t){let r=new je,i=[],s=[],n=[],a;for(let h=0;h<t.length;h++){a=t[h];for(let u=0;u<a.buffers.length;u++)s[u]=s[u]||0,s[u]+=a.buffers[u].data.length,n[u]=0}for(let h=0;h<a.buffers.length;h++)i[h]=new lA[ws(a.buffers[h].data)](s[h]),r.buffers[h]=new Dt(i[h]);for(let h=0;h<t.length;h++){a=t[h];for(let u=0;u<a.buffers.length;u++)i[u].set(a.buffers[u].data,n[u]),n[u]+=a.buffers[u].data.length}if(r.attributes=a.attributes,a.indexBuffer){r.indexBuffer=r.buffers[a.buffers.indexOf(a.indexBuffer)],r.indexBuffer.type=cr.ELEMENT_ARRAY_BUFFER;let h=0,u=0,d=0,f=0;for(let m=0;m<a.buffers.length;m++)if(a.buffers[m]!==a.indexBuffer){f=m;break}for(let m in a.attributes){let _=a.attributes[m];(_.buffer|0)===f&&(u+=_.size*fv[_.type]/4)}for(let m=0;m<t.length;m++){let _=t[m].indexBuffer.data;for(let x=0;x<_.length;x++)r.indexBuffer.data[x+d]+=h;h+=t[m].buffers[f].data.length/u,d+=_.length}}return r}}});var xn,Pp=T(()=>{bt();Eo();Ya();xn=class extends je{constructor(t=!1){super(),this._buffer=new Dt(null,t,!1),this._indexBuffer=new Dt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,at.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,at.FLOAT).addAttribute("aColor",this._buffer,4,!0,at.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,at.FLOAT).addIndex(this._indexBuffer)}}});var Ms,Ip,Mp,Ft,Ds=T(()=>{Ms=Math.PI*2,Ip=180/Math.PI,Mp=Math.PI/180,Ft=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Ft||{})});var mt,vu=T(()=>{mt=class{constructor(t=0,r=0){this.x=0,this.y=0,this.x=t,this.y=r}clone(){return new mt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,r=t){return this.x=t,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}});var yu,ct,bu=T(()=>{Ds();vu();yu=[new mt,new mt,new mt,new mt],ct=class{constructor(t=0,r=0,i=0,s=0){this.x=Number(t),this.y=Number(r),this.width=Number(i),this.height=Number(s),this.type=Ft.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ct(0,0,0,0)}clone(){return new ct(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(t,r){if(!r){let z=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=z)return!1;let V=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>V}let i=this.left,s=this.right,n=this.top,a=this.bottom;if(s<=i||a<=n)return!1;let h=yu[0].set(t.left,t.top),u=yu[1].set(t.left,t.bottom),d=yu[2].set(t.right,t.top),f=yu[3].set(t.right,t.bottom);if(d.x<=h.x||u.y<=h.y)return!1;let m=Math.sign(r.a*r.d-r.b*r.c);if(m===0||(r.apply(h,h),r.apply(u,u),r.apply(d,d),r.apply(f,f),Math.max(h.x,u.x,d.x,f.x)<=i||Math.min(h.x,u.x,d.x,f.x)>=s||Math.max(h.y,u.y,d.y,f.y)<=n||Math.min(h.y,u.y,d.y,f.y)>=a))return!1;let _=m*(u.y-h.y),x=m*(h.x-u.x),y=_*i+x*n,b=_*s+x*n,S=_*i+x*a,C=_*s+x*a;if(Math.max(y,b,S,C)<=_*h.x+x*h.y||Math.min(y,b,S,C)>=_*f.x+x*f.y)return!1;let M=m*(h.y-d.y),w=m*(d.x-h.x),R=M*i+w*n,tt=M*s+w*n,et=M*i+w*a,j=M*s+w*a;return!(Math.max(R,tt,et,j)<=M*h.x+w*h.y||Math.min(R,tt,et,j)>=M*f.x+w*f.y)}pad(t=0,r=t){return this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this}fit(t){let r=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(i-r,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(t=1,r=.001){let i=Math.ceil((this.x+this.width-r)*t)/t,s=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){let r=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=i-r,this.y=s,this.height=n-s,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}});var vn,pv=T(()=>{Ds();bu();vn=class{constructor(t=0,r=0,i=0){this.x=t,this.y=r,this.radius=i,this.type=Ft.CIRC}clone(){return new vn(this.x,this.y,this.radius)}contains(t,r){if(this.radius<=0)return!1;let i=this.radius*this.radius,s=this.x-t,n=this.y-r;return s*=s,n*=n,s+n<=i}getBounds(){return new ct(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}});var yn,mv=T(()=>{Ds();bu();yn=class{constructor(t=0,r=0,i=0,s=0){this.x=t,this.y=r,this.width=i,this.height=s,this.type=Ft.ELIP}clone(){return new yn(this.x,this.y,this.width,this.height)}contains(t,r){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,s=(r-this.y)/this.height;return i*=i,s*=s,i+s<=1}getBounds(){return new ct(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}});var Qr,gv=T(()=>{Ds();Qr=class{constructor(...t){let r=Array.isArray(t[0])?t[0]:t;if(typeof r[0]!="number"){let i=[];for(let s=0,n=r.length;s<n;s++)i.push(r[s].x,r[s].y);r=i}this.points=r,this.type=Ft.POLY,this.closeStroke=!0}clone(){let t=this.points.slice(),r=new Qr(t);return r.closeStroke=this.closeStroke,r}contains(t,r){let i=!1,s=this.points.length/2;for(let n=0,a=s-1;n<s;a=n++){let h=this.points[n*2],u=this.points[n*2+1],d=this.points[a*2],f=this.points[a*2+1];u>r!=f>r&&t<(d-h)*((r-u)/(f-u))+h&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,r)=>`${t}, ${r}`,"")}]`}}});var bn,_v=T(()=>{Ds();bn=class{constructor(t=0,r=0,i=0,s=0,n=20){this.x=t,this.y=r,this.width=i,this.height=s,this.radius=n,this.type=Ft.RREC}clone(){return new bn(this.x,this.y,this.width,this.height,this.radius)}contains(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+i&&r<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),n=r-(this.y+i),a=i*i;if(s*s+n*n<=a||(s=t-(this.x+this.width-i),s*s+n*n<=a)||(n=r-(this.y+this.height-i),s*s+n*n<=a)||(s=t-(this.x+i),s*s+n*n<=a))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}});var Tt,Tu=T(()=>{Ds();vu();Tt=class{constructor(t=1,r=0,i=0,s=1,n=0,a=0){this.array=null,this.a=t,this.b=r,this.c=i,this.d=s,this.tx=n,this.ty=a}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,r,i,s,n,a){return this.a=t,this.b=r,this.c=i,this.d=s,this.tx=n,this.ty=a,this}toArray(t,r){this.array||(this.array=new Float32Array(9));let i=r||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,r){r=r||new mt;let i=t.x,s=t.y;return r.x=this.a*i+this.c*s+this.tx,r.y=this.b*i+this.d*s+this.ty,r}applyInverse(t,r){r=r||new mt;let i=1/(this.a*this.d+this.c*-this.b),s=t.x,n=t.y;return r.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,r}translate(t,r){return this.tx+=t,this.ty+=r,this}scale(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this}rotate(t){let r=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,a=this.tx;return this.a=s*r-this.b*i,this.b=s*i+this.b*r,this.c=n*r-this.d*i,this.d=n*i+this.d*r,this.tx=a*r-this.ty*i,this.ty=a*i+this.ty*r,this}append(t){let r=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*r+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*r+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*r+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}setTransform(t,r,i,s,n,a,h,u,d){return this.a=Math.cos(h+d)*n,this.b=Math.sin(h+d)*n,this.c=-Math.sin(h-u)*a,this.d=Math.cos(h-u)*a,this.tx=t-(i*this.a+s*this.c),this.ty=r-(i*this.b+s*this.d),this}prepend(t){let r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){let i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this}decompose(t){let r=this.a,i=this.b,s=this.c,n=this.d,a=t.pivot,h=-Math.atan2(-s,n),u=Math.atan2(i,r),d=Math.abs(h+u);return d<1e-5||Math.abs(Ms-d)<1e-5?(t.rotation=u,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=u),t.scale.x=Math.sqrt(r*r+i*i),t.scale.y=Math.sqrt(s*s+n*n),t.position.x=this.tx+(a.x*r+a.y*s),t.position.y=this.ty+(a.x*i+a.y*n),t}invert(){let t=this.a,r=this.b,i=this.c,s=this.d,n=this.tx,a=t*s-r*i;return this.a=s/a,this.b=-r/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-s*n)/a,this.ty=-(t*this.ty-r*n)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let t=new Tt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Tt}static get TEMP_MATRIX(){return new Tt}}});function hA(){for(let e=0;e<16;e++){let t=[];Dp.push(t);for(let r=0;r<16;r++){let i=Eu(Tn[e]*Tn[r]+Sn[e]*En[r]),s=Eu(En[e]*Tn[r]+wn[e]*En[r]),n=Eu(Tn[e]*Sn[r]+Sn[e]*wn[r]),a=Eu(En[e]*Sn[r]+wn[e]*wn[r]);for(let h=0;h<16;h++)if(Tn[h]===i&&En[h]===s&&Sn[h]===n&&wn[h]===a){t.push(h);break}}}for(let e=0;e<16;e++){let t=new Tt;t.set(Tn[e],En[e],Sn[e],wn[e],0,0),xv.push(t)}}var Tn,En,Sn,wn,Dp,xv,Eu,Xt,vv=T(()=>{Tu();Tn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],En=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Sn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],wn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Dp=[],xv=[],Eu=Math.sign;hA();Xt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Tn[e],uY:e=>En[e],vX:e=>Sn[e],vY:e=>wn[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Dp[e][t],sub:(e,t)=>Dp[e][Xt.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?Xt.S:Xt.N:Math.abs(t)*2<=Math.abs(e)?e>0?Xt.E:Xt.W:t>0?e>0?Xt.SE:Xt.SW:e>0?Xt.NE:Xt.NW,matrixAppendRotationInv:(e,t,r=0,i=0)=>{let s=xv[Xt.inv(t)];s.tx=r,s.ty=i,e.append(s)}}});var Ve,Bp=T(()=>{Ve=class{constructor(t,r,i=0,s=0){this._x=i,this._y=s,this.cb=t,this.scope=r}clone(t=this.cb,r=this.scope){return new Ve(t,r,this._x,this._y)}set(t=0,r=t){return(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}});var yv,Bs,bv=T(()=>{Tu();Bp();yv=class{constructor(){this.worldTransform=new Tt,this.localTransform=new Tt,this.position=new Ve(this.onChange,this,0,0),this.scale=new Ve(this.onChange,this,1,1),this.pivot=new Ve(this.onChange,this,0,0),this.skew=new Ve(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){let e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){let t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){let r=e.worldTransform,i=this.worldTransform;i.a=t.a*r.a+t.b*r.c,i.b=t.a*r.b+t.b*r.d,i.c=t.c*r.a+t.d*r.c,i.d=t.c*r.b+t.d*r.d,i.tx=t.tx*r.a+t.ty*r.c+r.tx,i.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}},Bs=yv;Bs.IDENTITY=new yv});var Be=T(()=>{pv();mv();gv();bu();_v();vv();Tu();Bp();vu();bv();Ds()});var Tv,Ev=T(()=>{Tv=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`});var Sv,wv=T(()=>{Sv=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`});function Su(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var Np=T(()=>{});function Op(e){let t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function qa(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Op(2*t);case"bvec3":return Op(3*t);case"bvec4":return Op(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var wu=T(()=>{});var Si,Ka=T(()=>{Si=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}]});function Lp(e,t){let r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(let i in e.uniforms){let s=t[i];if(!s){e.uniforms[i]?.group&&(e.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}let n=e.uniforms[i],a=!1;for(let h=0;h<Si.length;h++)if(Si[h].test(s,n)){r.push(Si[h].code(i,n)),a=!0;break}if(!a){let u=(s.size===1&&!s.isArray?uA:cA)[s.type].replace("location",`ud["${i}"].location`);r.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}var uA,cA,kp=T(()=>{Ka();uA={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},cA={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"}});function Cu(){if(Au===Av||Au?.isContextLost()){let e=B.ADAPTER.createCanvas(),t;B.PREFER_ENV>=br.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Au=t}return Au}var Av,Au,Ru=T(()=>{bt();Lt();Av={},Au=Av});function Fp(){if(!Pu){Pu=Qe.MEDIUM;let e=Cu();e&&e.getShaderPrecisionFormat&&(Pu=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?Qe.HIGH:Qe.MEDIUM)}return Pu}var Pu,Up=T(()=>{bt();Ru()});function Cv(e,t){let r=e.getShaderSource(t).split(`
`).map((d,f)=>`${f}: ${d}`),i=e.getShaderInfoLog(t),s=i.split(`
`),n={},a=s.map(d=>parseFloat(d.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(d=>d&&!n[d]?(n[d]=!0,!0):!1),h=[""];a.forEach(d=>{r[d-1]=`%c${r[d-1]}%c`,h.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let u=r.join(`
`);h[0]=u,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...h),console.groupEnd()}function Gp(e,t,r,i){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||Cv(e,r),e.getShaderParameter(i,e.COMPILE_STATUS)||Cv(e,i),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}var Hp=T(()=>{});function Qa(e){return dA[e]}var dA,Iu=T(()=>{dA={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1}});function Za(e,t){if(!Mu){let r=Object.keys(Rv);Mu={};for(let i=0;i<r.length;++i){let s=r[i];Mu[e[s]]=Rv[s]}}return Mu[t]}var Mu,Rv,Du=T(()=>{Mu=null,Rv={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"}});function Bu(e,t,r){if(e.substring(0,9)!=="precision"){let i=t;return t===Qe.HIGH&&r!==Qe.HIGH&&(i=Qe.MEDIUM),`precision ${i} float;
${e}`}else if(r!==Qe.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var zp=T(()=>{bt()});function Nu(){if(typeof Ja=="boolean")return Ja;try{Ja=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ja=!1}return Ja}var Ja,Ou=T(()=>{});var Lu=T(()=>{xu();Np();wu();kp();Up();Ru();Hp();Iu();Du();zp();Ka();Ou()});var fA,ku,So,Ce,wo=T(()=>{bt();De();Ev();wv();Lu();zp();Up();fA=0,ku={},So=class{constructor(e,t,r="pixi-shader",i={}){this.extra={},this.id=fA++,this.vertexSrc=e||So.defaultVertexSrc,this.fragmentSrc=t||So.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),ku[r]?(ku[r]++,r+=`-${ku[r]}`):ku[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=Bu(this.vertexSrc,So.defaultVertexPrecision,Qe.HIGH),this.fragmentSrc=Bu(this.fragmentSrc,So.defaultFragmentPrecision,Fp())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Sv}static get defaultFragmentSrc(){return Tv}static from(e,t,r){let i=e+t,s=Va[i];return s||(Va[i]=s=new So(e,t,r)),s}},Ce=So;Ce.defaultVertexPrecision=Qe.HIGH;Ce.defaultFragmentPrecision=kr.apple.device?Qe.HIGH:Qe.MEDIUM});var pA,_e,Ao=T(()=>{bt();Eo();pA=0,_e=class{constructor(t,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=pA++,this.static=!!r,this.ubo=!!i,t instanceof Dt?(this.buffer=t,this.buffer.type=cr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Dt(new Float32Array(1)),this.buffer.type=cr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,r,i){if(!this.ubo)this.uniforms[t]=new _e(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,r,i){return new _e(t,r,i)}static uboFrom(t,r){return new _e(t,r??!0,!0)}}});var xe,Fu=T(()=>{qi();wo();Ao();xe=class{constructor(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof _e?this.uniformGroup=r:this.uniformGroup=new _e(r):this.uniformGroup=new _e({}),this.disposeRunner=new le("disposeShader")}checkUniformExists(t,r){if(r.uniforms[t])return!0;for(let i in r.uniforms){let s=r.uniforms[i];if(s.group&&this.checkUniformExists(t,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,r,i){let s=Ce.from(t,r);return new xe(s,i)}}});var tl,Xp=T(()=>{Be();wo();Fu();Ao();tl=class{constructor(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){let i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;this.defaultGroupCache[t]=_e.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${t}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ce(this.vertexSrc,s)}let r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Tt,default:this.defaultGroupCache[t]};return new xe(this.programCache[t],r)}generateSampleSrc(t){let r="";r+=`
`,r+=`
`;for(let i=0;i<t;i++)i>0&&(r+=`
else `),i<t-1&&(r+=`if(vTextureId < ${i}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}});var Ns,jp=T(()=>{Ns=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}});function Pv(){return!kr.apple.device}var Iv=T(()=>{Lt()});function Mv(e){let t=!0,r=B.ADAPTER.getNavigator();if(kr.tablet||kr.phone){if(kr.apple.device){let i=r.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(kr.android.device){let i=r.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?e:4}var Dv=T(()=>{Lt()});var Zr,Uu=T(()=>{Zr=class{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}});var Bv,Nv=T(()=>{Bv=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`});var Ov,Lv=T(()=>{Ov=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`});var Jr,Sr,Vp=T(()=>{Ss();bt();Nt();Lt();De();yp();xu();$a();Ki();Cp();Pp();Xp();jp();Iv();Dv();Uu();Nv();Lv();Jr=class extends Zr{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=xn,this.vertexSize=6,this.state=ge.for2d(),this.size=Jr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??Mv(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??Pv(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return yt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return Ov}static get defaultFragmentTemplate(){return Bv}setShaderGenerator({vertex:e=Jr.defaultVertexSrc,fragment:t=Jr.defaultFragmentTemplate}={}){this.shaderGenerator=new tl(e,t)}contextChange(){let e=this.renderer.gl;B.PREFER_ENV===br.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Jr.defaultMaxTextures),this.maxTextures=_u(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){let{_drawCallPool:e,_textureArrayPool:t}=Jr,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new Ps);for(;t.length<i;)t.push(new Ns);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){let{_bufferedTextures:e,maxTextures:t}=this,r=Jr._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,n=this.renderer.textureGC.count,a=++lt._globalBatch,h=0,u=r[0],d=0;i.copyBoundTextures(s,t);for(let f=0;f<this._bufferSize;++f){let m=e[f];e[f]=null,m._batchEnabled!==a&&(u.count>=t&&(i.boundArray(u,s,a,t),this.buildDrawCalls(u,d,f),d=f,u=r[++h],++a),m._batchEnabled=a,m.touched=n,u.elements[u.count++]=m)}u.count>0&&(i.boundArray(u,s,a,t),this.buildDrawCalls(u,d,this._bufferSize),++h,++a);for(let f=0;f<s.length;f++)s[f]=null;lt._globalBatch=a}buildDrawCalls(e,t,r){let{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:n,vertexSize:a}=this,h=Jr._drawCallPool,u=this._dcIndex,d=this._aIndex,f=this._iIndex,m=h[u];m.start=this._iIndex,m.texArray=e;for(let _=t;_<r;++_){let x=i[_],y=x._texture.baseTexture,b=za[y.alphaMode?1:0][x.blendMode];i[_]=null,t<_&&m.blend!==b&&(m.size=f-m.start,t=_,m=h[++u],m.texArray=e,m.start=f),this.packInterleavedGeometry(x,s,n,d,f),d+=x.vertexData.length/2*a,f+=x.indices.length,m.blend=b}t<r&&(m.size=f-m.start,++u),this._dcIndex=u,this._aIndex=d,this._iIndex=f}bindAndClearTexArray(e){let t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){let{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;Jr.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){let e=this._dcIndex,{gl:t,state:r}=this.renderer,i=Jr._drawCallPool,s=null;for(let n=0;n<e;n++){let{texArray:a,type:h,size:u,start:d,blend:f}=i[n];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=f,r.set(this.state),t.drawElements(h,u,t.UNSIGNED_SHORT,d*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Jr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){let t=As(Math.ceil(e/8)),r=ja(t),i=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new Rs(i*this.vertexSize*4)),s}getIndexBuffer(e){let t=As(Math.ceil(e/12)),r=ja(t),i=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,r,i,s){let{uint32View:n,float32View:a}=t,h=i/this.vertexSize,u=e.uvs,d=e.indices,f=e.vertexData,m=e._texture.baseTexture._batchLocation,_=Math.min(e.worldAlpha,1),x=xt.shared.setValue(e._tintRGB).toPremultiplied(_,e._texture.baseTexture.alphaMode>0);for(let y=0;y<f.length;y+=2)a[i++]=f[y],a[i++]=f[y+1],a[i++]=u[y],a[i++]=u[y+1],n[i++]=x,a[i++]=m;for(let y=0;y<d.length;y++)r[s++]=h+d[y]}},Sr=Jr;Sr.defaultBatchSize=4096;Sr.extension={name:"batch",type:N.RendererPlugin};Sr._drawCallPool=[];Sr._textureArrayPool=[];U.add(Sr)});var kv,Fv=T(()=>{kv=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`});var Uv,Gv=T(()=>{Uv=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`});var el,kt,rl=T(()=>{bt();wo();Fu();$a();Fv();Gv();el=class extends xe{constructor(e,t,r){let i=Ce.from(e||el.defaultVertexSrc,t||el.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=el.defaultResolution,this.multisample=el.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ge}apply(e,t,r,i,s){e.applyFilter(this,t,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return Uv}static get defaultFragmentSrc(){return kv}},kt=el;kt.defaultResolution=1;kt.defaultMultisample=Bt.NONE});var Qi,Gu=T(()=>{Ss();Nt();Qi=class{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new xt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;let{backgroundColor:r,background:i,backgroundAlpha:s}=t,n=i??r;n!==void 0&&(this.color=n),this.alpha=s}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}};Qi.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Qi.extension={type:[N.RendererSystem,N.CanvasRendererSystem],name:"background"};U.add(Qi)});var Co,Wp=T(()=>{Nt();Uu();Co=class{constructor(t){this.renderer=t,this.emptyRenderer=new Zr(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,r){let{boundTextures:i}=this.renderer.texture;for(let s=r-1;s>=0;--s)t[s]=i[s]||null,t[s]&&(t[s]._batchLocation=s)}boundArray(t,r,i,s){let{elements:n,ids:a,count:h}=t,u=0;for(let d=0;d<h;d++){let f=n[d],m=f._batchLocation;if(m>=0&&m<s&&r[m]===f){a[d]=m;continue}for(;u<s;){let _=r[u];if(_&&_._batchEnabled===i&&_._batchLocation===u){u++;continue}a[d]=u,f._batchLocation=u,r[u]=f;break}}}destroy(){this.renderer=null}};Co.extension={type:N.RendererSystem,name:"batch"};U.add(Co)});var Hv,Zi,Hu=T(()=>{bt();Nt();Lt();Hv=0,Zi=class{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Hv++}init(t){if(t.context)this.initFromContext(t.context);else{let r=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Hv++,this.renderer.runners.contextChange.emit(t);let r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){let r=this.createContext(this.renderer.view,t);this.initFromContext(r)}createContext(t,r){let i;if(B.PREFER_ENV>=br.WEBGL2&&(i=t.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){let{gl:t}=this,r={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){let t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){let r=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let s=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};Zi.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};Zi.extension={type:N.RendererSystem,name:"context"};U.add(Zi)});var zu,zv=T(()=>{bt();bo();zu=class extends dr{upload(t,r,i){let s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===fe.UNPACK);let n=r.realWidth,a=r.realHeight;return i.width===n&&i.height===a?s.texSubImage2D(r.target,0,0,0,n,a,r.format,i.type,this.data):(i.width=n,i.height=a,s.texImage2D(r.target,0,i.internalFormat,n,a,0,r.format,i.type,this.data)),!0}}});var Os,Xu=T(()=>{bt();qi();Ki();zv();Os=class{constructor(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new le("disposeFramebuffer"),this.multisample=Bt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,r){return this.colorTextures[t]=r||new lt(null,{scaleMode:Lr.NEAREST,resolution:1,mipmap:Me.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new lt(new zu(null,{width:this.width,height:this.height}),{scaleMode:Lr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Me.OFF,format:J.DEPTH_COMPONENT,type:at.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){let s=this.colorTextures[i],n=s.resolution;s.setSize(t/n,r/n)}if(this.depthTexture){let i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,r/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}});var An,ju=T(()=>{Ss();bt();Xu();Ki();An=class extends lt{constructor(t={}){if(typeof t=="number"){let r=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3];t={width:r,height:i,scaleMode:s,resolution:n}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Bt.NONE),super(null,t),this.mipmap=Me.OFF,this.valid=!0,this._clear=new xt([0,0,0,0]),this.framebuffer=new Os(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}});var Ne,Ls=T(()=>{bt();De();_n();Ne=class extends Er{constructor(t){let r=t,i=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;super(i,s),this.source=t,this.noSubImage=!1}static crossOrigin(t,r,i){i===void 0&&!r.startsWith("data:")?t.crossOrigin=gu(r):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,r,i,s){let n=t.gl,a=r.realWidth,h=r.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1&&s.buffered.length===0)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===fe.UNPACK),!this.noSubImage&&r.target===n.TEXTURE_2D&&i.width===a&&i.height===h?n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,i.type,s):(i.width=a,i.height=h,n.texImage2D(r.target,0,i.internalFormat,r.format,i.type,s)),!0}update(){if(this.destroyed)return;let t=this.source,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(r,i),super.update()}dispose(){this.source=null}}});var ks,il=T(()=>{bt();Lt();Ls();ks=class extends Ne{constructor(t,r){if(r=r||{},typeof t=="string"){let i=new Image;Ne.crossOrigin(i,t,r.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??B.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((r,i)=>{let s=this.source;this.url=s.src;let n=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.resize(s.width,s.height),this._load=null,this.createBitmap?r(this.process()):r(this))};s.complete&&s.src?n():(s.onload=n,s.onerror=a=>{i(a),this.onError.emit(a)})}),this._load)}process(){let t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);let r=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>r(s,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===fe.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,r,i){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,r,i,this.bitmap),!this.preserveBitmap){let s=!0,n=r._glTextures;for(let a in n){let h=n[a];if(h!==i&&h.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}});var Ro,$p=T(()=>{Be();Ro=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,r,i){let s=r.width,n=r.height;if(i){let a=t.width/2/s,h=t.height/2/n,u=t.x/s+a,d=t.y/n+h;i=Xt.add(i,Xt.NW),this.x0=u+a*Xt.uX(i),this.y0=d+h*Xt.uY(i),i=Xt.add(i,2),this.x1=u+a*Xt.uX(i),this.y1=d+h*Xt.uY(i),i=Xt.add(i,2),this.x2=u+a*Xt.uX(i),this.y2=d+h*Xt.uY(i),i=Xt.add(i,2),this.x3=u+a*Xt.uX(i),this.y3=d+h*Xt.uY(i)}else this.x0=t.x/s,this.y0=t.y/n,this.x1=(t.x+t.width)/s,this.y1=t.y/n,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/n,this.x3=t.x/s,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}});function Vu(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var Xv,$,Yp=T(()=>{Be();Lt();De();Ki();il();$p();Xv=new Ro;$=class extends Cs.default{constructor(t,r,i,s,n,a,h){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new ct(0,0,1,1)),t instanceof $&&(t=t.baseTexture),this.baseTexture=t,this._frame=r,this.trim=s,this.valid=!1,this._uvs=Xv,this.uvMatrix=null,this.orig=i||r,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new mt(a.x,a.y):new mt(0,0),this.defaultBorders=h,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=r:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){let{resource:r}=this.baseTexture;r?.url&&Ae[r.url]&&$.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,$.removeFromCache(this),this.textureCacheIds=null}clone(){let t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),i=new $(this.baseTexture,!this.noFrame&&t,r,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===Xv&&(this._uvs=new Ro),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,r={},i=B.STRICT_TEXTURE_CACHE){let s=typeof t=="string",n=null;if(s)n=t;else if(t instanceof lt){if(!t.cacheId){let h=r?.pixiIdPrefix||"pixiid";t.cacheId=`${h}-${Ei()}`,lt.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){let h=r?.pixiIdPrefix||"pixiid";t._pixiId=`${h}_${Ei()}`}n=t._pixiId}let a=Ae[n];if(s&&i&&!a)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!a&&!(t instanceof lt)?(r.resolution||(r.resolution=Wa(t)),a=new $(new lt(t,r)),a.baseTexture.cacheId=n,lt.addToCache(a.baseTexture,n),$.addToCache(a,n)):!a&&t instanceof lt&&(a=new $(t),$.addToCache(a,n)),a}static fromURL(t,r){let i=Object.assign({autoLoad:!1},r?.resourceOptions),s=$.from(t,Object.assign({resourceOptions:i},r),!1),n=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):n.load().then(()=>Promise.resolve(s))}static fromBuffer(t,r,i,s){return new $(lt.fromBuffer(t,r,i,s))}static fromLoader(t,r,i,s){let n=new lt(t,Object.assign({scaleMode:lt.defaultOptions.scaleMode,resolution:Wa(r)},s)),{resource:a}=n;a instanceof ks&&(a.url=r);let h=new $(n);return i||(i=r),lt.addToCache(h.baseTexture,i),$.addToCache(h,i),i!==r&&(lt.addToCache(h.baseTexture,r),$.addToCache(h,r)),h.baseTexture.valid?Promise.resolve(h):new Promise(u=>{h.baseTexture.once("loaded",()=>u(h))})}static addToCache(t,r){r&&(t.textureCacheIds.includes(r)||t.textureCacheIds.push(r),Ae[r]&&Ae[r]!==t&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),Ae[r]=t)}static removeFromCache(t){if(typeof t=="string"){let r=Ae[t];if(r){let i=r.textureCacheIds.indexOf(t);return i>-1&&r.textureCacheIds.splice(i,1),delete Ae[t],r}}else if(t?.textureCacheIds){for(let r=0;r<t.textureCacheIds.length;++r)Ae[t.textureCacheIds[r]]===t&&delete Ae[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;let{x:r,y:i,width:s,height:n}=t,a=r+s>this.baseTexture.width,h=i+n>this.baseTexture.height;if(a||h){let u=a&&h?"and":"or",d=`X: ${r} + ${s} = ${r+s} > ${this.baseTexture.width}`,f=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${d} ${u} ${f}`)}this.valid=s&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return $._EMPTY||($._EMPTY=new $(new lt),Vu($._EMPTY),Vu($._EMPTY.baseTexture)),$._EMPTY}static get WHITE(){if(!$._WHITE){let t=B.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),$._WHITE=new $(lt.from(t)),Vu($._WHITE),Vu($._WHITE.baseTexture)}return $._WHITE}}});var fr,Wu=T(()=>{Yp();ju();fr=class extends ${constructor(t,r){super(t,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,r,i=!0){let s=this.baseTexture.resolution,n=Math.round(t*s)/s,a=Math.round(r*s)/s;this.valid=n>0&&a>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=a,i&&this.baseTexture.resize(n,a),this.updateUvs()}setResolution(t){let{baseTexture:r}=this;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))}static create(t){return new fr(new An(t))}}});var Po,qp=T(()=>{bt();De();ju();Wu();Po=class{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,r,i=Bt.NONE){let s=new An(Object.assign({width:t,height:r,resolution:1,multisample:i},this.textureOptions));return new fr(s)}getOptimalTexture(t,r,i=1,s=Bt.NONE){let n;t=Math.ceil(t*i-1e-6),r=Math.ceil(r*i-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=As(t),r=As(r),n=((t&65535)<<16|r&65535)>>>0,s>1&&(n+=s*4294967296)):n=s>1?-s:-1,this.texturePool[n]||(this.texturePool[n]=[]);let a=this.texturePool[n].pop();return a||(a=this.createTexture(t,r,s)),a.filterPoolKey=n,a.setResolution(i),a}getFilterTexture(t,r,i){let s=this.getOptimalTexture(t.width,t.height,r||t.resolution,i||Bt.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){let r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(let r in this.texturePool){let i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(let r in this.texturePool){if(!(Number(r)<0))continue;let i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}};Po.SCREEN_KEY=-1});var sl,Kp=T(()=>{Ya();sl=class extends je{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}});var Cn,Qp=T(()=>{Eo();Ya();Cn=class extends je{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Dt(this.vertices),this.uvBuffer=new Dt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,r){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+r.width/t.width,this.uvs[3]=s,this.uvs[4]=i+r.width/t.width,this.uvs[5]=s+r.height/t.height,this.uvs[6]=i,this.uvs[7]=s+r.height/t.height,i=r.x,s=r.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+r.width,this.vertices[3]=s,this.vertices[4]=i+r.width,this.vertices[5]=s+r.height,this.vertices[6]=i,this.vertices[7]=s+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}});var nl,Zp=T(()=>{bt();Be();nl=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Bt.NONE,this.sourceFrame=new ct,this.destinationFrame=new ct,this.bindingSourceFrame=new ct,this.bindingDestinationFrame=new ct,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}});var $u,Jp,Io,tm=T(()=>{bt();Nt();Be();qp();Ao();Kp();Qp();Zp();$u=[new mt,new mt,new mt,new mt],Jp=new Tt,Io=class{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Po,this.statePool=[],this.quad=new sl,this.quadUv=new Cn,this.tempRect=new ct,this.activeState={},this.globalUniforms=new _e({outputFrame:new ct,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,r){let i=this.renderer,s=this.defaultFilterStack,n=this.statePool.pop()||new nl,a=this.renderer.renderTexture,h=r[0].resolution,u=r[0].multisample,d=r[0].padding,f=r[0].autoFit,m=r[0].legacy??!0;for(let y=1;y<r.length;y++){let b=r[y];h=Math.min(h,b.resolution),u=Math.min(u,b.multisample),d=this.useMaxPadding?Math.max(d,b.padding):d+b.padding,f=f&&b.autoFit,m=m||(b.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),s.push(n),n.resolution=h,n.multisample=u,n.legacy=m,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(d);let _=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(Jp.copyFrom(i.projection.transform).invert(),_),f?(n.sourceFrame.fit(_),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(_)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,h,u),n.filters=r,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;let x=this.tempRect;x.x=0,x.y=0,x.width=n.sourceFrame.width,x.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(a.sourceFrame),n.bindingDestinationFrame.copyFrom(a.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,a.bind(n.renderTexture,n.sourceFrame,x),i.framebuffer.clear(0,0,0,0)}pop(){let t=this.defaultFilterStack,r=t.pop(),i=r.filters;this.activeState=r;let s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;let n=s.inputSize,a=s.inputPixel,h=s.inputClamp;if(n[0]=r.destinationFrame.width,n[1]=r.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],a[0]=Math.round(n[0]*r.resolution),a[1]=Math.round(n[1]*r.resolution),a[2]=1/a[0],a[3]=1/a[1],h[0]=.5*a[2],h[1]=.5*a[3],h[2]=r.sourceFrame.width*n[2]-.5*a[2],h[3]=r.sourceFrame.height*n[3]-.5*a[3],r.legacy){let d=s.filterArea;d[0]=r.destinationFrame.width,d[1]=r.destinationFrame.height,d[2]=r.sourceFrame.x,d[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();let u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,u.renderTexture,Tr.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let d=r.renderTexture,f=this.getOptimalFilterTexture(d.width,d.height,r.resolution);f.filterFrame=d.filterFrame;let m=0;for(m=0;m<i.length-1;++m){m===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(d.width,d.height,r.resolution),f.filterFrame=d.filterFrame),i[m].apply(this,d,f,Tr.CLEAR,r);let _=d;d=f,f=_}i[m].apply(this,d,u.renderTexture,Tr.BLEND,r),m>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(d),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)}bindAndClear(t,r=Tr.CLEAR){let{renderTexture:i,state:s}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){let a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,i.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);let n=s.stateId&1||this.forceClear;(r===Tr.CLEAR||r===Tr.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,r,i,s){let n=this.renderer;n.state.set(t.state),this.bindAndClear(i,s),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(ze.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(ze.TRIANGLE_STRIP))}calculateSpriteMatrix(t,r){let{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:n}=r._texture,a=t.set(s.width,0,0,s.height,i.x,i.y),h=r.worldTransform.copyTo(Tt.TEMP_MATRIX);return h.invert(),a.prepend(h),a.scale(1/n.width,1/n.height),a.translate(r.anchor.x,r.anchor.y),a}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,r,i=1,s=Bt.NONE){return this.texturePool.getOptimalTexture(t,r,i,s)}getFilterTexture(t,r,i){if(typeof t=="number"){let n=t;t=r,r=n}t=t||this.activeState.renderTexture;let s=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,i||Bt.NONE);return s.filterFrame=t.filterFrame,s}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,r){let i=$u[0],s=$u[1],n=$u[2],a=$u[3];i.set(r.left,r.top),s.set(r.left,r.bottom),n.set(r.right,r.top),a.set(r.right,r.bottom),t.apply(i,i),t.apply(s,s),t.apply(n,n),t.apply(a,a);let h=Math.min(i.x,s.x,n.x,a.x),u=Math.min(i.y,s.y,n.y,a.y),d=Math.max(i.x,s.x,n.x,a.x),f=Math.max(i.y,s.y,n.y,a.y);r.x=h,r.y=u,r.width=d-h,r.height=f-u}roundFrame(t,r,i,s,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){let{a,b:h,c:u,d}=n;if((Math.abs(h)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(d)>1e-4))return}n=n?Jp.copyFrom(n):Jp.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(n,t),t.ceil(r),this.transformAABB(n.invert(),t)}}};Io.extension={type:N.RendererSystem,name:"filter"};U.add(Io)});var ol,em=T(()=>{bt();ol=class{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Bt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}});var mA,Mo,rm=T(()=>{bt();Nt();Be();Lt();Xu();em();mA=new ct,Mo=class{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Os(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);let t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ct,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;B.PREFER_ENV===br.WEBGL_LEGACY&&(r=null,i=null),r?t.drawBuffers=s=>r.drawBuffersWEBGL(s):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,r,i=0){let{gl:s}=this;if(t){let n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let a=0;a<t.colorTextures.length;a++){let h=t.colorTextures[a];this.renderer.texture.unbind(h.parentTextureArray||h)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){let a=r.width>>i,h=r.height>>i,u=a/r.width;this.setViewport(r.x*u,r.y*u,a,h)}else{let a=t.width>>i,h=t.height>>i;this.setViewport(0,0,a,h)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,r,i,s){let n=this.viewport;t=Math.round(t),r=Math.round(r),i=Math.round(i),s=Math.round(s),(n.width!==i||n.height!==s||n.x!==t||n.y!==r)&&(n.x=t,n.y=r,n.width=i,n.height=s,this.gl.viewport(t,r,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,r,i,s,n=Qh.COLOR|Qh.DEPTH){let{gl:a}=this;a.clearColor(t,r,i,s),a.clear(n)}initFramebuffer(t){let{gl:r}=this,i=new ol(r.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){let{gl:r}=this,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));let s=t.colorTextures,n=s.length;r.drawBuffers||(n=Math.min(n,1));for(let a=0;a<n;a++){let h=s[a],u=h.parentTextureArray||h;this.renderer.texture.bind(u,0),a===0&&i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,r){let{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures,a=n.length;i.drawBuffers||(a=Math.min(a,1)),s.multisample>1&&this.canMultisampleFramebuffer(t)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));let h=[];for(let u=0;u<a;u++){let d=n[u],f=d.parentTextureArray||d;this.renderer.texture.bind(f,0),u===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+u,d.target,f._glTextures[this.CONTEXT_UID].texture,r),h.push(i.COLOR_ATTACHMENT0+u))}if(h.length>1&&i.drawBuffers(h),t.depthTexture&&this.writeDepthTexture){let d=t.depthTexture;this.renderer.texture.bind(d,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,r)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(s.stencil=s.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s.stencil)):s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){let{msaaSamples:r}=this,i=Bt.NONE;if(t<=1||r===null)return i;for(let s=0;s<r.length;s++)if(r[s]<=t){i=r[s];break}return i===1&&(i=Bt.NONE),i}blit(t,r,i){let{current:s,renderer:n,gl:a,CONTEXT_UID:h}=this;if(n.context.webGLVersion!==2||!s)return;let u=s.glFramebuffers[h];if(!u)return;if(!t){if(!u.msaaBuffer)return;let f=s.colorTextures[0];if(!f)return;u.blitFramebuffer||(u.blitFramebuffer=new Os(s.width,s.height),u.blitFramebuffer.addColorTexture(0,f)),t=u.blitFramebuffer,t.colorTextures[0]!==f&&(t.colorTextures[0]=f,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}r||(r=mA,r.width=s.width,r.height=s.height),i||(i=r);let d=r.width===i.width&&r.height===i.height;this.bind(t),a.bindFramebuffer(a.READ_FRAMEBUFFER,u.framebuffer),a.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,a.COLOR_BUFFER_BIT,d?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,r){let i=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];let n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),r||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,r)}disposeAll(t){let r=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<r.length;i++)this.disposeFramebuffer(r[i],t)}forceStencil(){let t=this.current;if(!t)return;let r=t.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;t.stencil=!0;let i=t.width,s=t.height,n=this.gl,a=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,a),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,i,s):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,s),r.stencil=a,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,a)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ct}destroy(){this.renderer=null}};Mo.extension={type:N.RendererSystem,name:"framebuffer"};U.add(Mo)});var im,Do,sm=T(()=>{bt();Nt();Lt();im={5126:4,5123:2,5121:1},Do=class{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);let t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;B.PREFER_ENV===br.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=s=>i.bindVertexArrayOES(s),t.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){let i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(s,n)=>i.vertexAttribDivisorANGLE(s,n),t.drawElementsInstanced=(s,n,a,h,u)=>i.drawElementsInstancedANGLE(s,n,a,h,u),t.drawArraysInstanced=(s,n,a,h)=>i.drawArraysInstancedANGLE(s,n,a,h)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(t,r){r=r||this.renderer.shader.shader;let{gl:i}=this,s=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},n=!0);let a=s[r.program.id]||this.initGeometryVao(t,r,n);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){let t=this._activeGeometry,r=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){let s=t.buffers[i];r.update(s)}}checkCompatibility(t,r){let i=t.attributes,s=r.attributeData;for(let n in s)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(t,r){let i=t.attributes,s=r.attributeData,n=["g",t.id];for(let a in i)s[a]&&n.push(a,s[a].location);return n.join("-")}initGeometryVao(t,r,i=!0){let s=this.gl,n=this.CONTEXT_UID,a=this.renderer.buffer,h=r.program;h.glPrograms[n]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,h);let u=this.getSignature(t,h),d=t.glVertexArrayObjects[this.CONTEXT_UID],f=d[u];if(f)return d[h.id]=f,f;let m=t.buffers,_=t.attributes,x={},y={};for(let b in m)x[b]=0,y[b]=0;for(let b in _)!_[b].size&&h.attributeData[b]?_[b].size=h.attributeData[b].size:_[b].size||console.warn(`PIXI Geometry attribute '${b}' size cannot be determined (likely the bound shader does not have the attribute)`),x[_[b].buffer]+=_[b].size*im[_[b].type];for(let b in _){let S=_[b],C=S.size;S.stride===void 0&&(x[S.buffer]===C*im[S.type]?S.stride=0:S.stride=x[S.buffer]),S.start===void 0&&(S.start=y[S.buffer],y[S.buffer]+=C*im[S.type])}f=s.createVertexArray(),s.bindVertexArray(f);for(let b=0;b<m.length;b++){let S=m[b];a.bind(S),i&&S._glBuffers[n].refCount++}return this.activateVao(t,h),d[h.id]=f,d[u]=f,s.bindVertexArray(null),a.unbind(cr.ARRAY_BUFFER),f}disposeGeometry(t,r){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];let i=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,n=t.buffers,a=this.renderer?.buffer;if(t.disposeRunner.remove(this),!!i){if(a)for(let h=0;h<n.length;h++){let u=n[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&a.dispose(n[h],r))}if(!r){for(let h in i)if(h[0]==="g"){let u=i[h];this._activeVao===u&&this.unbind(),s.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){let r=Object.keys(this.managedGeometries);for(let i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],t)}activateVao(t,r){let i=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,a=t.buffers,h=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let u=null;for(let d in h){let f=h[d],m=a[f.buffer],_=m._glBuffers[s];if(r.attributeData[d]){u!==_&&(n.bind(m),u=_);let x=r.attributeData[d].location;if(i.enableVertexAttribArray(x),i.vertexAttribPointer(x,f.size,f.type||i.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)i.vertexAttribDivisor(x,f.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,r,i,s){let{gl:n}=this,a=this._activeGeometry;if(a.indexBuffer){let h=a.indexBuffer.data.BYTES_PER_ELEMENT,u=h===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;h===2||h===4&&this.canUseUInt32ElementIndex?a.instanced?n.drawElementsInstanced(t,r||a.indexBuffer.data.length,u,(i||0)*h,s||1):n.drawElements(t,r||a.indexBuffer.data.length,u,(i||0)*h):console.warn("unsupported index buffer type: uint32")}else a.instanced?n.drawArraysInstanced(t,i,r||a.getSize(),s||1):n.drawArrays(t,i,r||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};Do.extension={type:N.RendererSystem,name:"geometry"};U.add(Do)});var jv,Ji,nm=T(()=>{Be();jv=new Tt,Ji=class{constructor(t,r){this._texture=t,this.mapCoord=new Tt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,r){r===void 0&&(r=t);let i=this.mapCoord;for(let s=0;s<t.length;s+=2){let n=t[s],a=t[s+1];r[s]=n*i.a+a*i.c+i.tx,r[s+1]=n*i.b+a*i.d+i.ty}return r}update(t){let r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;let i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);let s=r.orig,n=r.trim;n&&(jv.set(s.width/n.width,0,0,s.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(jv));let a=r.baseTexture,h=this.uClampFrame,u=this.clampMargin/a.resolution,d=this.clampOffset;return h[0]=(r._frame.x+u+d)/a.width,h[1]=(r._frame.y+u+d)/a.height,h[2]=(r._frame.x+r._frame.width-u+d)/a.width,h[3]=(r._frame.y+r._frame.height-u+d)/a.height,this.uClampOffset[0]=d/a.realWidth,this.uClampOffset[1]=d/a.realHeight,this.isSimple=r._frame.width===a.width&&r._frame.height===a.height&&r.rotate===0,!0}}});var Vv,Wv=T(()=>{Vv=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`});var $v,Yv=T(()=>{$v=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`});var al,om=T(()=>{Be();nm();rl();Wv();Yv();al=class extends kt{constructor(t,r,i){let s=null;typeof t!="string"&&r===void 0&&i===void 0&&(s=t,t=void 0,r=void 0,i=void 0),super(t||$v,r||Vv,i),this.maskSprite=s,this.maskMatrix=new Tt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,r,i,s){let n=this._maskSprite,a=n._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new Ji(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,r,i,s))}}});var ll,am=T(()=>{bt();rl();ll=class{constructor(t=null){this.type=re.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=kt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=re.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}});var Bo,lm=T(()=>{bt();Nt();om();am();Bo=class{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,r){let i=r;if(!i.isMaskData){let n=this.maskDataPool.pop()||new ll;n.pooled=!0,n.maskObject=r,i=n}let s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==re.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case re.SCISSOR:this.renderer.scissor.push(i);break;case re.STENCIL:this.renderer.stencil.push(i);break;case re.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case re.COLOR:this.pushColorMask(i);break;default:break}i.type===re.SPRITE&&this.maskStack.push(i)}pop(t){let r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case re.SCISSOR:this.renderer.scissor.pop(r);break;case re.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case re.SPRITE:this.popSpriteMask(r);break;case re.COLOR:this.popColorMask(r);break;default:break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){let i=this.maskStack[this.maskStack.length-1];i.type===re.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){let r=t.maskObject;r?r.isSprite?t.type=re.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=re.SCISSOR:t.type=re.STENCIL:t.type=re.COLOR}pushSpriteMask(t){let{maskObject:r}=t,i=t._target,s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new al]));let n=this.renderer,a=n.renderTexture,h,u;if(a.current){let f=a.current;h=t.resolution||f.resolution,u=t.multisample??f.multisample}else h=t.resolution||n.resolution,u=t.multisample??n.multisample;s[0].resolution=h,s[0].multisample=u,s[0].maskSprite=r;let d=i.filterArea;i.filterArea=r.getBounds(!0),n.filter.push(i,s),i.filterArea=d,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){let r=t._colorMask,i=t._colorMask=r&t.colorMask;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){let r=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}};Bo.extension={type:N.RendererSystem,name:"mask"};U.add(Bo)});var No,hm=T(()=>{No=class{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){let{gl:r}=this.renderer,i=this.getStackLength();this.maskStack=t;let s=this.getStackLength();s!==i&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}});var qv,Kv,Yu,qu,um=T(()=>{Nt();Be();Lt();hm();qv=new Tt,Kv=[],Yu=class extends No{constructor(e){super(e),this.glConst=B.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){let e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;let t=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,s=i.renderTexture,n=r.getBounds(!0,Kv.pop()??new ct);this.roundFrameToPixels(n,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&n.fit(t),e._scissorRectLocal=n}static isMatrixRotated(e){if(!e)return!1;let{a:t,b:r,c:i,d:s}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){let{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Yu.isMatrixRotated(t.worldTransform)||Yu.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);let r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,i,s){Yu.isMatrixRotated(s)||(s=s?qv.copyFrom(s):qv.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);let{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){let{gl:t}=this.renderer;e&&Kv.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){let e=this.maskStack[this.maskStack.length-1]._scissorRect,t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}},qu=Yu;qu.extension={type:N.RendererSystem,name:"scissor"};U.add(qu)});var Oo,cm=T(()=>{Nt();Lt();hm();Oo=class extends No{constructor(t){super(t),this.glConst=B.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){let t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){let r=t.maskObject,{gl:i}=this.renderer,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;let n=t._colorMask;n!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,n!==0&&(t._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(t){let r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{let i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){let t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}};Oo.extension={type:N.RendererSystem,name:"stencil"};U.add(Oo)});var Lo,dm=T(()=>{Nt();De();Lo=class{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){let t=this.rendererPlugins;for(let r in t)this.plugins[r]=new t[r](this.renderer)}destroy(){for(let t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}};Lo.extension={type:[N.RendererSystem,N.CanvasRendererSystem],name:"_plugin"};U.add(Lo)});var ko,fm=T(()=>{Nt();Be();ko=class{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Tt,this.transform=null}update(t,r,i,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);let n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,r,i,s){let n=this.projectionMatrix,a=s?-1:1;n.identity(),n.a=1/r.width*2,n.d=a*(1/r.height*2),n.tx=-1-r.x*n.a,n.ty=-a-r.y*n.d}setTransform(t){}destroy(){this.renderer=null}};ko.extension={type:N.RendererSystem,name:"projection"};U.add(ko)});var gA,Fo,pm=T(()=>{Nt();Be();Wu();gA=new Bs,Fo=class{constructor(t){this.renderer=t,this._tempMatrix=new Tt}generateTexture(t,r){let{region:i,...s}=r||{},n=i||t.getLocalBounds(null,!0);n.width===0&&(n.width=1),n.height===0&&(n.height=1);let a=fr.create({width:n.width,height:n.height,...s});this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;let h=t.transform;return t.transform=gA,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=h,a}destroy(){}};Fo.extension={type:[N.RendererSystem,N.CanvasRendererSystem],name:"textureGenerator"};U.add(Fo)});var Rn,hl,Uo,mm=T(()=>{Ss();Nt();Be();Rn=new ct,hl=new ct,Uo=class{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ct,this.destinationFrame=new ct,this.viewportFrame=new ct}contextChange(){let t=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,r,i){let s=this.renderer;this.current=t;let n,a,h;t?(n=t.baseTexture,h=n.resolution,r||(Rn.width=t.frame.width,Rn.height=t.frame.height,r=Rn),i||(hl.x=t.frame.x,hl.y=t.frame.y,hl.width=r.width,hl.height=r.height,i=hl),a=n.framebuffer):(h=s.resolution,r||(Rn.width=s._view.screen.width,Rn.height=s._view.screen.height,r=Rn),i||(i=Rn,i.width=r.width,i.height=r.height));let u=this.viewportFrame;u.x=i.x*h,u.y=i.y*h,u.width=i.width*h,u.height=i.height*h,t||(u.y=s.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(a,u),this.renderer.projection.update(i,r,h,!a),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)}clear(t,r){let i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=xt.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);let n=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,h=n.width!==a.width||n.height!==a.height;if(h){let{x:u,y:d,width:f,height:m}=this.viewportFrame;u=Math.round(u),d=Math.round(d),f=Math.round(f),m=Math.round(m),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,d,f,m)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,r),h&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};Uo.extension={type:N.RendererSystem,name:"renderTexture"};U.add(Uo)});var ul,gm=T(()=>{ul=class{constructor(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}});function Qv(e,t){let r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){let n=t.getActiveAttrib(e,s);if(n.name.startsWith("gl_"))continue;let a=Za(t,n.type),h={type:a,name:n.name,size:Qa(a),location:t.getAttribLocation(e,n.name)};r[n.name]=h}return r}var Zv=T(()=>{Iu();Du()});function Jv(e,t){let r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){let n=t.getActiveUniform(e,s),a=n.name.replace(/\[.*?\]$/,""),h=!!n.name.match(/\[.*?\]$/),u=Za(t,n.type);r[a]={name:a,index:s,type:u,size:n.size,isArray:h,value:qa(u,n.size)}}return r}var ty=T(()=>{wu();Du()});function _m(e,t){let r=Su(e,e.VERTEX_SHADER,t.vertexSrc),i=Su(e,e.FRAGMENT_SHADER,t.fragmentSrc),s=e.createProgram();e.attachShader(s,r),e.attachShader(s,i);let n=t.extra?.transformFeedbackVaryings;if(n&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(s,n.names,n.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||Gp(e,s,r,i),t.attributeData=Qv(s,e),t.uniformData=Jv(s,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){let u=Object.keys(t.attributeData);u.sort((d,f)=>d>f?1:-1);for(let d=0;d<u.length;d++)t.attributeData[u[d]].location=d,e.bindAttribLocation(s,d,u[d]);e.linkProgram(s)}e.deleteShader(r),e.deleteShader(i);let a={};for(let u in t.uniformData){let d=t.uniformData[u];a[u]={location:e.getUniformLocation(s,u),value:qa(d.type,d.size)}}return new ul(s,a)}var xm=T(()=>{gm();Np();wu();Zv();ty();Hp()});function _A(e,t,r,i,s){r.buffer.update(s)}function ry(e){let t=e.map(n=>({data:n,offset:0,dataLen:0,dirty:0})),r=0,i=0,s=0;for(let n=0;n<t.length;n++){let a=t[n];if(r=ey[a.data.type],a.data.size>1&&(r=Math.max(r,16)*a.data.size),a.dataLen=r,i%r!==0&&i<16){let h=i%r%16;i+=h,s+=h}i+r>16?(s=Math.ceil(s/16)*16,a.offset=s,s+=r,i=r):(a.offset=s,i+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:t,size:s}}function iy(e,t){let r=[];for(let i in e)t[i]&&r.push(t[i]);return r.sort((i,s)=>i.index-s.index),r}function vm(e,t){if(!e.autoManage)return{size:0,syncFunc:_A};let r=iy(e.uniforms,t),{uboElements:i,size:s}=ry(r),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let a=0;a<i.length;a++){let h=i[a],u=e.uniforms[h.data.name],d=h.data.name,f=!1;for(let m=0;m<Si.length;m++){let _=Si[m];if(_.codeUbo&&_.test(h.data,u)){n.push(`offset = ${h.offset/4};`,Si[m].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){let m=Qa(h.data.type),_=Math.max(ey[h.data.type]/16,1),x=m/_,y=(4-x%4)%4;n.push(`
                cv = ud.${d}.value;
                v = uv.${d};
                offset = ${h.offset/4};

                t = 0;

                for(var i=0; i < ${h.data.size*_}; i++)
                {
                    for(var j = 0; j < ${x}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${y};
                }

                `)}else{let m=xA[h.data.type];n.push(`
                cv = ud.${d}.value;
                v = uv.${d};
                offset = ${h.offset/4};
                ${m};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}var xA,ey,ym=T(()=>{Lu();Ka();Iu();xA={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},ey={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4}});var vA,Ku,Go,bm=T(()=>{Nt();Lu();xm();ym();Ou();kp();vA=0,Ku={textureCount:0,uboCount:0},Go=class{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=vA++}systemCheck(){if(!Nu())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,r){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;let i=t.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),r||(Ku.textureCount=0,Ku.uboCount=0,this.syncUniformGroup(t.uniformGroup,Ku)),s}setUniforms(t){let r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,r){let i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,r))}syncUniforms(t,r,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(r.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){let r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=Lp(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,r){let i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;let s=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,r);t.buffer.update(),s(i.uniformData,t.uniforms,this.renderer,Ku,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[r])}createSyncBufferGroup(t,r,i){let{gl:s}=this.renderer;this.renderer.buffer.bind(t.buffer);let n=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;let a=this.getSignature(t,this.shader.program.uniformData,"ubo"),h=this._uboCache[a];if(h||(h=this._uboCache[a]=vm(t,this.shader.program.uniformData)),t.autoManage){let u=new Float32Array(h.size/4);t.buffer.update(u)}return r.uniformGroups[t.id]=h.syncFunc,r.uniformGroups[t.id]}getSignature(t,r,i){let s=t.uniforms,n=[`${i}-`];for(let a in s)n.push(a),r[a]&&n.push(r[a].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){let r=this.gl,i=t.program,s=_m(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};Go.extension={type:N.RendererSystem,name:"shader"};U.add(Go)});var ts,Qu=T(()=>{Nt();ts=class{constructor(t){this.renderer=t}run(t){let{renderer:r}=this;r.runners.init.emit(r.options),t.hello&&console.log(`PixiJS 7.2.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}};ts.defaultOptions={hello:!1};ts.extension={type:[N.RendererSystem,N.CanvasRendererSystem],name:"startup"};U.add(ts)});function sy(e,t=[]){return t[pt.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.ADD]=[e.ONE,e.ONE],t[pt.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.NONE]=[0,0],t[pt.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[pt.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[pt.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[pt.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[pt.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[pt.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[pt.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[pt.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[pt.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[pt.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[pt.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}var ny=T(()=>{bt()});var yA,bA,TA,EA,SA,wA,Tm,Zu,Em=T(()=>{bt();Nt();$a();ny();yA=0,bA=1,TA=2,EA=3,SA=4,wA=5,Tm=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=pt.NONE,this._blendEq=!1,this.map=[],this.map[yA]=this.setBlend,this.map[bA]=this.setOffset,this.map[TA]=this.setCullFace,this.map[EA]=this.setDepthTest,this.map[SA]=this.setFrontFace,this.map[wA]=this.setDepthMask,this.checks=[],this.defaultState=new ge,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=sy(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Tm.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Tm.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;let t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){let r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}},Zu=Tm;Zu.extension={type:N.RendererSystem,name:"state"};U.add(Zu)});var Ho,Ju=T(()=>{qi();De();Ho=class extends Cs.default{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);let r=(t.priority??[]).filter(s=>t.systems[s]),i=[...r,...Object.keys(t.systems).filter(s=>!r.includes(s))];for(let s of i)this.addSystem(t.systems[s],s)}addRunners(...t){t.forEach(r=>{this.runners[r]=new le(r)})}addSystem(t,r){let i=new t(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=i,this._systemsHash[r]=i;for(let s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(t,r){let i=Object.keys(this._systemsHash);t.items.forEach(s=>{let n=i.find(a=>this._systemsHash[a]===s);s[t.name](r[n])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}});var tc,pr,ec=T(()=>{bt();Nt();tc=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=tc.defaultMaxIdle,this.checkCountMax=tc.defaultCheckCountMax,this.mode=tc.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Jh.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this.renderer.texture,t=e.managedTextures,r=!1;for(let i=0;i<t.length;i++){let s=t[i];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){let t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}},pr=tc;pr.defaultMode=Jh.AUTO;pr.defaultMaxIdle=60*60;pr.defaultCheckCountMax=60*10;pr.extension={type:N.RendererSystem,name:"textureGC"};U.add(pr)});var Pn,Sm=T(()=>{bt();Pn=class{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=at.UNSIGNED_BYTE,this.internalFormat=J.RGBA,this.samplerType=0}}});function oy(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[at.UNSIGNED_BYTE]:{[J.RGBA]:e.RGBA8,[J.RGB]:e.RGB8,[J.RG]:e.RG8,[J.RED]:e.R8,[J.RGBA_INTEGER]:e.RGBA8UI,[J.RGB_INTEGER]:e.RGB8UI,[J.RG_INTEGER]:e.RG8UI,[J.RED_INTEGER]:e.R8UI,[J.ALPHA]:e.ALPHA,[J.LUMINANCE]:e.LUMINANCE,[J.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[at.BYTE]:{[J.RGBA]:e.RGBA8_SNORM,[J.RGB]:e.RGB8_SNORM,[J.RG]:e.RG8_SNORM,[J.RED]:e.R8_SNORM,[J.RGBA_INTEGER]:e.RGBA8I,[J.RGB_INTEGER]:e.RGB8I,[J.RG_INTEGER]:e.RG8I,[J.RED_INTEGER]:e.R8I},[at.UNSIGNED_SHORT]:{[J.RGBA_INTEGER]:e.RGBA16UI,[J.RGB_INTEGER]:e.RGB16UI,[J.RG_INTEGER]:e.RG16UI,[J.RED_INTEGER]:e.R16UI,[J.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[at.SHORT]:{[J.RGBA_INTEGER]:e.RGBA16I,[J.RGB_INTEGER]:e.RGB16I,[J.RG_INTEGER]:e.RG16I,[J.RED_INTEGER]:e.R16I},[at.UNSIGNED_INT]:{[J.RGBA_INTEGER]:e.RGBA32UI,[J.RGB_INTEGER]:e.RGB32UI,[J.RG_INTEGER]:e.RG32UI,[J.RED_INTEGER]:e.R32UI,[J.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[at.INT]:{[J.RGBA_INTEGER]:e.RGBA32I,[J.RGB_INTEGER]:e.RGB32I,[J.RG_INTEGER]:e.RG32I,[J.RED_INTEGER]:e.R32I},[at.FLOAT]:{[J.RGBA]:e.RGBA32F,[J.RGB]:e.RGB32F,[J.RG]:e.RG32F,[J.RED]:e.R32F,[J.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[at.HALF_FLOAT]:{[J.RGBA]:e.RGBA16F,[J.RGB]:e.RGB16F,[J.RG]:e.RG16F,[J.RED]:e.R16F},[at.UNSIGNED_SHORT_5_6_5]:{[J.RGB]:e.RGB565},[at.UNSIGNED_SHORT_4_4_4_4]:{[J.RGBA]:e.RGBA4},[at.UNSIGNED_SHORT_5_5_5_1]:{[J.RGBA]:e.RGB5_A1},[at.UNSIGNED_INT_2_10_10_10_REV]:{[J.RGBA]:e.RGB10_A2,[J.RGBA_INTEGER]:e.RGB10_A2UI},[at.UNSIGNED_INT_10F_11F_11F_REV]:{[J.RGB]:e.R11F_G11F_B10F},[at.UNSIGNED_INT_5_9_9_9_REV]:{[J.RGB]:e.RGB9_E5},[at.UNSIGNED_INT_24_8]:{[J.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[at.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[J.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[at.UNSIGNED_BYTE]:{[J.RGBA]:e.RGBA,[J.RGB]:e.RGB,[J.ALPHA]:e.ALPHA,[J.LUMINANCE]:e.LUMINANCE,[J.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[at.UNSIGNED_SHORT_5_6_5]:{[J.RGB]:e.RGB},[at.UNSIGNED_SHORT_4_4_4_4]:{[J.RGBA]:e.RGBA},[at.UNSIGNED_SHORT_5_5_5_1]:{[J.RGBA]:e.RGBA}},t}var ay=T(()=>{bt()});var zo,wm=T(()=>{bt();Nt();De();Ki();Sm();ay();zo=class{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new lt,this.hasIntegerTextures=!1}contextChange(){let t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=oy(t);let r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let s=0;s<r;s++)this.boundTextures[s]=null;this.emptyTextures={};let i=new Pn(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Pn(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(t,r=0){let{gl:i}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;let s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(t)):s.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){let{gl:r,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===t&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(t.target,this.emptyTextures[t.target].texture),i[s]=null)}ensureSamplerType(t){let{boundTextures:r,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let n=t-1;n>=0;--n){let a=r[n];a&&a._glTextures[s].samplerType!==Zh.FLOAT&&this.renderer.texture.unbind(a)}}initTexture(t){let r=new Pn(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r}initTextureType(t,r){r.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,this.webGLVersion===2&&t.type===at.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type}updateTexture(t){let r=t._glTextures[this.CONTEXT_UID];if(!r)return;let i=this.renderer;if(this.initTextureType(t,r),t.resource?.upload(i,t,r))r.samplerType!==Zh.FLOAT&&(this.hasIntegerTextures=!0);else{let s=t.realWidth,n=t.realHeight,a=i.gl;(r.width!==s||r.height!==n||r.dirtyId<0)&&(r.width=s,r.height=n,a.texImage2D(t.target,0,r.internalFormat,s,n,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}destroyTexture(t,r){let{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){let s=this.managedTextures.indexOf(t);s!==-1&&du(this.managedTextures,s,1)}}updateTextureStyle(t){let r=t._glTextures[this.CONTEXT_UID];r&&((t.mipmap===Me.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=ur.CLAMP:r.wrapMode=t.wrapMode,t.resource?.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)}setStyle(t,r){let i=this.gl;if(r.mipmap&&t.mipmap!==Me.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Lr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);let s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===Lr.LINEAR){let n=Math.min(t.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Lr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Lr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}};zo.extension={type:N.RendererSystem,name:"texture"};U.add(zo)});var Xo,Am=T(()=>{Nt();Xo=class{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){let{gl:r,CONTEXT_UID:i}=this,s=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s)}unbind(){let{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,r){let{gl:i,renderer:s}=this;r&&s.shader.bind(r),i.beginTransformFeedback(t)}endTransformFeedback(){let{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){let{gl:r,renderer:i,CONTEXT_UID:s}=this,n=r.createTransformFeedback();t._glTransformFeedbacks[s]=n,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let a=0;a<t.buffers.length;a++){let h=t.buffers[a];h&&(i.buffer.update(h),h._glBuffers[s].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,a,h._glBuffers[s].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,r){let i=t._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this);let n=this.renderer.buffer;if(n)for(let a=0;a<t.buffers.length;a++){let h=t.buffers[a];if(!h)continue;let u=h._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&n.dispose(h,r))}i&&(r||s.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}};Xo.extension={type:N.RendererSystem,name:"transformFeedback"};U.add(Xo)});var es,rc=T(()=>{Nt();Be();Lt();es=class{constructor(t){this.renderer=t}init(t){this.screen=new ct(0,0,t.width,t.height),this.element=t.view||B.ADAPTER.createCanvas(),this.resolution=t.resolution||B.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,r){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(r*this.resolution);let i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}};es.defaultOptions={width:800,height:600,resolution:B.RESOLUTION,autoDensity:!1};es.extension={type:[N.RendererSystem,N.CanvasRendererSystem],name:"_view"};U.add(es)});var Cm=T(()=>{Gu();Wp();Hu();tm();rm();sm();lm();um();cm();dm();fm();pm();mm();bm();Qu();Em();Ju();ec();wm();Am();rc()});var ly=T(()=>{bt();Lt();De();Vp();rl();wo();Cm();Ki();Hu();Gu();rc();Qu();ec();B.PREFER_ENV=br.WEBGL2;B.STRICT_TEXTURE_CACHE=!1;B.RENDER_OPTIONS={...Zi.defaultOptions,...Qi.defaultOptions,...es.defaultOptions,...ts.defaultOptions};Object.defineProperties(B,{WRAP_MODE:{get(){return lt.defaultOptions.wrapMode},set(e){yt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),lt.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return lt.defaultOptions.scaleMode},set(e){yt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),lt.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return lt.defaultOptions.mipmap},set(e){yt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),lt.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return lt.defaultOptions.anisotropicLevel},set(e){yt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),lt.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return yt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),kt.defaultResolution},set(e){kt.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return yt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),kt.defaultMultisample},set(e){kt.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return Sr.defaultMaxTextures},set(e){yt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Sr.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return Sr.defaultBatchSize},set(e){yt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Sr.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return Sr.canUploadSameBuffer},set(e){yt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Sr.canUploadSameBuffer=e}},GC_MODE:{get(){return pr.defaultMode},set(e){yt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),pr.defaultMode=e}},GC_MAX_IDLE:{get(){return pr.defaultMaxIdle},set(e){yt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),pr.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return pr.defaultCheckCountMax},set(e){yt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),pr.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return Ce.defaultVertexPrecision},set(e){yt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ce.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return Ce.defaultFragmentPrecision},set(e){yt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ce.defaultFragmentPrecision=e}}})});var mr,ic=T(()=>{mr=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(mr||{})});var jo,hy=T(()=>{jo=class{constructor(t,r=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=i,this.once=s}match(t,r=null){return this.fn===t&&this.context===r}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));let r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let r=this.next;return this.next=t?null:r,this.previous=null,r}}});var wr,Ot,sc=T(()=>{ic();hy();wr=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new jo(null,null,1/0),this.deltaMS=1/wr.targetFPMS,this.elapsedMS=1/wr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=mr.NORMAL){return this._addListener(new jo(e,t,r))}addOnce(e,t,r=mr.NORMAL){return this._addListener(new jo(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){let s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*wr.targetFPMS;let r=this._head,i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,wr.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!wr._shared){let e=wr._shared=new wr;e.autoStart=!0,e._protected=!0}return wr._shared}static get system(){if(!wr._system){let e=wr._system=new wr;e.autoStart=!0,e._protected=!0}return wr._system}},Ot=wr;Ot.targetFPMS=.06});var uy=T(()=>{Lt();Lt();De();sc();Object.defineProperties(B,{TARGET_FPMS:{get(){return Ot.targetFPMS},set(e){yt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ot.targetFPMS=e}}})});var cl,cy=T(()=>{Nt();ic();sc();cl=class{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,mr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Ot.shared:new Ot,t.autoStart&&this.start()}static destroy(){if(this._ticker){let t=this._ticker;this.ticker=null,t.destroy()}}};cl.extension=N.Application;U.add(cl)});var nc=T(()=>{uy();ic();sc();cy()});function Rm(e){for(let t of dy)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var dy,fy=T(()=>{Nt();dy=[];U.handleByList(N.Renderer,dy)});var py,my=T(()=>{py=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`});var gy,_y=T(()=>{gy=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`});var Pm,dl,xy=T(()=>{my();_y();Pm=py,dl=gy});var fl,vy=T(()=>{bt();Nt();fl=class{constructor(t){this.renderer=t}contextChange(t){let r;if(this.renderer.context.webGLVersion===1){let i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{let i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}r>=Bt.HIGH?this.multisample=Bt.HIGH:r>=Bt.MEDIUM?this.multisample=Bt.MEDIUM:r>=Bt.LOW?this.multisample=Bt.LOW:this.multisample=Bt.NONE}destroy(){}};fl.extension={type:N.RendererSystem,name:"_multisample"};U.add(fl)});var oc,yy=T(()=>{oc=class{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}});var pl,by=T(()=>{Nt();yy();pl=class{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){let{gl:r,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);r.bindBuffer(t.type,s.buffer)}unbind(t){let{gl:r}=this;r.bindBuffer(t,null)}bindBufferBase(t,r){let{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[r]!==t){let n=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[r]=t,i.bindBufferBase(i.UNIFORM_BUFFER,r,n.buffer)}}bindBufferRange(t,r,i){let{gl:s,CONTEXT_UID:n}=this;i=i||0;let a=t._glBuffers[n]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,a.buffer,i*256,256)}update(t){let{gl:r,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==s.updateID)if(s.updateID=t._updateID,r.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)r.bufferSubData(t.type,0,t.data);else{let n=t.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,r.bufferData(t.type,t.data,n)}}dispose(t,r){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];let i=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),i&&(r||s.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){let r=Object.keys(this.managedBuffers);for(let i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],t)}createGLBuffer(t){let{CONTEXT_UID:r,gl:i}=this;return t._glBuffers[r]=new oc(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[r]}};pl.extension={type:N.RendererSystem,name:"buffer"};U.add(pl)});var ml,Ty=T(()=>{Nt();ml=class{constructor(t){this.renderer=t}render(t,r){let i=this.renderer,s,n,a,h;if(r&&(s=r.renderTexture,n=r.clear,a=r.transform,h=r.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=a,!i.context.isLost){if(s||(this.lastObjectRendered=t),!h){let u=t.enableTempParent();t.updateTransform(),t.disableTempParent(u)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),s&&(r.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}};ml.extension={type:N.RendererSystem,name:"objectRenderer"};U.add(ml)});var Im,In,Ey=T(()=>{bt();Nt();Be();Lt();De();Ao();Ju();Im=class extends Ho{constructor(e){super(),this.type=Uf.WEBGL,e=Object.assign({},B.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new _e({projectionMatrix:new Tt},!0);let t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Im.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(yt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Im.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:hu()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return yt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return yt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return yt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return yt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}},In=Im;In.extension={type:N.Renderer,priority:1};In.__plugins={};In.__systems={};U.handleByMap(N.RendererPlugin,In.__plugins);U.handleByMap(N.RendererSystem,In.__systems);U.add(In)});var Fs,gl=T(()=>{Ki();yo();_n();Fs=class extends Er{constructor(t,r){let{width:i,height:s}=r||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let n=0;n<t;n++){let a=new lt;this.items.push(a),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,r){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Er?this.addResourceAt(t[i],i):this.addResourceAt(vo(t[i],r),i))}dispose(){for(let t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)}unbind(t){super.unbind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)}load(){if(this._load)return this._load;let r=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(r).then(()=>{let{realWidth:i,realHeight:s}=this.items[0];return this.resize(i,s),Promise.resolve(this)}),this._load}}});var Vo,ac=T(()=>{bt();gl();Vo=class extends Fs{constructor(t,r){let{width:i,height:s}=r||{},n,a;Array.isArray(t)?(n=t,a=t.length):a=t,super(a,{width:i,height:s}),n&&this.initFromArray(n,r)}addBaseTextureAt(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Hi.TEXTURE_2D_ARRAY}upload(t,r,i){let{length:s,itemDirtyIds:n,items:a}=this,{gl:h}=t;i.dirtyId<0&&h.texImage3D(h.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,r.format,i.type,null);for(let u=0;u<s;u++){let d=a[u];n[u]<d.dirtyId&&(n[u]=d.dirtyId,d.valid&&h.texSubImage3D(h.TEXTURE_2D_ARRAY,0,0,0,u,d.resource.width,d.resource.height,1,r.format,i.type,d.resource.source))}return!0}}});var Wo,lc=T(()=>{Ls();Wo=class extends Ne{constructor(t){super(t)}static test(t){let{OffscreenCanvas:r}=globalThis;return r&&t instanceof r?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}});var _l,xl,hc=T(()=>{bt();gl();_l=class extends Fs{constructor(e,t){let{width:r,height:i,autoLoad:s,linkBaseTexture:n}=t||{};if(e&&e.length!==_l.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let a=0;a<_l.SIDES;a++)this.items[a].target=Hi.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=n!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Hi.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Hi.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){let i=this.itemDirtyIds;for(let s=0;s<_l.SIDES;s++){let n=this.items[s];(i[s]<n.dirtyId||r.dirtyId<t.dirtyId)&&(n.valid&&n.resource?(n.resource.upload(e,n,r),i[s]=n.dirtyId):i[s]<-1&&(e.gl.texImage2D(n.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===_l.SIDES}},xl=_l;xl.SIDES=6});var ti,uc=T(()=>{bt();Lt();Ls();ti=class extends Ne{constructor(t,r){r=r||{};let i,s;typeof t=="string"?(i=ti.EMPTY,s=t):(i=t,s=null),super(i),this.url=s,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,r)=>{if(this.url===null){t(this);return}try{let i=await B.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;let s=await i.blob();if(this.destroyed)return;let n=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===fe.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),t(this)}catch(i){if(this.destroyed)return;r(i),this.onError.emit(i)}}),this._load)}upload(t,r,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(t,r,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return ti._EMPTY=ti._EMPTY??B.ADAPTER.createCanvas(0,0),ti._EMPTY}}});var cc,rs,dc=T(()=>{Lt();De();Ls();cc=class extends Ne{constructor(e,t){t=t||{},super(B.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},cc.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){let e=new Image;Ne.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;let t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*t,s=this._overrideHeight||this._overrideWidth/t*r),i=Math.round(i),s=Math.round(s);let n=this.source;n.width=i,n.height=s,n._pixiId=`canvas_${Ei()}`,n.getContext("2d").drawImage(e,0,0,t,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){let t=cc.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&cc.SVG_XML.test(e)}},rs=cc;rs.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;rs.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i});var Mm,$o,fc=T(()=>{nc();Ls();Mm=class extends Ne{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){let r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);let i=e[0].src||e[0];Ne.crossOrigin(r,i,t.crossorigin);for(let s=0;s<e.length;++s){let n=document.createElement("source"),{src:a,mime:h}=e[s];a=a||e[s];let u=a.split("?").shift().toLowerCase(),d=u.slice(u.lastIndexOf(".")+1);h=h||Mm.MIME_TYPES[d]||`video/${d}`,n.src=a,n.type=h,r.appendChild(n)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){let t=Ot.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;let e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){let e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){let e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);let t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1);let e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Mm.TYPES.includes(t)}},$o=Mm;$o.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];$o.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"}});var Sy=T(()=>{ac();ac();yo();yo();bo();bo();lc();lc();hc();hc();uc();uc();il();il();dc();dc();fc();fc();Ls();_n();gl();xo.push(ti,ks,Wo,$o,rs,dr,xl,Vo)});var wy=T(()=>{qi()});var Z=T(()=>{ly();Ss();bt();Nt();Be();qi();Lt();nc();De();fy();Gu();Cp();Pp();Vp();Xp();Wp();jp();Uu();Hu();rl();Zp();tm();om();xy();Xu();rm();em();vy();Rp();Eo();by();Ya();sm();yp();am();lm();um();cm();dm();fm();Ty();Ey();ju();pm();Wu();qp();mm();gm();wo();Fu();bm();Ao();xu();xm();ym();Ru();Ka();Ou();Qu();$a();Em();Cm();Ki();Sm();Sy();Yp();ec();nm();wm();$p();wy();Am();Kp();Qp();rc();Ju();Ls();_n();gl();ac();yo();bo();lc();hc();uc();il();dc();fc()});var wi,Dm=T(()=>{Z();wi=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?ct.EMPTY:(t=t||new ct(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,r){let{a:i,b:s,c:n,d:a,tx:h,ty:u}=t,d=i*r.x+n*r.y+h,f=s*r.x+a*r.y+u;this.minX=Math.min(this.minX,d),this.maxX=Math.max(this.maxX,d),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)}addQuad(t){let r=this.minX,i=this.minY,s=this.maxX,n=this.maxY,a=t[0],h=t[1];r=a<r?a:r,i=h<i?h:i,s=a>s?a:s,n=h>n?h:n,a=t[2],h=t[3],r=a<r?a:r,i=h<i?h:i,s=a>s?a:s,n=h>n?h:n,a=t[4],h=t[5],r=a<r?a:r,i=h<i?h:i,s=a>s?a:s,n=h>n?h:n,a=t[6],h=t[7],r=a<r?a:r,i=h<i?h:i,s=a>s?a:s,n=h>n?h:n,this.minX=r,this.minY=i,this.maxX=s,this.maxY=n}addFrame(t,r,i,s,n){this.addFrameMatrix(t.worldTransform,r,i,s,n)}addFrameMatrix(t,r,i,s,n){let a=t.a,h=t.b,u=t.c,d=t.d,f=t.tx,m=t.ty,_=this.minX,x=this.minY,y=this.maxX,b=this.maxY,S=a*r+u*i+f,C=h*r+d*i+m;_=S<_?S:_,x=C<x?C:x,y=S>y?S:y,b=C>b?C:b,S=a*s+u*i+f,C=h*s+d*i+m,_=S<_?S:_,x=C<x?C:x,y=S>y?S:y,b=C>b?C:b,S=a*r+u*n+f,C=h*r+d*n+m,_=S<_?S:_,x=C<x?C:x,y=S>y?S:y,b=C>b?C:b,S=a*s+u*n+f,C=h*s+d*n+m,_=S<_?S:_,x=C<x?C:x,y=S>y?S:y,b=C>b?C:b,this.minX=_,this.minY=x,this.maxX=y,this.maxY=b}addVertexData(t,r,i){let s=this.minX,n=this.minY,a=this.maxX,h=this.maxY;for(let u=r;u<i;u+=2){let d=t[u],f=t[u+1];s=d<s?d:s,n=f<n?f:n,a=d>a?d:a,h=f>h?f:h}this.minX=s,this.minY=n,this.maxX=a,this.maxY=h}addVertices(t,r,i,s){this.addVerticesMatrix(t.worldTransform,r,i,s)}addVerticesMatrix(t,r,i,s,n=0,a=n){let h=t.a,u=t.b,d=t.c,f=t.d,m=t.tx,_=t.ty,x=this.minX,y=this.minY,b=this.maxX,S=this.maxY;for(let C=i;C<s;C+=2){let M=r[C],w=r[C+1],R=h*M+d*w+m,tt=f*w+u*M+_;x=Math.min(x,R-n),b=Math.max(b,R+n),y=Math.min(y,tt-a),S=Math.max(S,tt+a)}this.minX=x,this.minY=y,this.maxX=b,this.maxY=S}addBounds(t){let r=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,r){let i=t.minX>r.minX?t.minX:r.minX,s=t.minY>r.minY?t.minY:r.minY,n=t.maxX<r.maxX?t.maxX:r.maxX,a=t.maxY<r.maxY?t.maxY:r.maxY;if(i<=n&&s<=a){let h=this.minX,u=this.minY,d=this.maxX,f=this.maxY;this.minX=i<h?i:h,this.minY=s<u?s:u,this.maxX=n>d?n:d,this.maxY=a>f?a:f}}addBoundsMatrix(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,r){let i=t.minX>r.x?t.minX:r.x,s=t.minY>r.y?t.minY:r.y,n=t.maxX<r.x+r.width?t.maxX:r.x+r.width,a=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(i<=n&&s<=a){let h=this.minX,u=this.minY,d=this.maxX,f=this.maxY;this.minX=i<h?i:h,this.minY=s<u?s:u,this.maxX=n>d?n:d,this.maxY=a>f?a:f}}pad(t=0,r=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)}addFramePad(t,r,i,s,n,a){t-=n,r-=a,i+=n,s+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s}}});var Ct,pc,Bm=T(()=>{Z();Dm();Ct=class extends Q.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Bs,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new wi,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){let r=Object.keys(t);for(let i=0;i<r.length;++i){let s=r[i];Object.defineProperty(Ct.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new ct),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new ct),t=this._localBoundsRect),this._localBounds||(this._localBounds=new wi);let r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;let s=this._bounds,n=this._boundsID;this._bounds=this._localBounds;let a=this.getBounds(!1,t);return this.parent=i,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-n,a}toGlobal(t,r,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)}toLocal(t,r,i,s){return r&&(t=r.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,r=0,i=1,s=1,n=0,a=0,h=0,u=0,d=0){return this.position.x=t,this.position.y=r,this.scale.x=i||1,this.scale.y=s||1,this.rotation=n,this.skew.x=a,this.skew.y=h,this.pivot.x=u,this.pivot.y=d,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new pc),this.tempDisplayObjectParent}enableTempParent(){let t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*Ip}set angle(t){this.transform.rotation=t*Mp}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){let r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=t,this._mask){let r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}},pc=class extends Ct{constructor(){super(...arguments),this.sortDirty=null}};Ct.prototype.displayObjectUpdateTransform=Ct.prototype.updateTransform});function CA(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var AA,Nm,Ut,Om=T(()=>{Z();Bm();AA=new Tt;Nm=class extends Ct{constructor(){super(),this.children=[],this.sortableChildren=Nm.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{let t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;let r=this.getChildIndex(e),i=this.getChildIndex(t);this.children[r]=t,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){let t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);let r=this.getChildIndex(e);Q.removeItems(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{let t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,Q.removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){let t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Q.removeItems(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){let r=e,i=t,s=i-r,n;if(s>0&&s<=i){n=this.children.splice(r,s);for(let a=0;a<n.length;++a)n[a].parent=null,n[a].transform&&(n[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<n.length;++a)n[a].emit("removed",this),this.emit("childRemoved",n[a],this,a);return n}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){let i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(CA),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){let r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){let t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){let r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){let r=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){let n=this.children[i];n.visible&&n.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){let t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==Nm.prototype._render&&(r=this.getBounds(!0));let s=e.projection.transform;if(s&&(i?(i=AA.copyFrom(i),i.prepend(s)):i=s),r&&t.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let n=0,a=this.children.length;n<a;++n){let h=this.children[n],u=h.cullable;h.cullable=u||!this.cullArea,h.render(e),h.cullable=u}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){let t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let s=0;s<t.length;s++)t[s].enabled&&this._enabledFilters.push(t[s])}let i=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==re.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,n=this.children.length;s<n;++s)this.children[s].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;let t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<r.length;++i)r[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){let t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){let t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}},Ut=Nm;Ut.defaultSortableChildren=!1;Ut.prototype.containerUpdateTransform=Ut.prototype.updateTransform});var Ay=T(()=>{Z();Z();Om();Object.defineProperties(B,{SORTABLE_CHILDREN:{get(){return Ut.defaultSortableChildren},set(e){Q.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ut.defaultSortableChildren=e}}})});var We=T(()=>{Ay();Dm();Om();Bm()});var Us,mc=T(()=>{Us=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(Us||{})});var vl,RA,ve,Cy=T(()=>{Z();We();vl=new mt,RA=new Uint16Array([0,1,2,0,2,3]),ve=class extends Ut{constructor(t){super(),this._anchor=new Ve(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new xt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=pt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||$.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=RA,this.pluginName="batch",this.isSprite=!0,this._roundPixels=B.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Q.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Q.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){let t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;let r=this.transform.worldTransform,i=r.a,s=r.b,n=r.c,a=r.d,h=r.tx,u=r.ty,d=this.vertexData,f=t.trim,m=t.orig,_=this._anchor,x=0,y=0,b=0,S=0;if(f?(y=f.x-_._x*m.width,x=y+f.width,S=f.y-_._y*m.height,b=S+f.height):(y=-_._x*m.width,x=y+m.width,S=-_._y*m.height,b=S+m.height),d[0]=i*y+n*S+h,d[1]=a*S+s*y+u,d[2]=i*x+n*S+h,d[3]=a*S+s*x+u,d[4]=i*x+n*b+h,d[5]=a*b+s*x+u,d[6]=i*y+n*b+h,d[7]=a*b+s*y+u,this._roundPixels){let C=B.RESOLUTION;for(let M=0;M<d.length;++M)d[M]=Math.round(d[M]*C)/C}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;let t=this._texture,r=this.vertexTrimmedData,i=t.orig,s=this._anchor,n=this.transform.worldTransform,a=n.a,h=n.b,u=n.c,d=n.d,f=n.tx,m=n.ty,_=-s._x*i.width,x=_+i.width,y=-s._y*i.height,b=y+i.height;r[0]=a*_+u*y+f,r[1]=d*y+h*_+m,r[2]=a*x+u*y+f,r[3]=d*y+h*x+m,r[4]=a*x+u*b+f,r[5]=d*b+h*x+m,r[6]=a*_+u*b+f,r[7]=d*b+h*_+m}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){let t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new wi),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ct),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,vl);let r=this._texture.orig.width,i=this._texture.orig.height,s=-r*this.anchor.x,n=0;return vl.x>=s&&vl.x<s+r&&(n=-i*this.anchor.y,vl.y>=n&&vl.y<n+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t?.texture){let i=typeof t=="boolean"?t:t?.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(t,r){let i=t instanceof $?t:$.from(t,r);return new ve(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){let r=Q.sign(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){let r=Q.sign(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||$.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}});var Gs=T(()=>{Cy()});var gc,ft,he,Lm=T(()=>{Z();gc={willReadFrequently:!0},ft=class{static get experimentalLetterSpacingSupported(){let e=ft._experimentalLetterSpacingSupported;if(e!==void 0){let t=B.ADAPTER.getCanvasRenderingContext2D().prototype;e=ft._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,i,s,n,a,h,u){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=s,this.lineWidths=n,this.lineHeight=a,this.maxLineWidth=h,this.fontProperties=u}static measureText(e,t,r,i=ft._canvas){r=r??t.wordWrap;let s=t.toFontString(),n=ft.measureFont(s);n.fontSize===0&&(n.fontSize=t.fontSize,n.ascent=t.fontSize);let a=i.getContext("2d",gc);a.font=s;let u=(r?ft.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),d=new Array(u.length),f=0;for(let y=0;y<u.length;y++){let b=ft._measureText(u[y],t.letterSpacing,a);d[y]=b,f=Math.max(f,b)}let m=f+t.strokeThickness;t.dropShadow&&(m+=t.dropShadowDistance);let _=t.lineHeight||n.fontSize+t.strokeThickness,x=Math.max(_,n.fontSize+t.strokeThickness*2)+(u.length-1)*(_+t.leading);return t.dropShadow&&(x+=t.dropShadowDistance),new ft(e,t,m,x,u,d,_+t.leading,f,n)}static _measureText(e,t,r){let i=!1;ft.experimentalLetterSpacingSupported&&(ft.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(e).width;return s>0&&(i?s-=t:s+=(ft.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,r=ft._canvas){let i=r.getContext("2d",gc),s=0,n="",a="",h=Object.create(null),{letterSpacing:u,whiteSpace:d}=t,f=ft.collapseSpaces(d),m=ft.collapseNewlines(d),_=!f,x=t.wordWrapWidth+u,y=ft.tokenize(e);for(let b=0;b<y.length;b++){let S=y[b];if(ft.isNewline(S)){if(!m){a+=ft.addLine(n),_=!f,n="",s=0;continue}S=" "}if(f){let M=ft.isBreakingSpace(S),w=ft.isBreakingSpace(n[n.length-1]);if(M&&w)continue}let C=ft.getFromCache(S,u,h,i);if(C>x)if(n!==""&&(a+=ft.addLine(n),n="",s=0),ft.canBreakWords(S,t.breakWords)){let M=ft.wordWrapSplit(S);for(let w=0;w<M.length;w++){let R=M[w],tt=R,et=1;for(;M[w+et];){let z=M[w+et];if(!ft.canBreakChars(tt,z,S,w,t.breakWords))R+=z;else break;tt=z,et++}w+=et-1;let j=ft.getFromCache(R,u,h,i);j+s>x&&(a+=ft.addLine(n),_=!1,n="",s=0),n+=R,s+=j}}else{n.length>0&&(a+=ft.addLine(n),n="",s=0);let M=b===y.length-1;a+=ft.addLine(S,!M),_=!1,n="",s=0}else C+s>x&&(_=!1,a+=ft.addLine(n),n="",s=0),(n.length>0||!ft.isBreakingSpace(S)||_)&&(n+=S,s+=C)}return a+=ft.addLine(n,!1),a}static addLine(e,t=!0){return e=ft.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,i){let s=r[e];return typeof s!="number"&&(s=ft._measureText(e,t,i)+t,r[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){let r=e[t];if(!ft.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ft._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ft._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){let t=[],r="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){let s=e[i],n=e[i+1];if(ft.isBreakingSpace(s,n)||ft.isNewline(s)){r!==""&&(t.push(r),r=""),t.push(s);continue}r+=s}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,i,s){return!0}static wordWrapSplit(e){return ft.graphemeSegmenter(e)}static measureFont(e){if(ft._fonts[e])return ft._fonts[e];let t={ascent:0,descent:0,fontSize:0},r=ft._canvas,i=ft._context;i.font=e;let s=ft.METRICS_STRING+ft.BASELINE_SYMBOL,n=Math.ceil(i.measureText(s).width),a=Math.ceil(i.measureText(ft.BASELINE_SYMBOL).width),h=Math.ceil(ft.HEIGHT_MULTIPLIER*a);if(a=a*ft.BASELINE_MULTIPLIER|0,n===0||h===0)return ft._fonts[e]=t,t;r.width=n,r.height=h,i.fillStyle="#f00",i.fillRect(0,0,n,h),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);let u=i.getImageData(0,0,n,h).data,d=u.length,f=n*4,m=0,_=0,x=!1;for(m=0;m<a;++m){for(let y=0;y<f;y+=4)if(u[_+y]!==255){x=!0;break}if(!x)_+=f;else break}for(t.ascent=a-m,_=d-f,x=!1,m=h;m>a;--m){for(let y=0;y<f;y+=4)if(u[_+y]!==255){x=!0;break}if(!x)_-=f;else break}return t.descent=m-a,t.fontSize=t.ascent+t.descent,ft._fonts[e]=t,t}static clearMetrics(e=""){e?delete ft._fonts[e]:ft._fonts={}}static get _canvas(){if(!ft.__canvas){let e;try{let t=new OffscreenCanvas(0,0);if(t.getContext("2d",gc)?.measureText)return ft.__canvas=t,t;e=B.ADAPTER.createCanvas()}catch{e=B.ADAPTER.createCanvas()}e.width=e.height=10,ft.__canvas=e}return ft.__canvas}static get _context(){return ft.__context||(ft.__context=ft._canvas.getContext("2d",gc)),ft.__context}},he=ft;he.METRICS_STRING="|\xC9q\xC5";he.BASELINE_SYMBOL="M";he.BASELINE_MULTIPLIER=1.4;he.HEIGHT_MULTIPLIER=2;he.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let e=new Intl.Segmenter;return t=>[...e.segment(t)].map(r=>r.segment)}return e=>[...e]})();he.experimentalLetterSpacing=!1;he._fonts={};he._newlines=[10,13];he._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]});function km(e){let t=xt.shared;return Array.isArray(e)?e.map(r=>t.setValue(r).toHex()):t.setValue(e).toHex()}function IA(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function Fm(e,t,r){for(let i in r)Array.isArray(t[i])?e[i]=t[i].slice():e[i]=t[i]}var PA,yl,tr,Um=T(()=>{mc();Z();PA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],yl=class{constructor(e){this.styleID=0,this.reset(),Fm(this,e,e)}clone(){let e={};return Fm(e,this,yl.defaultStyle),new yl(e)}reset(){Fm(this,yl.defaultStyle,yl.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){let t=km(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){let t=km(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){IA(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){let t=km(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){let e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let i=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!PA.includes(i)&&(i=`"${i}"`),t[r]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}},tr=yl;tr.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Us.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100}});var MA,Gm,Mn,Ry=T(()=>{Z();Gs();mc();Lm();Um();MA={texture:!0,children:!1,baseTexture:!0},Gm=class extends ve{constructor(e,t,r){let i=!1;r||(r=B.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;let s=$.from(r);s.orig=new ct,s.trim=new ct,super(s),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=Gm.defaultResolution??B.RESOLUTION,this._autoResolution=Gm.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return he.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Q.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),he.experimentalLetterSpacing=e}updateText(e){let t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();let r=this.context,i=he.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,n=i.height,a=i.lines,h=i.lineHeight,u=i.lineWidths,d=i.maxLineWidth,f=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let m,_,x=t.dropShadow?2:1;for(let y=0;y<x;++y){let b=t.dropShadow&&y===0,S=b?Math.ceil(Math.max(1,n)+t.padding*2):0,C=S*this._resolution;if(b){r.fillStyle="black",r.strokeStyle="black";let w=t.dropShadowColor,R=t.dropShadowBlur*this._resolution,tt=t.dropShadowDistance*this._resolution;r.shadowColor=xt.shared.setValue(w).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=R,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*tt,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*tt+C}else r.fillStyle=this._generateFillStyle(t,a,i),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let M=(h-f.fontSize)/2;h-f.fontSize<0&&(M=0);for(let w=0;w<a.length;w++)m=t.strokeThickness/2,_=t.strokeThickness/2+w*h+f.ascent+M,t.align==="right"?m+=d-u[w]:t.align==="center"&&(m+=(d-u[w])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[w],m+t.padding,_+t.padding-S,!0),t.fill&&this.drawLetterSpacing(a[w],m+t.padding,_+t.padding-S)}this.updateTexture()}drawLetterSpacing(e,t,r,i=!1){let n=this._style.letterSpacing,a=!1;if(he.experimentalLetterSpacingSupported&&(he.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,a=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||a){i?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let h=t,u=he.graphemeSegmenter(e),d=this.context.measureText(e).width,f=0;for(let m=0;m<u.length;++m){let _=u[m];i?this.context.strokeText(_,h,r):this.context.fillText(_,h,r);let x="";for(let y=m+1;y<u.length;++y)x+=u[y];f=this.context.measureText(x).width,h+=d-f+n,d=f}}updateTexture(){let e=this.canvas;if(this._style.trim){let n=Q.trimCanvas(e);n.data&&(e.width=n.width,e.height=n.height,this.context.putImageData(n.data,0,0))}let t=this._texture,r=this._style,i=r.trim?0:r.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){let i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s,n=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,h=this.canvas.width/this._resolution-n-a*2,u=this.canvas.height/this._resolution-n-a*2,d=i.slice(),f=e.fillGradientStops.slice();if(!f.length){let m=d.length+1;for(let _=1;_<m;++_)f.push(_/m)}if(d.unshift(i[0]),f.unshift(0),d.push(i[i.length-1]),f.push(1),e.fillGradientType===Us.LINEAR_VERTICAL){s=this.context.createLinearGradient(h/2,a,h/2,u+a);let m=r.fontProperties.fontSize+e.strokeThickness;for(let _=0;_<t.length;_++){let x=r.lineHeight*(_-1)+m,y=r.lineHeight*_,b=y;_>0&&x>y&&(b=(y+x)/2);let S=y+m,C=r.lineHeight*(_+1),M=S;_+1<t.length&&C<S&&(M=(S+C)/2);let w=(M-b)/u;for(let R=0;R<d.length;R++){let tt=0;typeof f[R]=="number"?tt=f[R]:tt=R/d.length;let et=Math.min(1,Math.max(0,b/u+tt*w));et=Number(et.toFixed(5)),s.addColorStop(et,d[R])}}}else{s=this.context.createLinearGradient(a,u/2,h+a,u/2);let m=d.length+1,_=1;for(let x=0;x<d.length;x++){let y;typeof f[x]=="number"?y=f[x]:y=_/m,s.addColorStop(y,d[x]),_++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},MA,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);let t=Q.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);let t=Q.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof tr?this._style=e:this._style=new tr(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}},Mn=Gm;Mn.defaultAutoResolution=!0});var Hs=T(()=>{mc();Ry();Lm();Um()});var Ai,bl=T(()=>{Ai=class{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}});var Ci,Tl=T(()=>{bl();Ci=class{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){let r=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let n in r){let a=r[n].match(/^[a-z]+/gm)[0],h=r[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(let d in h){let f=h[d].split("="),m=f[0],_=f[1].replace(/"/gm,""),x=parseFloat(_),y=isNaN(x)?_:x;u[m]=y}i[a].push(u)}let s=new Ai;return i.info.forEach(n=>s.info.push({face:n.face,size:parseInt(n.size,10)})),i.common.forEach(n=>s.common.push({lineHeight:parseInt(n.lineHeight,10)})),i.page.forEach(n=>s.page.push({id:parseInt(n.id,10),file:n.file})),i.char.forEach(n=>s.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),i.kerning.forEach(n=>s.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),i.distanceField.forEach(n=>s.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),s}}});var is,El=T(()=>{bl();is=class{static test(t){let r=t;return"getElementsByTagName"in r&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){let r=new Ai,i=t.getElementsByTagName("info"),s=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),h=t.getElementsByTagName("kerning"),u=t.getElementsByTagName("distanceField");for(let d=0;d<i.length;d++)r.info.push({face:i[d].getAttribute("face"),size:parseInt(i[d].getAttribute("size"),10)});for(let d=0;d<s.length;d++)r.common.push({lineHeight:parseInt(s[d].getAttribute("lineHeight"),10)});for(let d=0;d<n.length;d++)r.page.push({id:parseInt(n[d].getAttribute("id"),10)||0,file:n[d].getAttribute("file")});for(let d=0;d<a.length;d++){let f=a[d];r.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(let d=0;d<h.length;d++)r.kerning.push({first:parseInt(h[d].getAttribute("first"),10),second:parseInt(h[d].getAttribute("second"),10),amount:parseInt(h[d].getAttribute("amount"),10)});for(let d=0;d<u.length;d++)r.distanceField.push({fieldType:u[d].getAttribute("fieldType"),distanceRange:parseInt(u[d].getAttribute("distanceRange"),10)});return r}}});var ss,Sl=T(()=>{Z();El();ss=class{static test(t){return typeof t=="string"&&t.includes("<font>")?is.test(B.ADAPTER.parseXML(t)):!1}static parse(t){return is.parse(B.ADAPTER.parseXML(t))}}});function zm(e){for(let t=0;t<Hm.length;t++)if(Hm[t].test(e))return Hm[t];return null}var Hm,_c=T(()=>{Tl();Tl();El();El();Sl();Sl();Hm=[Ci,is,ss]});function Xm(e,t,r,i,s,n){let a=r.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;let h,u=r.dropShadow?r.dropShadowDistance:0,d=r.padding||0,f=e.width/i-u-d*2,m=e.height/i-u-d*2,_=a.slice(),x=r.fillGradientStops.slice();if(!x.length){let y=_.length+1;for(let b=1;b<y;++b)x.push(b/y)}if(_.unshift(a[0]),x.unshift(0),_.push(a[a.length-1]),x.push(1),r.fillGradientType===Us.LINEAR_VERTICAL){h=t.createLinearGradient(f/2,d,f/2,m+d);let y=0,S=(n.fontProperties.fontSize+r.strokeThickness)/m;for(let C=0;C<s.length;C++){let M=n.lineHeight*C;for(let w=0;w<_.length;w++){let R=0;typeof x[w]=="number"?R=x[w]:R=w/_.length;let tt=M/m+R*S,et=Math.max(y,tt);et=Math.min(et,1),h.addColorStop(et,_[w]),y=et}}}else{h=t.createLinearGradient(d,m/2,f+d,m/2);let y=_.length+1,b=1;for(let S=0;S<_.length;S++){let C;typeof x[S]=="number"?C=x[S]:C=b/y,h.addColorStop(C,_[S]),b++}}return h}var jm=T(()=>{Hs()});function Vm(e,t,r,i,s,n,a){let h=r.text,u=r.fontProperties;t.translate(i,s),t.scale(n,n);let d=a.strokeThickness/2,f=-(a.strokeThickness/2);if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=Xm(e,t,a,n,[h],r),t.strokeStyle=a.stroke,a.dropShadow){let m=a.dropShadowColor,_=a.dropShadowBlur*n,x=a.dropShadowDistance*n;t.shadowColor=xt.shared.setValue(m).setAlpha(a.dropShadowAlpha).toRgbaString(),t.shadowBlur=_,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*x,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*x}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(h,d,f+r.lineHeight-u.descent),a.fill&&t.fillText(h,d,f+r.lineHeight-u.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}var Wm=T(()=>{Z();jm()});function Dn(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var xc=T(()=>{});function wl(e){return Array.from?Array.from(e):e.split("")}var vc=T(()=>{});function $m(e){typeof e=="string"&&(e=[e]);let t=[];for(let r=0,i=e.length;r<i;r++){let s=e[r];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);let n=s[0].charCodeAt(0),a=s[1].charCodeAt(0);if(a<n)throw new Error("[BitmapFont]: Invalid character range.");for(let h=n,u=a;h<=u;h++)t.push(String.fromCharCode(h))}else t.push(...wl(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}var Ym=T(()=>{vc()});var qm=T(()=>{Wm();xc();jm();Ym();vc()});var ei,Oe,yc=T(()=>{Z();Hs();bl();_c();qm();Ym();Wm();xc();ei=class{constructor(e,t,r){let[i]=e.info,[s]=e.common,[n]=e.page,[a]=e.distanceField,h=Q.getResolutionOfUrl(n.file),u={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/h,this.chars={},this.pageTextures=u;for(let d=0;d<e.page.length;d++){let{id:f,file:m}=e.page[d];u[f]=t instanceof Array?t[d]:t[m],a?.fieldType&&a.fieldType!=="none"&&(u[f].baseTexture.alphaMode=fe.NO_PREMULTIPLIED_ALPHA,u[f].baseTexture.mipmap=Me.OFF)}for(let d=0;d<e.char.length;d++){let{id:f,page:m}=e.char[d],{x:_,y:x,width:y,height:b,xoffset:S,yoffset:C,xadvance:M}=e.char[d];_/=h,x/=h,y/=h,b/=h,S/=h,C/=h,M/=h;let w=new ct(_+u[m].frame.x/h,x+u[m].frame.y/h,y,b);this.chars[f]={xOffset:S,yOffset:C,xAdvance:M,kerning:{},texture:new $(u[m].baseTexture,w),page:m}}for(let d=0;d<e.kerning.length;d++){let{first:f,second:m,amount:_}=e.kerning[d];f/=h,m/=h,_/=h,this.chars[m]&&(this.chars[m].kerning[f]=_)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(let e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(let e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let i;if(e instanceof Ai)i=e;else{let n=zm(e);if(!n)throw new Error("Unrecognized data format for font.");i=n.parse(e)}t instanceof $&&(t=[t]);let s=new ei(i,t,r);return ei.available[s.font]=s,s}static uninstall(e){let t=ei.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete ei.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");let{chars:i,padding:s,resolution:n,textureWidth:a,textureHeight:h,...u}=Object.assign({},ei.defaultOptions,r),d=$m(i),f=t instanceof tr?t:new tr(t),m=a,_=new Ai;_.info[0]={face:f.fontFamily,size:f.fontSize},_.common[0]={lineHeight:f.fontSize};let x=0,y=0,b,S,C,M=0,w=[],R=[];for(let et=0;et<d.length;et++){b||(b=B.ADAPTER.createCanvas(),b.width=a,b.height=h,S=b.getContext("2d"),C=new lt(b,{resolution:n,...u}),w.push(C),R.push(new $(C)),_.page.push({id:R.length-1,file:""}));let j=d[et],z=he.measureText(j,f,!1,b),it=z.width,V=Math.ceil(z.height),K=Math.ceil((f.fontStyle==="italic"?2:1)*it);if(y>=h-V*n){if(y===0)throw new Error(`[BitmapFont] textureHeight ${h}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${j}')`);--et,b=null,S=null,C=null,y=0,x=0,M=0;continue}if(M=Math.max(V+z.fontProperties.descent,M),K*n+x>=m){if(x===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${j}')`);--et,y+=M*n,y=Math.ceil(y),x=0,M=0;continue}Vm(b,S,z,x,y,n,f);let ot=Dn(z.text);_.char.push({id:ot,page:R.length-1,x:x/n,y:y/n,width:K,height:V,xoffset:0,yoffset:0,xadvance:it-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0)}),x+=(K+2*s)*n,x=Math.ceil(x)}for(let et=0,j=d.length;et<j;et++){let z=d[et];for(let it=0;it<j;it++){let V=d[it],K=S.measureText(z).width,ot=S.measureText(V).width,F=S.measureText(z+V).width-(K+ot);F&&_.kerning.push({first:Dn(z),second:Dn(V),amount:F})}}let tt=new ei(_,R,!0);return ei.available[e]!==void 0&&ei.uninstall(e),ei.available[e]=tt,tt}},Oe=ei;Oe.ALPHA=[["a","z"],["A","Z"]," "];Oe.NUMERIC=[["0","9"]];Oe.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];Oe.ASCII=[[" ","~"]];Oe.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ei.ALPHANUMERIC};Oe.available={}});var Al,Km=T(()=>{Al=class{constructor(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;let r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}});var Qm,Py,Iy,ri,My=T(()=>{Z();We();Km();Qm=new mt,Py=new Qr,Iy=class extends Ut{constructor(e,t,r,i=ze.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||ge.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=B.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){let t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ze.TRIANGLES&&t.length<Iy.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){let t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){let t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;let i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){let t=this.geometry.buffers[0],r=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));let s=this.transform.worldTransform,n=s.a,a=s.b,h=s.c,u=s.d,d=s.tx,f=s.ty,m=this.vertexData;for(let _=0;_<m.length/2;_++){let x=r[_*2],y=r[_*2+1];m[_*2]=n*x+h*y+d,m[_*2+1]=a*x+u*y+f}if(this._roundPixels){let _=B.RESOLUTION;for(let x=0;x<m.length;++x)m[x]=Math.round(m[x]*_)/_}this.vertexDirty=i}calculateUvs(){let e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new Al(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Qm);let t=this.geometry.getBuffer("aVertexPosition").data,r=Py.points,i=this.geometry.getIndex().data,s=i.length,n=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=n){let h=i[a]*2,u=i[a+1]*2,d=i[a+2]*2;if(r[0]=t[h],r[1]=t[h+1],r[2]=t[u],r[3]=t[u+1],r[4]=t[d],r[5]=t[d+1],Py.contains(Qm.x,Qm.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}},ri=Iy;ri.BATCHABLE_SIZE=100});var ii,Dy=T(()=>{Z();ii=class extends je{constructor(t,r,i){super();let s=new Dt(t),n=new Dt(r,!0),a=new Dt(i,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,at.FLOAT).addAttribute("aTextureCoord",n,2,!1,at.FLOAT).addIndex(a),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}});var By,Ny=T(()=>{By=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`});var Oy,Ly=T(()=>{Oy=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`});var Gr,ky=T(()=>{Z();Ny();Ly();Gr=class extends xe{constructor(t,r){let i={uSampler:t,alpha:1,uTextureMatrix:Tt.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(i,r.uniforms),super(r.program||Ce.from(Oy,By),i),this._colorDirty=!1,this.uvMatrix=new Ji(t),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new xt(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;let r=this.texture.baseTexture.alphaMode;xt.shared.setValue(this._tintColor).premultiply(this._alpha,r).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}});var zs=T(()=>{My();Km();Dy();ky()});var Fy,Uy=T(()=>{Fy=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`});var Gy,Hy=T(()=>{Gy=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`});var zy,Xy,jy,Vy,bc,Wy=T(()=>{Z();We();zs();yc();Uy();Hy();qm();vc();xc();zy=[],Xy=[],jy=[],Vy=class extends Ut{constructor(e,t={}){super();let{align:r,tint:i,maxWidth:s,letterSpacing:n,fontName:a,fontSize:h}=Object.assign({},Vy.styleDefaults,t);if(!Oe.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new xt(i),this._font=void 0,this._fontName=a,this._fontSize=h,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=n,this._anchor=new Ve(()=>{this.dirty=!0},this,0,0),this._roundPixels=B.ROUND_PIXELS,this.dirty=!0,this._resolution=B.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){let e=Oe.available[this._fontName],t=this.fontSize,r=t/e.size,i=new mt,s=[],n=[],a=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=wl(h),d=this._maxWidth*e.size/t,f=e.distanceFieldType==="none"?zy:Xy,m=null,_=0,x=0,y=0,b=-1,S=0,C=0,M=0,w=0;for(let V=0;V<u.length;V++){let K=u[V],ot=Dn(K);if(/(?:\s)/.test(K)&&(b=V,S=_,w++),K==="\r"||K===`
`){n.push(_),a.push(-1),x=Math.max(x,_),++y,++C,i.x=0,i.y+=e.lineHeight,m=null,w=0;continue}let k=e.chars[ot];if(!k)continue;m&&k.kerning[m]&&(i.x+=k.kerning[m]);let F=jy.pop()||{texture:$.EMPTY,line:0,charCode:0,prevSpaces:0,position:new mt};F.texture=k.texture,F.line=y,F.charCode=ot,F.position.x=Math.round(i.x+k.xOffset+this._letterSpacing/2),F.position.y=Math.round(i.y+k.yOffset),F.prevSpaces=w,s.push(F),_=F.position.x+Math.max(k.xAdvance-k.xOffset,k.texture.orig.width),i.x+=k.xAdvance+this._letterSpacing,M=Math.max(M,k.yOffset+k.texture.height),m=ot,b!==-1&&d>0&&i.x>d&&(++C,Q.removeItems(s,1+b-C,1+V-b),V=b,b=-1,n.push(S),a.push(s.length>0?s[s.length-1].prevSpaces:0),x=Math.max(x,S),y++,i.x=0,i.y+=e.lineHeight,m=null,w=0)}let R=u[u.length-1];R!=="\r"&&R!==`
`&&(/(?:\s)/.test(R)&&(_=S),n.push(_),x=Math.max(x,_),a.push(-1));let tt=[];for(let V=0;V<=y;V++){let K=0;this._align==="right"?K=x-n[V]:this._align==="center"?K=(x-n[V])/2:this._align==="justify"&&(K=a[V]<0?0:(x-n[V])/a[V]),tt.push(K)}let et=s.length,j={},z=[],it=this._activePagesMeshData;f.push(...it);for(let V=0;V<et;V++){let K=s[V].texture,ot=K.baseTexture.uid;if(!j[ot]){let k=f.pop();if(!k){let _t=new ii,ht,st;e.distanceFieldType==="none"?(ht=new Gr($.EMPTY),st=pt.NORMAL):(ht=new Gr($.EMPTY,{program:Ce.from(Gy,Fy),uniforms:{uFWidth:0}}),st=pt.NORMAL_NPM);let X=new ri(_t,ht);X.blendMode=st,k={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:X,vertices:null,uvs:null,indices:null}}k.index=0,k.indexCount=0,k.vertexCount=0,k.uvsCount=0,k.total=0;let{_textureCache:F}=this;F[ot]=F[ot]||new $(K.baseTexture),k.mesh.texture=F[ot],k.mesh.tint=this._tintColor.value,z.push(k),j[ot]=k}j[ot].total++}for(let V=0;V<it.length;V++)z.includes(it[V])||this.removeChild(it[V].mesh);for(let V=0;V<z.length;V++)z[V].mesh.parent!==this&&this.addChild(z[V].mesh);this._activePagesMeshData=z;for(let V in j){let K=j[V],ot=K.total;if(!(K.indices?.length>6*ot)||K.vertices.length<ri.BATCHABLE_SIZE*2)K.vertices=new Float32Array(4*2*ot),K.uvs=new Float32Array(4*2*ot),K.indices=new Uint16Array(6*ot);else{let k=K.total,F=K.vertices;for(let _t=k*4*2;_t<F.length;_t++)F[_t]=0}K.mesh.size=6*ot}for(let V=0;V<et;V++){let K=s[V],ot=K.position.x+tt[K.line]*(this._align==="justify"?K.prevSpaces:1);this._roundPixels&&(ot=Math.round(ot));let k=ot*r,F=K.position.y*r,_t=K.texture,ht=j[_t.baseTexture.uid],st=_t.frame,X=_t._uvs,Y=ht.index++;ht.indices[Y*6+0]=0+Y*4,ht.indices[Y*6+1]=1+Y*4,ht.indices[Y*6+2]=2+Y*4,ht.indices[Y*6+3]=0+Y*4,ht.indices[Y*6+4]=2+Y*4,ht.indices[Y*6+5]=3+Y*4,ht.vertices[Y*8+0]=k,ht.vertices[Y*8+1]=F,ht.vertices[Y*8+2]=k+st.width*r,ht.vertices[Y*8+3]=F,ht.vertices[Y*8+4]=k+st.width*r,ht.vertices[Y*8+5]=F+st.height*r,ht.vertices[Y*8+6]=k,ht.vertices[Y*8+7]=F+st.height*r,ht.uvs[Y*8+0]=X.x0,ht.uvs[Y*8+1]=X.y0,ht.uvs[Y*8+2]=X.x1,ht.uvs[Y*8+3]=X.y1,ht.uvs[Y*8+4]=X.x2,ht.uvs[Y*8+5]=X.y2,ht.uvs[Y*8+6]=X.x3,ht.uvs[Y*8+7]=X.y3}this._textWidth=x*r,this._textHeight=(i.y+e.lineHeight)*r;for(let V in j){let K=j[V];if(this.anchor.x!==0||this.anchor.y!==0){let _t=0,ht=this._textWidth*this.anchor.x,st=this._textHeight*this.anchor.y;for(let X=0;X<K.total;X++)K.vertices[_t++]-=ht,K.vertices[_t++]-=st,K.vertices[_t++]-=ht,K.vertices[_t++]-=st,K.vertices[_t++]-=ht,K.vertices[_t++]-=st,K.vertices[_t++]-=ht,K.vertices[_t++]-=st}this._maxLineHeight=M*r;let ot=K.mesh.geometry.getBuffer("aVertexPosition"),k=K.mesh.geometry.getBuffer("aTextureCoord"),F=K.mesh.geometry.getIndex();ot.data=K.vertices,k.data=K.uvs,F.data=K.indices,ot.update(),k.update(),F.update()}for(let V=0;V<s.length;V++)jy.push(s[V]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);let{distanceFieldRange:t,distanceFieldType:r,size:i}=Oe.available[this._fontName];if(r!=="none"){let{a:s,b:n,c:a,d:h}=this.worldTransform,u=Math.sqrt(s*s+n*n),d=Math.sqrt(a*a+h*h),f=(Math.abs(u)+Math.abs(d))/2,m=this.fontSize/i,_=e._view.resolution;for(let x of this._activePagesMeshData)x.mesh.shader.uniforms.uFWidth=f*t*m*_}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){let e=Oe.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Oe.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Oe.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){let{_textureCache:t}=this,i=Oe.available[this._fontName].distanceFieldType==="none"?zy:Xy;i.push(...this._activePagesMeshData);for(let s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],i.filter(s=>t[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=$.EMPTY});for(let s in t)t[s].destroy(),delete t[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}},bc=Vy;bc.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}});var $y,Yy=T(()=>{Z();$y={loader:N.LoadParser,resolver:N.ResolveParser,cache:N.CacheParser,detection:N.DetectionParser};U.handle(N.Asset,e=>{let t=e.ref;Object.entries($y).filter(([r])=>!!t[r]).forEach(([r,i])=>U.add(Object.assign(t[r],{extension:t[r].extension??i})))},e=>{let t=e.ref;Object.keys($y).filter(r=>!!t[r]).forEach(r=>U.remove(t[r]))})});var Tc,qy=T(()=>{Tc=class{constructor(t,r=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(t){t.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let t=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<r;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}});function Hr(e,t){if(Array.isArray(t)){for(let r of t)if(e.startsWith(`data:${r}`))return!0;return!1}return e.startsWith(`data:${t}`)}var Xs=T(()=>{});function $e(e,t){let r=e.split("?")[0],i=Q.path.extname(r).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}var js=T(()=>{Z()});var er,Bn=T(()=>{er=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(r=>typeof r=="string"?t(r):r):e)});var Nn,Zm=T(()=>{Nn=(e,t)=>{let r=t.split("?")[1];return r&&(e+=`?${r}`),e}});function Ky(e,t,r,i,s){let n=t[r];for(let a=0;a<n.length;a++){let h=n[a];r<t.length-1?Ky(e.replace(i[r],h),t,r+1,i,s):s.push(e.replace(i[r],h))}}function Ec(e){let t=/\{(.*?)\}/g,r=e.match(t),i=[];if(r){let s=[];r.forEach(n=>{let a=n.substring(1,n.length-1).split(",");s.push(a)}),Ky(e,s,0,r,i)}else i.push(e);return i}var Sc=T(()=>{});var ns,Yo=T(()=>{ns=e=>!Array.isArray(e)});var wc=T(()=>{Xs();js();Bn();Zm();Sc();Yo()});var Jm,Vs,Ac=T(()=>{Z();wc();Bn();Jm=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let r=this._cache.get(t);return r||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),r}set(t,r){let i=er(t),s;for(let h=0;h<this.parsers.length;h++){let u=this.parsers[h];if(u.test(r)){s=u.getCacheableAssets(i,r);break}}s||(s={},i.forEach(h=>{s[h]=r}));let n=Object.keys(s),a={cacheKeys:n,keys:i};if(i.forEach(h=>{this._cacheMap.set(h,a)}),n.forEach(h=>{this._cache.has(h)&&this._cache.get(h)!==r&&console.warn("[Cache] already has key:",h),this._cache.set(h,s[h])}),r instanceof $){let h=r;i.forEach(u=>{h.baseTexture!==$.EMPTY.baseTexture&&lt.addToCache(h.baseTexture,u),$.addToCache(h,u)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}let r=this._cacheMap.get(t);r.cacheKeys.forEach(s=>{this._cache.delete(s)}),r.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}},Vs=new Jm});var Cc,Qy=T(()=>{Z();wc();Yo();Bn();Cc=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,r,i)=>(this._parsersValidated=!1,t[r]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,r){let i={promise:null,parser:null};return i.promise=(async()=>{let s=null,n=null;if(r.loadParser&&(n=this._parserHash[r.loadParser],n||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${t}`)),!n){for(let a=0;a<this.parsers.length;a++){let h=this.parsers[a];if(h.load&&h.test?.(t,r,this)){n=h;break}}if(!n)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await n.load(t,r,this),i.parser=n;for(let a=0;a<this.parsers.length;a++){let h=this.parsers[a];h.parse&&h.parse&&await h.testParse?.(s,r,this)&&(s=await h.parse(s,r,this)||s,i.parser=h)}return s})(),i}async load(t,r){this._parsersValidated||this._validateParsers();let i=0,s={},n=ns(t),a=er(t,d=>({src:d})),h=a.length,u=a.map(async d=>{let f=Q.path.toAbsolute(d.src);if(!s[d.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,d)),s[d.src]=await this.promiseCache[f].promise,r&&r(++i/h)}catch(m){throw delete this.promiseCache[f],delete s[d.src],new Error(`[Loader.load] Failed to load ${f}.
${m}`)}});return await Promise.all(u),n?s[a[0].src]:s}async unload(t){let i=er(t,s=>({src:s})).map(async s=>{let n=Q.path.toAbsolute(s.src),a=this.promiseCache[n];if(a){let h=await a.promise;a.parser?.unload?.(h,s,this),delete this.promiseCache[n]}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,r)=>(t[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...t,[r.name]:r}),{})}}});var ue,Ws=T(()=>{ue=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(ue||{})});var DA,BA,tg,eg=T(()=>{Z();Xs();js();Ws();DA=".json",BA="application/json",tg={extension:{type:N.LoadParser,priority:ue.Low},name:"loadJson",test(e){return Hr(e,BA)||$e(e,DA)},async load(e){return await(await B.ADAPTER.fetch(e)).json()}};U.add(tg)});var NA,OA,rg,ig=T(()=>{Z();Xs();js();Ws();NA=".txt",OA="text/plain",rg={name:"loadTxt",extension:{type:N.LoadParser,priority:ue.Low},test(e){return Hr(e,OA)||$e(e,NA)},async load(e){return await(await B.ADAPTER.fetch(e)).text()}};U.add(rg)});function sg(e){let t=Q.path.extname(e),s=Q.path.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1)),n=s.length>0;for(let h of s)if(!h.match(UA)){n=!1;break}let a=s.join(" ");return n||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}var LA,kA,FA,UA,ng,og=T(()=>{Z();Xs();js();Ws();LA=["normal","bold","100","200","300","400","500","600","700","800","900"],kA=[".ttf",".otf",".woff",".woff2"],FA=["font/ttf","font/otf","font/woff","font/woff2"],UA=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;ng={extension:{type:N.LoadParser,priority:ue.Low},name:"loadWebFont",test(e){return Hr(e,FA)||$e(e,kA)},async load(e,t){let r=B.ADAPTER.getFontFaceSet();if(r){let i=[],s=t.data?.family??sg(e),n=t.data?.weights?.filter(h=>LA.includes(h))??["normal"],a=t.data??{};for(let h=0;h<n.length;h++){let u=n[h],d=new FontFace(s,`url(${encodeURI(e)})`,{...a,weight:u});await d.load(),r.add(d),i.push(d)}return i.length===1?i[0]:i}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>B.ADAPTER.getFontFaceSet().delete(t))}};U.add(ng)});var Zy,ag,GA,HA,zA,lg,hg,ug,Jy=T(()=>{Zy=0,GA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",HA={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${GA}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},zA={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`},hg=class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{let r=URL.createObjectURL(new Blob([HA.code],{type:"application/javascript"})),i=new Worker(r);i.addEventListener("message",s=>{i.terminate(),URL.revokeObjectURL(r),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){ag===void 0&&(ag=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<ag&&(lg||(lg=URL.createObjectURL(new Blob([zA.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(lg),t.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,r){await this._initWorkers();let i=new Promise((s,n)=>{this.queue.push({id:t,arguments:r,resolve:s,reject:n})});return this.next(),i}next(){if(!this.queue.length)return;let t=this.getWorker();if(!t)return;let r=this.queue.pop(),i=r.id;this.resolveHash[Zy]={resolve:r.resolve,reject:r.reject},t.postMessage({data:r.arguments,uuid:Zy++,id:i})}},ug=new hg});function Ri(e,t,r){let i=new $(e);return i.baseTexture.on("dispose",()=>{delete t.promiseCache[r]}),i}var Cl=T(()=>{Z()});async function cg(e){let t=await B.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);let r=await t.blob();return await createImageBitmap(r)}var XA,jA,os,qo=T(()=>{Z();Xs();js();Ws();Jy();Cl();XA=[".jpeg",".jpg",".png",".webp",".avif"],jA=["image/jpeg","image/png","image/webp","image/avif"];os={name:"loadTextures",extension:{type:N.LoadParser,priority:ue.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return Hr(e,jA)||$e(e,XA)},async load(e,t,r){let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ug.isImageBitmapSupported()?i=await ug.loadImageBitmap(e):i=await cg(e):i=await new Promise(n=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=e,i.complete?n(i):i.onload=()=>{n(i)}});let s=new lt(i,{resolution:Q.getResolutionOfUrl(e),...t.data});return s.resource.src=e,Ri(s,r,e)},unload(e){e.destroy(!0)}};U.add(os)});var VA,WA,dg,fg=T(()=>{Z();Xs();js();Ws();qo();Cl();VA=".svg",WA="image/svg+xml",dg={extension:{type:N.LoadParser,priority:ue.High},name:"loadSVG",test(e){return Hr(e,WA)||$e(e,VA)},async testParse(e){return rs.test(e)},async parse(e,t,r){let i=new rs(e,t?.data?.resourceOptions);await i.load();let s=new lt(i,{resolution:Q.getResolutionOfUrl(e),...t?.data});return s.resource.src=e,Ri(s,r,e)},async load(e,t){return(await B.ADAPTER.fetch(e)).text()},unload:os.unload};U.add(dg)});var tb=T(()=>{Cl()});var eb=T(()=>{fg();qo();tb()});var pg=T(()=>{Ws();eg();ig();og();eb()});var Rc,rb=T(()=>{Z();Bn();Sc();Yo();Rc=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,r)=>`${t}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(t,r)=>r.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{let r=t;this._defaultSearchParams=Object.keys(r).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(r[i])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(t,r){let i=[];Array.isArray(r)?r.forEach(s=>{if(typeof s.name=="string"){let n=this._createBundleAssetId(t,s.name);i.push(n),this.add([s.name,n],s.srcs,s.data)}else{let n=s.name.map(a=>this._createBundleAssetId(t,a));n.forEach(a=>{i.push(a)}),this.add([...s.name,...n],s.srcs)}}):Object.keys(r).forEach(s=>{i.push(this._createBundleAssetId(t,s)),this.add([s,this._createBundleAssetId(t,s)],r[s])}),this._bundles[t]=i}add(t,r,i){let s=er(t);s.forEach(a=>{this.hasKey(a)&&console.warn(`[Resolver] already has key: ${a} overwriting`)}),Array.isArray(r)||(typeof r=="string"?r=Ec(r):r=[r]);let n=r.map(a=>{let h=a;if(typeof a=="string"){let u=!1;for(let d=0;d<this._parsers.length;d++){let f=this._parsers[d];if(f.test(a)){h=f.parse(a),u=!0;break}}u||(h={src:a})}return h.format||(h.format=h.src.split(".").pop()),h.alias||(h.alias=s),(this._basePath||this._rootPath)&&(h.src=Q.path.toAbsolute(h.src,this._basePath,this._rootPath)),h.src=this._appendDefaultSearchParams(h.src),h.data=h.data??i,h});s.forEach(a=>{this._assetMap[a]=n})}resolveBundle(t){let r=ns(t);t=er(t);let i={};return t.forEach(s=>{let n=this._bundles[s];if(n){let a=this.resolve(n),h={};for(let u in a){let d=a[u];h[this._extractAssetIdFromBundle(s,u)]=d}i[s]=h}}),r?i[t[0]]:i}resolveUrl(t){let r=this.resolve(t);if(typeof t!="string"){let i={};for(let s in r)i[s]=r[s].src;return i}return r.src}resolve(t){let r=ns(t);t=er(t);let i={};return t.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let n=this._assetMap[s],a=this._getPreferredOrder(n),h=n[0];a?.priority.forEach(u=>{a.params[u].forEach(d=>{let f=n.filter(m=>m[u]?m[u]===d:!1);f.length&&(n=f)})}),this._resolverHash[s]=n[0]??h}else{let n=s;(this._basePath||this._rootPath)&&(n=Q.path.toAbsolute(n,this._basePath,this._rootPath)),n=this._appendDefaultSearchParams(n),this._resolverHash[s]={src:n}}i[s]=this._resolverHash[s]}),r?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let r=0;r<t.length;r++){let i=t[0],s=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;let r=/\?/.test(t)?"&":"?";return`${t}${r}${this._defaultSearchParams}`}}});var Pc,Rl,ib=T(()=>{Z();qy();Ac();Qy();pg();rb();Bn();Yo();qo();Pc=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Rc,this.loader=new Cc,this.cache=Vs,this._backgroundLoader=new Tc(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let n=t.manifest;typeof n=="string"&&(n=await this.load(n)),this.resolver.addManifest(n)}let r=t.texturePreference?.resolution??1,i=typeof r=="number"?[r]:r,s=[];if(t.texturePreference?.format){let n=t.texturePreference?.format;s=typeof n=="string"?[n]:n;for(let a of this._detections)await a.test()||(s=await a.remove(s))}else for(let n of this._detections)await n.test()&&(s=await n.add(s));this.resolver.prefer({params:{format:s,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,r,i){this.resolver.add(t,r,i)}async load(t,r){this._initialized||await this.init();let i=ns(t),s=er(t).map(h=>typeof h!="string"?(this.resolver.add(h.src,h),h.src):(this.resolver.hasKey(h)||this.resolver.add(h,h),h)),n=this.resolver.resolve(s),a=await this._mapLoadToResolve(n,r);return i?a[s[0]]:a}addBundle(t,r){this.resolver.addBundle(t,r)}async loadBundle(t,r){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);let s=this.resolver.resolveBundle(t),n={},a=Object.keys(s),h=0,u=0,d=()=>{r?.(++h/u)},f=a.map(m=>{let _=s[m];return u+=Object.keys(_).length,this._mapLoadToResolve(_,d).then(x=>{n[m]=x})});return await Promise.all(f),i?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);let r=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);let r=this.resolver.resolveBundle(t);Object.values(r).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Vs.get(t);let r={};for(let i=0;i<t.length;i++)r[i]=Vs.get(t[i]);return r}async _mapLoadToResolve(t,r){let i=Object.values(t),s=Object.keys(t);this._backgroundLoader.active=!1;let n=await this.loader.load(i,r);this._backgroundLoader.active=!0;let a={};return i.forEach((h,u)=>{let d=n[h.src],f=[h.src];h.alias&&f.push(...h.alias),a[s[u]]=d,Vs.set(f,d)}),a}async unload(t){this._initialized||await this.init();let r=er(t).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(r);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=er(t);let r=this.resolver.resolveBundle(t),i=Object.keys(r).map(s=>this._unloadFromResolved(r[s]));await Promise.all(i)}async _unloadFromResolved(t){let r=Object.values(t);r.forEach(i=>{Vs.remove(i.src)}),await this.loader.unload(r)}get detections(){return this._detections}get preferWorkers(){return os.config.preferWorkers}set preferWorkers(t){Q.deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(i=>i in t).forEach(i=>{r.config[i]=t[i]})})}},Rl=new Pc;U.handleByList(N.LoadParser,Rl.loader.parsers).handleByList(N.ResolveParser,Rl.resolver.parsers).handleByList(N.CacheParser,Rl.cache.parsers).handleByList(N.DetectionParser,Rl.detections)});var mg,gg=T(()=>{Z();mg={extension:N.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof $),getCacheableAssets:(e,t)=>{let r={};return e.forEach(i=>{t.forEach((s,n)=>{r[i+(n===0?"":n+1)]=s})}),r}};U.add(mg)});var sb=T(()=>{gg()});var nb=T(()=>{Ac();sb()});var _g,xg=T(()=>{Z();_g={extension:{type:N.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;let e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await B.ADAPTER.fetch(e).then(r=>r.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};U.add(_g)});var vg,yg=T(()=>{Z();vg={extension:{type:N.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;let e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await B.ADAPTER.fetch(e).then(r=>r.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};U.add(vg)});var ob,bg,Tg=T(()=>{Z();ob=["png","jpg","jpeg"],bg={extension:{type:N.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...ob],remove:async e=>e.filter(t=>!ob.includes(t))};U.add(bg)});var ab=T(()=>{xg();yg();Tg()});var lb=T(()=>{ab()});var Eg=T(()=>{pg()});var Sg,wg=T(()=>{Z();Eg();qo();Sg={extension:N.ResolveParser,test:os.test,parse:e=>({resolution:parseFloat(B.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})};U.add(Sg)});var hb=T(()=>{wg()});var ub=T(()=>{hb()});var Ko=T(()=>{Yy();ib();nb();lb();Eg();ub();wc();Ac();gg();xg();yg();Tg();Ws();eg();ig();og();fg();qo();Cl();wg();Xs();js();Bn();Zm();Sc();Yo()});var $A,cb,db=T(()=>{Ko();Z();yc();_c();Tl();Sl();$A=[".xml",".fnt"],cb={extension:{type:N.LoadParser,priority:ue.Normal},name:"loadBitmapFont",test(e){return $A.includes(Q.path.extname(e).toLowerCase())},async testParse(e){return Ci.test(e)||ss.test(e)},async parse(e,t,r){let i=Ci.test(e)?Ci.parse(e):ss.parse(e),{src:s}=t,{page:n}=i,a=[];for(let d=0;d<n.length;++d){let f=n[d].file,m=Q.path.join(Q.path.dirname(s),f);m=Nn(m,s),a.push(m)}let h=await r.load(a),u=a.map(d=>h[d]);return Oe.install(i,u,!0)},async load(e,t){return(await B.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};U.add(cb)});var Ag=T(()=>{yc();bl();Wy();_c();db();Tl();El();Sl()});var $s,Pl=T(()=>{Z();$s={build(e){let t=e.points,r,i,s,n,a,h;if(e.type===Ft.CIRC){let y=e.shape;r=y.x,i=y.y,a=h=y.radius,s=n=0}else if(e.type===Ft.ELIP){let y=e.shape;r=y.x,i=y.y,a=y.width,h=y.height,s=n=0}else{let y=e.shape,b=y.width/2,S=y.height/2;r=y.x+b,i=y.y+S,a=h=Math.max(0,Math.min(y.radius,Math.min(b,S))),s=b-a,n=S-h}if(!(a>=0&&h>=0&&s>=0&&n>=0)){t.length=0;return}let u=Math.ceil(2.3*Math.sqrt(a+h)),d=u*8+(s?4:0)+(n?4:0);if(t.length=d,d===0)return;if(u===0){t.length=8,t[0]=t[6]=r+s,t[1]=t[3]=i+n,t[2]=t[4]=r-s,t[5]=t[7]=i-n;return}let f=0,m=u*4+(s?2:0)+2,_=m,x=d;{let y=s+a,b=n,S=r+y,C=r-y,M=i+b;if(t[f++]=S,t[f++]=M,t[--m]=M,t[--m]=C,n){let w=i-b;t[_++]=C,t[_++]=w,t[--x]=w,t[--x]=S}}for(let y=1;y<u;y++){let b=Math.PI/2*(y/u),S=s+Math.cos(b)*a,C=n+Math.sin(b)*h,M=r+S,w=r-S,R=i+C,tt=i-C;t[f++]=M,t[f++]=R,t[--m]=R,t[--m]=w,t[_++]=w,t[_++]=tt,t[--x]=tt,t[--x]=M}{let y=s,b=n+h,S=r+y,C=r-y,M=i+b,w=i-b;t[f++]=S,t[f++]=M,t[--x]=w,t[--x]=S,s&&(t[f++]=C,t[f++]=M,t[--x]=w,t[--x]=C)}},triangulate(e,t){let r=e.points,i=t.points,s=t.indices;if(r.length===0)return;let n=i.length/2,a=n,h,u;if(e.type!==Ft.RREC){let f=e.shape;h=f.x,u=f.y}else{let f=e.shape;h=f.x+f.width/2,u=f.y+f.height/2}let d=e.matrix;i.push(e.matrix?d.a*h+d.c*u+d.tx:h,e.matrix?d.b*h+d.d*u+d.ty:u),n++,i.push(r[0],r[1]);for(let f=2;f<r.length;f+=2)i.push(r[f],r[f+1]),s.push(n++,a,n);s.push(a+1,a,n)}}});function fb(e,t=!1){let r=e.length;if(r<6)return;let i=0;for(let s=0,n=e[r-2],a=e[r-1];s<r;s+=2){let h=e[s],u=e[s+1];i+=(h-n)*(u+a),n=h,a=u}if(!t&&i>0||t&&i<=0){let s=r/2;for(let n=s+s%2;n<r;n+=2){let a=r-n-2,h=r-n-1,u=n,d=n+1;[e[a],e[u]]=[e[u],e[a]],[e[h],e[d]]=[e[d],e[h]]}}}var Qo,Il=T(()=>{Z();Qo={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let r=e.points,i=e.holes,s=t.points,n=t.indices;if(r.length>=6){fb(r,!1);let a=[];for(let d=0;d<i.length;d++){let f=i[d];fb(f.points,!0),a.push(r.length/2),r=r.concat(f.points)}let h=Q.earcut(r,a,2);if(!h)return;let u=s.length/2;for(let d=0;d<h.length;d+=3)n.push(h[d]+u),n.push(h[d+1]+u),n.push(h[d+2]+u);for(let d=0;d<r.length;d++)s.push(r[d])}}}});var Ic,Mc=T(()=>{Ic={build(e){let t=e.shape,r=t.x,i=t.y,s=t.width,n=t.height,a=e.points;a.length=0,s>=0&&n>=0&&a.push(r,i,r+s,i,r+s,i+n,r,i+n)},triangulate(e,t){let r=e.points,i=t.points;if(r.length===0)return;let s=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(s,s+1,s+2,s+1,s+2,s+3)}}});var Dc,Bc=T(()=>{Pl();Dc={build(e){$s.build(e)},triangulate(e,t){$s.triangulate(e,t)}}});var rr,si,zr,Ys=T(()=>{rr=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(rr||{}),si=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(si||{}),zr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}}});var On,Nc=T(()=>{Z();Ys();On=class{static curveTo(t,r,i,s,n,a){let h=a[a.length-2],d=a[a.length-1]-r,f=h-t,m=s-r,_=i-t,x=Math.abs(d*_-f*m);if(x<1e-8||n===0)return(a[a.length-2]!==t||a[a.length-1]!==r)&&a.push(t,r),null;let y=d*d+f*f,b=m*m+_*_,S=d*m+f*_,C=n*Math.sqrt(y)/x,M=n*Math.sqrt(b)/x,w=C*S/y,R=M*S/b,tt=C*_+M*f,et=C*m+M*d,j=f*(M+w),z=d*(M+w),it=_*(C+R),V=m*(C+R),K=Math.atan2(z-et,j-tt),ot=Math.atan2(V-et,it-tt);return{cx:tt+t,cy:et+r,radius:n,startAngle:K,endAngle:ot,anticlockwise:f*m>_*d}}static arc(t,r,i,s,n,a,h,u,d){let f=h-a,m=zr._segmentsCount(Math.abs(f)*n,Math.ceil(Math.abs(f)/Ms)*40),_=f/(m*2),x=_*2,y=Math.cos(_),b=Math.sin(_),S=m-1,C=S%1/S;for(let M=0;M<=S;++M){let w=M+C*M,R=_+a+x*w,tt=Math.cos(R),et=-Math.sin(R);d.push((y*tt+b*et)*n+i,(y*-et+b*tt)*n+s)}}}});var Zo,Oc=T(()=>{Zo=class{constructor(){this.reset()}begin(t,r,i){this.reset(),this.style=t,this.start=r,this.attribStart=i}end(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}});var qs,Lc=T(()=>{Ys();qs=class{static curveLength(t,r,i,s,n,a,h,u){let f=0,m=0,_=0,x=0,y=0,b=0,S=0,C=0,M=0,w=0,R=0,tt=t,et=r;for(let j=1;j<=10;++j)m=j/10,_=m*m,x=_*m,y=1-m,b=y*y,S=b*y,C=S*t+3*b*m*i+3*y*_*n+x*h,M=S*r+3*b*m*s+3*y*_*a+x*u,w=tt-C,R=et-M,tt=C,et=M,f+=Math.sqrt(w*w+R*R);return f}static curveTo(t,r,i,s,n,a,h){let u=h[h.length-2],d=h[h.length-1];h.length-=2;let f=zr._segmentsCount(qs.curveLength(u,d,t,r,i,s,n,a)),m=0,_=0,x=0,y=0,b=0;h.push(u,d);for(let S=1,C=0;S<=f;++S)C=S/f,m=1-C,_=m*m,x=_*m,y=C*C,b=y*C,h.push(x*u+3*_*C*t+3*m*y*i+b*n,x*d+3*_*C*r+3*m*y*s+b*a)}}});function pb(e,t,r,i,s,n,a,h){let u=e-r*s,d=t-i*s,f=e+r*n,m=t+i*n,_,x;a?(_=i,x=-r):(_=-i,x=r);let y=u+_,b=d+x,S=f+_,C=m+x;return h.push(y,b,S,C),2}function Ln(e,t,r,i,s,n,a,h){let u=r-e,d=i-t,f=Math.atan2(u,d),m=Math.atan2(s-e,n-t);h&&f<m?f+=Math.PI*2:!h&&f>m&&(m+=Math.PI*2);let _=f,x=m-f,y=Math.abs(x),b=Math.sqrt(u*u+d*d),S=(15*y*Math.sqrt(b)/Math.PI>>0)+1,C=x/S;if(_+=C,h){a.push(e,t,r,i);for(let M=1,w=_;M<S;M++,w+=C)a.push(e,t,e+Math.sin(w)*b,t+Math.cos(w)*b);a.push(e,t,s,n)}else{a.push(r,i,e,t);for(let M=1,w=_;M<S;M++,w+=C)a.push(e+Math.sin(w)*b,t+Math.cos(w)*b,e,t);a.push(s,n,e,t)}return S*2}function YA(e,t){let r=e.shape,i=e.points||r.points.slice(),s=t.closePointEps;if(i.length===0)return;let n=e.lineStyle,a=new mt(i[0],i[1]),h=new mt(i[i.length-2],i[i.length-1]),u=r.type!==Ft.POLY||r.closeStroke,d=Math.abs(a.x-h.x)<s&&Math.abs(a.y-h.y)<s;if(u){i=i.slice(),d&&(i.pop(),i.pop(),h.set(i[i.length-2],i[i.length-1]));let st=(a.x+h.x)*.5,X=(h.y+a.y)*.5;i.unshift(st,X),i.push(st,X)}let f=t.points,m=i.length/2,_=i.length,x=f.length/2,y=n.width/2,b=y*y,S=n.miterLimit*n.miterLimit,C=i[0],M=i[1],w=i[2],R=i[3],tt=0,et=0,j=-(M-R),z=C-w,it=0,V=0,K=Math.sqrt(j*j+z*z);j/=K,z/=K,j*=y,z*=y;let ot=n.alignment,k=(1-ot)*2,F=ot*2;u||(n.cap===si.ROUND?_+=Ln(C-j*(k-F)*.5,M-z*(k-F)*.5,C-j*k,M-z*k,C+j*F,M+z*F,f,!0)+2:n.cap===si.SQUARE&&(_+=pb(C,M,j,z,k,F,!0,f))),f.push(C-j*k,M-z*k,C+j*F,M+z*F);for(let st=1;st<m-1;++st){C=i[(st-1)*2],M=i[(st-1)*2+1],w=i[st*2],R=i[st*2+1],tt=i[(st+1)*2],et=i[(st+1)*2+1],j=-(M-R),z=C-w,K=Math.sqrt(j*j+z*z),j/=K,z/=K,j*=y,z*=y,it=-(R-et),V=w-tt,K=Math.sqrt(it*it+V*V),it/=K,V/=K,it*=y,V*=y;let X=w-C,Y=M-R,vt=w-tt,wt=et-R,St=X*vt+Y*wt,ye=Y*vt-wt*X,Zt=ye<0;if(Math.abs(ye)<.001*Math.abs(St)){f.push(w-j*k,R-z*k,w+j*F,R+z*F),St>=0&&(n.join===rr.ROUND?_+=Ln(w,R,w-j*k,R-z*k,w-it*k,R-V*k,f,!1)+4:_+=2,f.push(w-it*F,R-V*F,w+it*k,R+V*k));continue}let ke=(-j+C)*(-z+R)-(-j+w)*(-z+M),pe=(-it+tt)*(-V+R)-(-it+w)*(-V+et),Jt=(X*pe-vt*ke)/ye,hi=(wt*ke-Y*pe)/ye,ds=(Jt-w)*(Jt-w)+(hi-R)*(hi-R),sr=w+(Jt-w)*k,$t=R+(hi-R)*k,nr=w-(Jt-w)*F,te=R-(hi-R)*F,la=Math.min(X*X+Y*Y,vt*vt+wt*wt),Li=Zt?k:F,ha=la+Li*Li*b,Ed=ds<=ha,Wn=n.join;if(Wn===rr.MITER&&ds/b>S&&(Wn=rr.BEVEL),Ed)switch(Wn){case rr.MITER:{f.push(sr,$t,nr,te);break}case rr.BEVEL:{Zt?f.push(sr,$t,w+j*F,R+z*F,sr,$t,w+it*F,R+V*F):f.push(w-j*k,R-z*k,nr,te,w-it*k,R-V*k,nr,te),_+=2;break}case rr.ROUND:{Zt?(f.push(sr,$t,w+j*F,R+z*F),_+=Ln(w,R,w+j*F,R+z*F,w+it*F,R+V*F,f,!0)+4,f.push(sr,$t,w+it*F,R+V*F)):(f.push(w-j*k,R-z*k,nr,te),_+=Ln(w,R,w-j*k,R-z*k,w-it*k,R-V*k,f,!1)+4,f.push(w-it*k,R-V*k,nr,te));break}}else{switch(f.push(w-j*k,R-z*k,w+j*F,R+z*F),Wn){case rr.MITER:{Zt?f.push(nr,te,nr,te):f.push(sr,$t,sr,$t),_+=2;break}case rr.ROUND:{Zt?_+=Ln(w,R,w+j*F,R+z*F,w+it*F,R+V*F,f,!0)+2:_+=Ln(w,R,w-j*k,R-z*k,w-it*k,R-V*k,f,!1)+2;break}}f.push(w-it*k,R-V*k,w+it*F,R+V*F),_+=2}}C=i[(m-2)*2],M=i[(m-2)*2+1],w=i[(m-1)*2],R=i[(m-1)*2+1],j=-(M-R),z=C-w,K=Math.sqrt(j*j+z*z),j/=K,z/=K,j*=y,z*=y,f.push(w-j*k,R-z*k,w+j*F,R+z*F),u||(n.cap===si.ROUND?_+=Ln(w-j*(k-F)*.5,R-z*(k-F)*.5,w-j*k,R-z*k,w+j*F,R+z*F,f,!1)+2:n.cap===si.SQUARE&&(_+=pb(w,R,j,z,k,F,!1,f)));let _t=t.indices,ht=zr.epsilon*zr.epsilon;for(let st=x;st<_+x-2;++st)C=f[st*2],M=f[st*2+1],w=f[(st+1)*2],R=f[(st+1)*2+1],tt=f[(st+2)*2],et=f[(st+2)*2+1],!(Math.abs(C*(R-et)+w*(et-M)+tt*(M-R))<ht)&&_t.push(st,st+1,st+2)}function qA(e,t){let r=0,i=e.shape,s=e.points||i.points,n=i.type!==Ft.POLY||i.closeStroke;if(s.length===0)return;let a=t.points,h=t.indices,u=s.length/2,d=a.length/2,f=d;for(a.push(s[0],s[1]),r=1;r<u;r++)a.push(s[r*2],s[r*2+1]),h.push(f,f+1),f++;n&&h.push(f,d)}function Ml(e,t){e.lineStyle.native?qA(e,t):YA(e,t)}var kc=T(()=>{Z();Ys()});var Ks,Fc=T(()=>{Ys();Ks=class{static curveLength(t,r,i,s,n,a){let h=t-2*i+n,u=r-2*s+a,d=2*i-2*t,f=2*s-2*r,m=4*(h*h+u*u),_=4*(h*d+u*f),x=d*d+f*f,y=2*Math.sqrt(m+_+x),b=Math.sqrt(m),S=2*m*b,C=2*Math.sqrt(x),M=_/b;return(S*y+b*_*(y-C)+(4*x*m-_*_)*Math.log((2*b+M+y)/(M+C)))/(4*S)}static curveTo(t,r,i,s,n){let a=n[n.length-2],h=n[n.length-1],u=zr._segmentsCount(Ks.curveLength(a,h,t,r,i,s)),d=0,f=0;for(let m=1;m<=u;++m){let _=m/u;d=a+(t-a)*_,f=h+(r-h)*_,n.push(d+(t+(i-t)*_-d)*_,f+(r+(s-r)*_-f)*_)}}}});var Dl,Uc,Jo,Gc=T(()=>{Z();Pl();Pl();Il();Il();Mc();Mc();Bc();Bc();Nc();Oc();Lc();kc();Fc();Dl={[Ft.POLY]:Qo,[Ft.CIRC]:$s,[Ft.ELIP]:$s,[Ft.RECT]:Ic,[Ft.RREC]:Dc},Uc=[],Jo=[]});var Qs,Cg=T(()=>{Qs=class{constructor(t,r=null,i=null,s=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=r,this.matrix=s,this.type=t.type}clone(){return new Qs(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}});var ta,mb,Hc,Rg=T(()=>{Z();We();Cg();Gc();Oc();Il();kc();ta=new mt,mb=class extends xn{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new wi,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Jo.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){let t=this.batches[e];t.reset(),Uc.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,i=null){let s=new Qs(e,t,r,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;let r=new Qs(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){let t=this.graphicsData;for(let r=0;r<t.length;++r){let i=t[r];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,ta):ta.copyFrom(e),i.shape.contains(ta.x,ta.y))){let s=!1;if(i.holes){for(let n=0;n<i.holes.length;n++)if(i.holes[n].shape.contains(ta.x,ta.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;let e=this.uvs,t=this.graphicsData,r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let h=this.shapeIndex;h<t.length;h++){this.shapeIndex++;let u=t[h],d=u.fillStyle,f=u.lineStyle;Dl[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(d.visible||f.visible)&&this.processHoles(u.holes);for(let _=0;_<2;_++){let x=_===0?d:f;if(!x.visible)continue;let y=x.texture.baseTexture,b=this.indices.length,S=this.points.length/2;y.wrapMode=ur.REPEAT,_===0?this.processFill(u):this.processLine(u);let C=this.points.length/2-S;C!==0&&(r&&!this._compareStyles(i,x)&&(r.end(b,S),r=null),r||(r=Uc.pop()||new Zo,r.begin(x,b,S),this.batches.push(r),i=x),this.addUvs(this.points,e,x.texture,S,C,x.matrix))}}let s=this.indices.length,n=this.points.length/2;if(r&&r.end(s,n),this.batches.length===0){this.batchable=!0;return}let a=n>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){let r=this.graphicsData[e],i=r.fillStyle,s=r.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);let e=this.batches;for(let t=0,r=e.length;t<r;t++){let i=e[t];for(let s=0;s<i.size;s++){let n=i.start+s;this.indicesUint16[n]=this.indicesUint16[n]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;let e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<mb.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++lt._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),Jo.push(this.drawCalls[f]);this.drawCalls.length=0;let t=this.colors,r=this.textureIds,i=Jo.pop();i||(i=new Ps,i.texArray=new Ns),i.texArray.count=0,i.start=0,i.size=0,i.type=ze.TRIANGLES;let s=0,n=null,a=0,h=!1,u=ze.TRIANGLES,d=0;this.drawCalls.push(i);for(let f=0;f<this.batches.length;f++){let m=this.batches[f],_=8,x=m.style,y=x.texture.baseTexture;h!==!!x.native&&(h=!!x.native,u=h?ze.LINES:ze.TRIANGLES,n=null,s=_,e++),n!==y&&(n=y,y._batchEnabled!==e&&(s===_&&(e++,s=0,i.size>0&&(i=Jo.pop(),i||(i=new Ps,i.texArray=new Ns),this.drawCalls.push(i)),i.start=d,i.size=0,i.texArray.count=0,i.type=u),y.touched=1,y._batchEnabled=e,y._batchLocation=s,y.wrapMode=ur.REPEAT,i.texArray.elements[i.texArray.count++]=y,s++)),i.size+=m.size,d+=m.size,a=y._batchLocation,this.addColors(t,x.color,x.alpha,m.attribSize,m.attribStart),this.addTextureIds(r,a,m.attribSize,m.attribStart)}lt._globalBatch=e,this.packAttributes()}packAttributes(){let e=this.points,t=this.uvs,r=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),n=new Float32Array(s),a=new Uint32Array(s),h=0;for(let u=0;u<e.length/2;u++)n[h++]=e[u*2],n[h++]=e[u*2+1],n[h++]=t[u*2],n[h++]=t[u*2+1],a[h++]=r[u],n[h++]=i[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Qo.triangulate(e,this):Dl[e.type].triangulate(e,this)}processLine(e){Ml(e,this);for(let t=0;t<e.holes.length;t++)Ml(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){let r=e[t];Dl[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){let e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){let i=e[r*2],s=e[r*2+1];e[r*2]=t.a*i+t.c*s+t.tx,e[r*2+1]=t.b*i+t.d*s+t.ty}}addColors(e,t,r,i,s=0){let n=xt.shared.setValue(t).toLittleEndianNumber(),a=xt.shared.setValue(n).toPremultiplied(r);e.length=Math.max(e.length,s+i);for(let h=0;h<i;h++)e[s+h]=a}addTextureIds(e,t,r,i=0){e.length=Math.max(e.length,i+r);for(let s=0;s<r;s++)e[i+s]=t}addUvs(e,t,r,i,s,n=null){let a=0,h=t.length,u=r.frame;for(;a<s;){let f=e[(i+a)*2],m=e[(i+a)*2+1];if(n){let _=n.a*f+n.c*m+n.tx;m=n.b*f+n.d*m+n.ty,f=_}a++,t.push(f/u.width,m/u.height)}let d=r.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(t,r,h,s)}adjustUvs(e,t,r,i){let s=t.baseTexture,n=1e-6,a=r+i*2,h=t.frame,u=h.width/s.width,d=h.height/s.height,f=h.x/h.width,m=h.y/h.height,_=Math.floor(e[r]+n),x=Math.floor(e[r+1]+n);for(let y=r+2;y<a;y+=2)_=Math.min(_,Math.floor(e[y]+n)),x=Math.min(x,Math.floor(e[y+1]+n));f-=_,m-=x;for(let y=r;y<a;y+=2)e[y]=(e[y]+f)*u,e[y+1]=(e[y+1]+m)*d}},Hc=mb;Hc.BATCHABLE_SIZE=100});var as,zc=T(()=>{Z();as=class{constructor(){this.color=16777215,this.alpha=1,this.texture=$.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){let t=new as;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=$.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}});var kn,Pg=T(()=>{Ys();zc();kn=class extends as{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=si.BUTT,this.join=rr.MITER,this.miterLimit=10}clone(){let t=new kn;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}});var Ig,Xc,Pi,gb=T(()=>{Z();We();Ys();Rg();zc();Pg();Gc();Fc();Lc();Nc();Ig={},Xc=class extends Ut{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new as,this._lineStyle=new kn,this._matrix=null,this._holeMode=!1,this.state=ge.for2d(),this._geometry=e||new Hc,this._geometry.refCount++,this._transformID=-1,this._tintColor=new xt(16777215),this.blendMode=pt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Xc(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){let t={width:0,texture:$.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:si.BUTT,join:rr.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();let r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){let e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Qr,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Qr,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);let r=this.currentPath.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,i){this._initCurve();let s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Ks.curveTo(e,t,r,i,s),this}bezierCurveTo(e,t,r,i,s,n){return this._initCurve(),qs.curveTo(e,t,r,i,s,n,this.currentPath.points),this}arcTo(e,t,r,i,s){this._initCurve(e,t);let n=this.currentPath.points,a=On.curveTo(e,t,r,i,s,n);if(a){let{cx:h,cy:u,radius:d,startAngle:f,endAngle:m,anticlockwise:_}=a;this.arc(h,u,d,f,m,_)}return this}arc(e,t,r,i,s,n=!1){if(i===s)return this;if(!n&&s<=i?s+=Ms:n&&i<=s&&(i+=Ms),s-i===0)return this;let h=e+Math.cos(i)*r,u=t+Math.sin(i)*r,d=this._geometry.closePointEps,f=this.currentPath?this.currentPath.points:null;if(f){let m=Math.abs(f[f.length-2]-h),_=Math.abs(f[f.length-1]-u);m<d&&_<d||f.push(h,u)}else this.moveTo(h,u),f=this.currentPath.points;return On.arc(h,u,e,t,r,i,s,n,f),this}beginFill(e=0,t){return this.beginTextureFill({texture:$.WHITE,color:e,alpha:t})}normalizeColor(e){let t=xt.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){let t={texture:$.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();let r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,i){return this.drawShape(new ct(e,t,r,i))}drawRoundedRect(e,t,r,i,s){return this.drawShape(new bn(e,t,r,i,s))}drawCircle(e,t,r){return this.drawShape(new vn(e,t,r))}drawEllipse(e,t,r,i){return this.drawShape(new yn(e,t,r,i))}drawPolygon(...e){let t,r=!0,i=e[0];i.points?(r=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;let s=new Qr(t);return s.closeStroke=r,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){let e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Ft.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();let t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){let e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let i=0;i<r;i++){let s=e.batches[i],n=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),h=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),d={vertexData:a,blendMode:t,indices:u,uvs:h,_batchRGB:xt.shared.setValue(n).toRgbArray(),_tintRGB:n,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=d}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){let i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){let t=this._resolveDirectShader(e),r=this._geometry,i=this.worldAlpha,s=t.uniforms,n=r.drawCalls;s.translationMatrix=this.transform.worldTransform,xt.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let a=0,h=n.length;a<h;a++)this._renderDrawCallDirect(e,r.drawCalls[a])}_renderDrawCallDirect(e,t){let{texArray:r,type:i,size:s,start:n}=t,a=r.count;for(let h=0;h<a;h++)e.texture.bind(r.elements[h],h);e.geometry.draw(i,s,n)}_resolveDirectShader(e){let t=this.shader,r=this.pluginName;if(!t){if(!Ig[r]){let{maxTextures:i}=e.plugins[r],s=new Int32Array(i);for(let h=0;h<i;h++)s[h]=h;let n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Tt,default:_e.from({uSamplers:s},!0)},a=e.plugins[r]._shader.program;Ig[r]=new xe(a,n)}t=Ig[r]}return t}_calculateBounds(){this.finishPoly();let e=this._geometry;if(!e.graphicsData.length)return;let{minX:t,minY:r,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,r,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Xc._TEMP_POINT),this._geometry.containsPoint(Xc._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){let t=this.batches[e];t._tintRGB=xt.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){let e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;let t=this.transform.worldTransform,r=t.a,i=t.b,s=t.c,n=t.d,a=t.tx,h=t.ty,u=this._geometry.points,d=this.vertexData,f=0;for(let m=0;m<u.length;m+=2){let _=u[m],x=u[m+1];d[f++]=r*_+s*x+a,d[f++]=n*x+i*_+h}}closePath(){let e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}},Pi=Xc;Pi.curves=zr;Pi._TEMP_POINT=new mt});var jc=T(()=>{Gc();Ys();gb();Cg();Rg();zc();Pg();Il();Pl();Mc();Bc();kc();Nc();Lc();Fc();Oc()});var Bl,Mg=T(()=>{zs();Bl=class extends ii{constructor(t=100,r=100,i=10,s=10){super(),this.segWidth=i,this.segHeight=s,this.width=t,this.height=r,this.build()}build(){let t=this.segWidth*this.segHeight,r=[],i=[],s=[],n=this.segWidth-1,a=this.segHeight-1,h=this.width/n,u=this.height/a;for(let f=0;f<t;f++){let m=f%this.segWidth,_=f/this.segWidth|0;r.push(m*h,_*u),i.push(m/n,_/a)}let d=n*a;for(let f=0;f<d;f++){let m=f%n,_=f/n|0,x=_*this.segWidth+m,y=_*this.segWidth+m+1,b=(_+1)*this.segWidth+m,S=(_+1)*this.segWidth+m+1;s.push(x,y,b,y,S,b)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}});var Nl,Dg=T(()=>{zs();Nl=class extends ii{constructor(t=200,r,i=0){super(new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6)),this.points=r,this._width=t,this.textureScale=i,this.build()}get width(){return this._width}build(){let t=this.points;if(!t)return;let r=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),s=this.getIndex();if(t.length<1)return;r.data.length/4!==t.length&&(r.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),s.data=new Uint16Array((t.length-1)*6));let n=i.data,a=s.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;let h=0,u=t[0],d=this._width*this.textureScale,f=t.length;for(let _=0;_<f;_++){let x=_*4;if(this.textureScale>0){let y=u.x-t[_].x,b=u.y-t[_].y,S=Math.sqrt(y*y+b*b);u=t[_],h+=S/d}else h=_/(f-1);n[x]=h,n[x+1]=0,n[x+2]=h,n[x+3]=1}let m=0;for(let _=0;_<f-1;_++){let x=_*2;a[m++]=x,a[m++]=x+1,a[m++]=x+2,a[m++]=x+2,a[m++]=x+1,a[m++]=x+3}i.update(),s.update(),this.updateVertices()}updateVertices(){let t=this.points;if(t.length<1)return;let r=t[0],i,s=0,n=0,a=this.buffers[0].data,h=t.length,u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let d=0;d<h;d++){let f=t[d],m=d*4;d<t.length-1?i=t[d+1]:i=f,n=-(i.x-r.x),s=i.y-r.y;let _=(1-d/(h-1))*10;_>1&&(_=1);let x=Math.sqrt(s*s+n*n);x<1e-6?(s=0,n=0):(s/=x,n/=x,s*=u,n*=u),a[m]=f.x+s,a[m+1]=f.y+n,a[m+2]=f.x-s,a[m+3]=f.y-n,r=f}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}});var Ol,Bg=T(()=>{Z();zs();Mg();Ol=class extends ri{constructor(t,r,i){let s=new Bl(t.width,t.height,r,i),n=new Gr($.WHITE);super(s,n),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;let t=this.geometry,{width:r,height:i}=this.shader.texture;this.autoResize&&(t.width!==r||t.height!==i)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}});var Vc,Ll,_b=T(()=>{Z();Bg();Vc=10,Ll=class extends Ol{constructor(t,r,i,s,n){super($.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=r??t.defaultBorders?.left??Vc,this._rightWidth=s??t.defaultBorders?.right??Vc,this._topHeight=i??t.defaultBorders?.top??Vc,this._bottomHeight=n??t.defaultBorders?.bottom??Vc,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){let t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){let t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){let t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,s=this._height>i?1:this._height/i;return Math.min(r,s)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){let t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;let i=1/this._origWidth,s=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=i*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-i*this._rightWidth,r[9]=r[11]=r[13]=r[15]=s*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}});var kl,xb=T(()=>{Z();zs();kl=class extends ri{constructor(t=$.EMPTY,r,i,s,n){let a=new ii(r,i,s);a.getBuffer("aVertexPosition").static=!1;let h=new Gr(t);super(a,h,null,n),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}});var Fl,vb=T(()=>{Z();zs();Dg();Fl=class extends ri{constructor(t,r,i=0){let s=new Nl(t.height,r,i),n=new Gr(t);i>0&&(t.baseTexture.wrapMode=ur.REPEAT),super(s,n),this.autoUpdate=!0}_render(t){let r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),super._render(t)}}});var Ng=T(()=>{Mg();Dg();_b();xb();Bg();vb()});var Ul,yb=T(()=>{Z();We();Ul=class extends Ut{constructor(t=1500,r,i=16384,s=!1){super();let n=16384;i>n&&(i=n),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=pt.NORMAL,this.autoResize=s,this.roundPixels=!0,this.baseTexture=null,this.setProperties(r),this._tintColor=new xt(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){let r=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}});var Gl,bb=T(()=>{Z();Gl=class{constructor(t,r,i){this.geometry=new je,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<t.length;++s){let n=t[s];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||at.FLOAT,offset:n.offset},r[s]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){let t=this.geometry,r=0;this.indexBuffer=new Dt(Q.createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let a=0;a<this.dynamicProperties.length;++a){let h=this.dynamicProperties[a];h.offset=r,r+=h.size,this.dynamicStride+=h.size}let i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Dt(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let a=0;a<this.staticProperties.length;++a){let h=this.staticProperties[a];h.offset=s,s+=h.size,this.staticStride+=h.size}let n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new Dt(this.staticData,!0,!1);for(let a=0;a<this.dynamicProperties.length;++a){let h=this.dynamicProperties[a];t.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===at.UNSIGNED_BYTE,h.type,this.dynamicStride*4,h.offset*4)}for(let a=0;a<this.staticProperties.length;++a){let h=this.staticProperties[a];t.addAttribute(h.attributeName,this.staticBuffer,0,h.type===at.UNSIGNED_BYTE,h.type,this.staticStride*4,h.offset*4)}}uploadDynamic(t,r,i){for(let s=0;s<this.dynamicProperties.length;s++){let n=this.dynamicProperties[s];n.uploadFunction(t,r,i,n.type===at.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,r,i){for(let s=0;s<this.staticProperties.length;s++){let n=this.staticProperties[s];n.uploadFunction(t,r,i,n.type===at.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}});var Tb,Eb=T(()=>{Tb=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`});var Sb,wb=T(()=>{Sb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`});var Hl,Ab=T(()=>{Z();bb();Eb();wb();Hl=class extends Zr{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Tt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:at.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=xe.from(Sb,Tb,{}),this.state=ge.for2d()}render(t){let r=t.children,i=t._maxSize,s=t._batchSize,n=this.renderer,a=r.length;if(a===0)return;a>i&&!t.autoResize&&(a=i);let h=t._buffers;h||(h=t._buffers=this.generateBuffers(t));let u=r[0]._texture.baseTexture,d=u.alphaMode>0;this.state.blendMode=Q.correctBlendMode(t.blendMode,d),n.state.set(this.state);let f=n.gl,m=t.worldTransform.copyTo(this.tempMatrix);m.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=m.toArray(!0),this.shader.uniforms.uColor=xt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,d).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);let _=!1;for(let x=0,y=0;x<a;x+=s,y+=1){let b=a-x;b>s&&(b=s),y>=h.length&&h.push(this._generateOneMoreBuffer(t));let S=h[y];S.uploadDynamic(r,x,b);let C=t._bufferUpdateIDs[y]||0;_=_||S._updateID<C,_&&(S._updateID=t._updateID,S.uploadStatic(r,x,b)),n.geometry.bind(S.geometry),f.drawElements(f.TRIANGLES,b*6,f.UNSIGNED_SHORT,0)}}generateBuffers(t){let r=[],i=t._maxSize,s=t._batchSize,n=t._properties;for(let a=0;a<i;a+=s)r.push(new Gl(this.properties,n,s));return r}_generateOneMoreBuffer(t){let r=t._batchSize,i=t._properties;return new Gl(this.properties,i,r)}uploadVertices(t,r,i,s,n,a){let h=0,u=0,d=0,f=0;for(let m=0;m<i;++m){let _=t[r+m],x=_._texture,y=_.scale.x,b=_.scale.y,S=x.trim,C=x.orig;S?(u=S.x-_.anchor.x*C.width,h=u+S.width,f=S.y-_.anchor.y*C.height,d=f+S.height):(h=C.width*(1-_.anchor.x),u=C.width*-_.anchor.x,d=C.height*(1-_.anchor.y),f=C.height*-_.anchor.y),s[a]=u*y,s[a+1]=f*b,s[a+n]=h*y,s[a+n+1]=f*b,s[a+n*2]=h*y,s[a+n*2+1]=d*b,s[a+n*3]=u*y,s[a+n*3+1]=d*b,a+=n*4}}uploadPosition(t,r,i,s,n,a){for(let h=0;h<i;h++){let u=t[r+h].position;s[a]=u.x,s[a+1]=u.y,s[a+n]=u.x,s[a+n+1]=u.y,s[a+n*2]=u.x,s[a+n*2+1]=u.y,s[a+n*3]=u.x,s[a+n*3+1]=u.y,a+=n*4}}uploadRotation(t,r,i,s,n,a){for(let h=0;h<i;h++){let u=t[r+h].rotation;s[a]=u,s[a+n]=u,s[a+n*2]=u,s[a+n*3]=u,a+=n*4}}uploadUvs(t,r,i,s,n,a){for(let h=0;h<i;++h){let u=t[r+h]._texture._uvs;u?(s[a]=u.x0,s[a+1]=u.y0,s[a+n]=u.x1,s[a+n+1]=u.y1,s[a+n*2]=u.x2,s[a+n*2+1]=u.y2,s[a+n*3]=u.x3,s[a+n*3+1]=u.y3,a+=n*4):(s[a]=0,s[a+1]=0,s[a+n]=0,s[a+n+1]=0,s[a+n*2]=0,s[a+n*2+1]=0,s[a+n*3]=0,s[a+n*3+1]=0,a+=n*4)}}uploadTint(t,r,i,s,n,a){for(let h=0;h<i;++h){let u=t[r+h],d=xt.shared.setValue(u._tintRGB).toPremultiplied(u.alpha,u.texture.baseTexture.alphaMode>0);s[a]=d,s[a+n]=d,s[a+n*2]=d,s[a+n*3]=d,a+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}};Hl.extension={name:"particle",type:N.RendererPlugin};U.add(Hl)});var Og=T(()=>{yb();Ab()});var ls,Cb=T(()=>{Z();Gs();ls=class extends ve{constructor(t,r=!0){super(t[0]instanceof $?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ot.shared.add(this.update,this,mr.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;let r=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=r/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];let n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}updateTexture(){let t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){let r=[];for(let i=0;i<t.length;++i)r.push($.from(t[i]));return new ls(r)}static fromImages(t){let r=[];for(let i=0;i<t.length;++i)r.push($.from(t[i]));return new ls(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof $)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0))}}});var Lg=T(()=>{Cb()});var zl,Fn,Rb=T(()=>{Z();Gs();zl=new mt,Fn=class extends ve{constructor(t,r=100,i=100){super(t),this.tileTransform=new Bs,this._width=r,this._height=i,this.uvMatrix=this.texture.uvMatrix||new Ji(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){let r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){let t=this._width*-this._anchor._x,r=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,i,s)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ct),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,zl);let r=this._width,i=this._height,s=-r*this.anchor._x;if(zl.x>=s&&zl.x<s+r){let n=-i*this.anchor._y;if(zl.y>=n&&zl.y<n+i)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,r){let i=t instanceof $?t:$.from(t,r);return new Fn(i,r.width,r.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}});var Pb,Ib=T(()=>{Pb=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`});var Mb,Db=T(()=>{Mb=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`});var Bb,Nb=T(()=>{Bb=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`});var kg,Ob=T(()=>{kg=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`});var Lb,kb=T(()=>{Lb=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`});var Wc,Xl,Fb=T(()=>{Z();Ib();Db();Nb();Ob();kb();Wc=new Tt,Xl=class extends Zr{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Cn,this.state=ge.for2d()}contextChange(){let t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=xe.from(kg,Lb,r),this.shader=t.context.webGLVersion>1?xe.from(Mb,Pb,r):xe.from(kg,Bb,r)}render(t){let r=this.renderer,i=this.quad,s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);let n=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;s=i.uvs,s[0]=s[6]=-n,s[1]=s[3]=-a,s[2]=s[4]=1-n,s[5]=s[7]=1-a,i.invalidate();let h=t._texture,u=h.baseTexture,d=u.alphaMode>0,f=t.tileTransform.localTransform,m=t.uvMatrix,_=u.isPowerOfTwo&&h.frame.width===u.width&&h.frame.height===u.height;_&&(u._glTextures[r.CONTEXT_UID]?_=u.wrapMode!==ur.CLAMP:u.wrapMode===ur.CLAMP&&(u.wrapMode=ur.REPEAT));let x=_?this.simpleShader:this.shader,y=h.width,b=h.height,S=t._width,C=t._height;Wc.set(f.a*y/S,f.b*y/C,f.c*b/S,f.d*b/C,f.tx/S,f.ty/C),Wc.invert(),_?Wc.prepend(m.mapCoord):(x.uniforms.uMapCoord=m.mapCoord.toArray(!0),x.uniforms.uClampFrame=m.uClampFrame,x.uniforms.uClampOffset=m.uClampOffset),x.uniforms.uTransform=Wc.toArray(!0),x.uniforms.uColor=xt.shared.setValue(t.tint).premultiply(t.worldAlpha,d).toArray(x.uniforms.uColor),x.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),x.uniforms.uSampler=h,r.shader.bind(x),r.geometry.bind(i),this.state.blendMode=Q.correctBlendMode(t.blendMode,d),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}};Xl.extension={name:"tilingSprite",type:N.RendererPlugin};U.add(Xl)});var Fg=T(()=>{Rb();Fb()});var Ug,Un,Ub=T(()=>{Z();We();Ug=class{constructor(e){this.stage=new Ut,e=Object.assign({forceCanvas:!1},e),this.renderer=Rm(e),Ug._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){let r=Ug._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}},Un=Ug;Un._plugins=[];U.handleByList(N.Application,Un._plugins)});var jl,Gb=T(()=>{Z();jl=class{static init(t){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,i;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{let{clientWidth:s,clientHeight:n}=this._resizeTo;r=s,i=n}this.renderer.resize(r,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};jl.extension=N.Application;U.add(jl)});var Gg=T(()=>{Ub();Gb()});var zb=Yr((xH,Hb)=>{"use strict";var KA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Hb.exports=KA});var Wb=Yr((vH,Vb)=>{"use strict";var QA=zb();function Xb(){}function jb(){}jb.resetWarningCache=Xb;Vb.exports=function(){function e(i,s,n,a,h,u){if(u!==QA){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:jb,resetWarningCache:Xb};return r.PropTypes=r,r}});var Yb=Yr((TH,$b)=>{$b.exports=Wb()();var yH,bH});var ST={};f_(ST,{AnimatedSprite:()=>qC,AppConsumer:()=>bT,AppContext:()=>td,AppProvider:()=>yT,BitmapText:()=>XC,Container:()=>jC,Graphics:()=>VC,NineSlicePlane:()=>WC,ParticleContainer:()=>$C,PixiComponent:()=>EC,PixiFiber:()=>ni,SimpleMesh:()=>ZC,SimpleRope:()=>JC,Sprite:()=>YC,Stage:()=>FC,TYPES:()=>gr,Text:()=>KC,TilingSprite:()=>QC,applyDefaultProps:()=>Mi,createRoot:()=>vT,eventHandlers:()=>Qc,render:()=>MC,unmountComponentAtNode:()=>DC,useApp:()=>ET,useTick:()=>UC,withFilters:()=>zC,withPixiApp:()=>OC});function Ar(e){return Ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(e)}function dT(e){var t=function(r,i){if(Ar(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var n=s.call(r,i||"default");if(Ar(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}(e,"string");return Ar(t)==="symbol"?t:String(t)}function ce(e,t,r){return(t=dT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function us(e){return function(t){if(Array.isArray(t))return Hg(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(t){if(typeof t=="string")return Hg(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Hg(t,r):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ne(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]}function JA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vl(e){var t=[];if(e===void 0)return t;if(typeof e=="string")t=e.split(",");else if(typeof e=="number")t=[e];else if(Array.isArray(e))t=us(e);else{if(e===null||Ar(e)!=="object")return t;t=[e&&e?.x||0,e&&e?.y||0]}return t.filter(function(r){return!tC(r)&&!isNaN(r)}).map(Number)}function qb(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function zg(e){return e instanceof mt||e instanceof Ve}function Xg(e,t,r){if(zg(e[t])&&zg(r))e[t].copyFrom(r);else if(zg(e[t])){var i=Vl(r);ne(i!==void 0&&i.length>0&&i.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(r),Ar(r)),e[t].set(i.shift(),i.shift())}else e[t]=r}function Mi(e,t,r){var i=!1;if(ne(Ct.prototype.isPrototypeOf(e),"instance needs to be typeof `DisplayObject`, got `%s`",Ar(e)),!r.ignoreEvents)for(var s=typeof e.removeListener=="function",n=typeof e.on=="function",a=0;a<Qc.length;a++){var h=Qc[a];t[h]!==r[h]&&(i=!0,typeof t[h]=="function"&&s&&e.removeListener(h,t[h]),typeof r[h]=="function"&&n&&e.on(h,r[h]))}var u=Object.keys(r||{});if(r.overwriteProps){for(var d=0;d<u.length;d++){var f=u[d];t[f]!==r[f]&&(i=!0,Xg(e,f,r[f]))}return i}for(var m=u.filter(rC),_=0;_<m.length;_++){var x=m[_],y=r[x];r[x]!==t[x]&&(i=!0),y!==void 0?Xg(e,x,y):x in Wg?(console.warn("setting default value: ".concat(x,", from: ").concat(e[x]," to: ").concat(y," for"),e),i=!0,Xg(e,x,Wg[x])):console.warn("ignoring prop: ".concat(x,", from ").concat(e[x]," to ").concat(y," for"),e)}return i}function Js(e,t){if(e==null)return{};var r,i,s=function(a,h){if(a==null)return{};var u,d,f={},m=Object.keys(a);for(d=0;d<m.length;d++)u=m[d],h.indexOf(u)>=0||(f[u]=a[u]);return f}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Kb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function $c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kb(Object(r),!0).forEach(function(i){ce(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kb(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Qb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Zb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qb(Object(r),!0).forEach(function(i){ce(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qb(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function EC(e,t){return ne(!!e,"Expect type to be defined, got `%s`",e),ne(!gr[e],"Component `%s` could not be created, already exists in default components.",e),mT[e]=t,e}function wC(){return tT||(tT=1,SC.exports=(Jb||(Jb=1,function(e){function t(X,Y){var vt=X.length;X.push(Y);t:for(;0<vt;){var wt=vt-1>>>1,St=X[wt];if(!(0<s(St,Y)))break t;X[wt]=Y,X[vt]=St,vt=wt}}function r(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var Y=X[0],vt=X.pop();if(vt!==Y){X[0]=vt;t:for(var wt=0,St=X.length,ye=St>>>1;wt<ye;){var Zt=2*(wt+1)-1,ke=X[Zt],pe=Zt+1,Jt=X[pe];if(0>s(ke,vt))pe<St&&0>s(Jt,ke)?(X[wt]=Jt,X[pe]=vt,wt=pe):(X[wt]=ke,X[Zt]=vt,wt=Zt);else{if(!(pe<St&&0>s(Jt,vt)))break t;X[wt]=Jt,X[pe]=vt,wt=pe}}}return Y}function s(X,Y){var vt=X.sortIndex-Y.sortIndex;return vt!==0?vt:X.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;e.unstable_now=function(){return n.now()}}else{var a=Date,h=a.now();e.unstable_now=function(){return a.now()-h}}var u=[],d=[],f=1,m=null,_=3,x=!1,y=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function w(X){for(var Y=r(d);Y!==null;){if(Y.callback===null)i(d);else{if(!(Y.startTime<=X))break;i(d),Y.sortIndex=Y.expirationTime,t(u,Y)}Y=r(d)}}function R(X){if(b=!1,w(X),!y)if(r(u)!==null)y=!0,ht(tt);else{var Y=r(d);Y!==null&&st(R,Y.startTime-X)}}function tt(X,Y){y=!1,b&&(b=!1,C(it),it=-1),x=!0;var vt=_;try{for(w(Y),m=r(u);m!==null&&(!(m.expirationTime>Y)||X&&!ot());){var wt=m.callback;if(typeof wt=="function"){m.callback=null,_=m.priorityLevel;var St=wt(m.expirationTime<=Y);Y=e.unstable_now(),typeof St=="function"?m.callback=St:m===r(u)&&i(u),w(Y)}else i(u);m=r(u)}if(m!==null)var ye=!0;else{var Zt=r(d);Zt!==null&&st(R,Zt.startTime-Y),ye=!1}return ye}finally{m=null,_=vt,x=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var et,j=!1,z=null,it=-1,V=5,K=-1;function ot(){return!(e.unstable_now()-K<V)}function k(){if(z!==null){var X=e.unstable_now();K=X;var Y=!0;try{Y=z(!0,X)}finally{Y?et():(j=!1,z=null)}}else j=!1}if(typeof M=="function")et=function(){M(k)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,_t=F.port2;F.port1.onmessage=k,et=function(){_t.postMessage(null)}}else et=function(){S(k,0)};function ht(X){z=X,j||(j=!0,et())}function st(X,Y){it=S(function(){X(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,ht(tt))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(X){switch(_){case 1:case 2:case 3:var Y=3;break;default:Y=_}var vt=_;_=Y;try{return X()}finally{_=vt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,Y){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var vt=_;_=X;try{return Y()}finally{_=vt}},e.unstable_scheduleCallback=function(X,Y,vt){var wt=e.unstable_now();switch(vt=typeof vt=="object"&&vt!==null&&typeof(vt=vt.delay)=="number"&&0<vt?wt+vt:wt,X){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return X={id:f++,callback:Y,priorityLevel:X,startTime:vt,expirationTime:St=vt+St,sortIndex:-1},vt>wt?(X.sortIndex=vt,t(d,X),r(u)===null&&X===r(d)&&(b?(C(it),it=-1):b=!0,st(R,vt-wt))):(X.sortIndex=St,t(u,X),y||x||(y=!0,ht(tt))),X},e.unstable_shouldYield=ot,e.unstable_wrapCallback=function(X){var Y=_;return function(){var vt=_;_=Y;try{return X.apply(this,arguments)}finally{_=vt}}}}(iT)),iT)),Yg}function AC(){return rT||(rT=1,eT=function(e){var t={},r=se.default,i=wC(),s=Object.assign;function n(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),R=Symbol.iterator;function tt(o){return o===null||typeof o!="object"?null:typeof(o=R&&o[R]||o["@@iterator"])=="function"?o:null}function et(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case d:return"Fragment";case u:return"Portal";case m:return"Profiler";case f:return"StrictMode";case b:return"Suspense";case S:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case x:return(o.displayName||"Context")+".Consumer";case _:return(o._context.displayName||"Context")+".Provider";case y:var l=o.render;return(o=o.displayName)||(o=(o=l.displayName||l.name||"")!==""?"ForwardRef("+o+")":"ForwardRef"),o;case C:return(l=o.displayName||null)!==null?l:et(o.type)||"Memo";case M:l=o._payload,o=o._init;try{return et(o(l))}catch{}}return null}function j(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=(o=l.render).displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return et(l);case 8:return l===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function z(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do 4098&(l=o).flags&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function it(o){if(z(o)!==o)throw Error(n(188))}function V(o){var l=o.alternate;if(!l){if((l=z(o))===null)throw Error(n(188));return l!==o?null:o}for(var c=o,p=l;;){var g=c.return;if(g===null)break;var v=g.alternate;if(v===null){if((p=g.return)!==null){c=p;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===c)return it(g),o;if(v===p)return it(g),l;v=v.sibling}throw Error(n(188))}if(c.return!==p.return)c=g,p=v;else{for(var E=!1,A=g.child;A;){if(A===c){E=!0,c=g,p=v;break}if(A===p){E=!0,p=g,c=v;break}A=A.sibling}if(!E){for(A=v.child;A;){if(A===c){E=!0,c=v,p=g;break}if(A===p){E=!0,p=v,c=g;break}A=A.sibling}if(!E)throw Error(n(189))}}if(c.alternate!==p)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?o:l}function K(o){return(o=V(o))!==null?ot(o):null}function ot(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=ot(o);if(l!==null)return l;o=o.sibling}return null}function k(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){if(o.tag!==4){var l=k(o);if(l!==null)return l}o=o.sibling}return null}var F,_t=Array.isArray,ht=e.getPublicInstance,st=e.getRootHostContext,X=e.getChildHostContext,Y=e.prepareForCommit,vt=e.resetAfterCommit,wt=e.createInstance,St=e.appendInitialChild,ye=e.finalizeInitialChildren,Zt=e.prepareUpdate,ke=e.shouldSetTextContent,pe=e.createTextInstance,Jt=e.scheduleTimeout,hi=e.cancelTimeout,ds=e.noTimeout,sr=e.isPrimaryRenderer,$t=e.supportsMutation,nr=e.supportsPersistence,te=e.supportsHydration,la=e.getInstanceFromNode,Li=e.preparePortalMount,ha=e.getCurrentEventPriority,Ed=e.detachDeletedInstance,Wn=e.supportsMicrotasks,oE=e.scheduleMicrotask,ua=e.supportsTestSelectors,aE=e.findFiberRoot,lE=e.getBoundingRect,hE=e.getTextContent,ca=e.isHiddenSubtree,uE=e.matchAccessibilityRole,cE=e.setFocusIfFocusable,dE=e.setupIntersectionObserver,fE=e.appendChild,pE=e.appendChildToContainer,mE=e.commitTextUpdate,gE=e.commitMount,_E=e.commitUpdate,xE=e.insertBefore,vE=e.insertInContainerBefore,yE=e.removeChild,bE=e.removeChildFromContainer,E1=e.resetTextContent,TE=e.hideInstance,EE=e.hideTextInstance,SE=e.unhideInstance,wE=e.unhideTextInstance,AE=e.clearContainer,CE=e.cloneInstance,S1=e.createContainerChildSet,w1=e.appendChildToContainerChildSet,RE=e.finalizeContainerChildren,Sd=e.replaceContainerChildren,A1=e.cloneHiddenInstance,C1=e.cloneHiddenTextInstance,PE=e.canHydrateInstance,IE=e.canHydrateTextInstance,ME=e.canHydrateSuspenseInstance,R1=e.isSuspenseInstancePending,wd=e.isSuspenseInstanceFallback,DE=e.getSuspenseInstanceFallbackErrorDetails,BE=e.registerSuspenseInstanceRetry,lh=e.getNextHydratableSibling,NE=e.getFirstHydratableChild,OE=e.getFirstHydratableChildWithinContainer,LE=e.getFirstHydratableChildWithinSuspenseInstance,kE=e.hydrateInstance,FE=e.hydrateTextInstance,UE=e.hydrateSuspenseInstance,GE=e.getNextHydratableInstanceAfterSuspenseInstance,HE=e.commitHydratedContainer,zE=e.commitHydratedSuspenseInstance,XE=e.clearSuspenseBoundary,jE=e.clearSuspenseBoundaryFromContainer,VE=e.shouldDeleteUnhydratedTailInstances,WE=e.didNotMatchHydratedContainerTextInstance,$E=e.didNotMatchHydratedTextInstance;function da(o){if(F===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);F=l&&l[1]||""}return`
`+F+o}var Ad=!1;function Cd(o,l){if(!o||Ad)return"";Ad=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(O){var p=O}Reflect.construct(o,[],l)}else{try{l.call()}catch(O){p=O}o.call(l.prototype)}else{try{throw Error()}catch(O){p=O}o()}}catch(O){if(O&&p&&typeof O.stack=="string"){for(var g=O.stack.split(`
`),v=p.stack.split(`
`),E=g.length-1,A=v.length-1;1<=E&&0<=A&&g[E]!==v[A];)A--;for(;1<=E&&0<=A;E--,A--)if(g[E]!==v[A]){if(E!==1||A!==1)do if(E--,0>--A||g[E]!==v[A]){var I=`
`+g[E].replace(" at new "," at ");return o.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",o.displayName)),I}while(1<=E&&0<=A);break}}}finally{Ad=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?da(o):""}var YE=Object.prototype.hasOwnProperty,Rd=[],$n=-1;function fs(o){return{current:o}}function jt(o){0>$n||(o.current=Rd[$n],Rd[$n]=null,$n--)}function Gt(o,l){$n++,Rd[$n]=o.current,o.current=l}var ps={},Fe=fs(ps),or=fs(!1),sn=ps;function Yn(o,l){var c=o.type.contextTypes;if(!c)return ps;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var g,v={};for(g in c)v[g]=l[g];return p&&((o=o.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=v),v}function _r(o){return(o=o.childContextTypes)!=null}function Pd(){jt(or),jt(Fe)}function P1(o,l,c){if(Fe.current!==ps)throw Error(n(168));Gt(Fe,l),Gt(or,c)}function I1(o,l,c){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return c;for(var g in p=p.getChildContext())if(!(g in l))throw Error(n(108,j(o)||"Unknown",g));return s({},c,p)}function hh(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ps,sn=Fe.current,Gt(Fe,o),Gt(or,or.current),!0}function M1(o,l,c){var p=o.stateNode;if(!p)throw Error(n(169));c?(o=I1(o,l,sn),p.__reactInternalMemoizedMergedChildContext=o,jt(or),jt(Fe),Gt(Fe,o)):jt(or),Gt(or,c)}var Xr=Math.clz32?Math.clz32:function(o){return(o>>>=0)===0?32:31-(qE(o)/KE|0)|0},qE=Math.log,KE=Math.LN2,Id=64,Md=4194304;function fa(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&o;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&o;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uh(o,l){var c=o.pendingLanes;if(c===0)return 0;var p=0,g=o.suspendedLanes,v=o.pingedLanes,E=268435455&c;if(E!==0){var A=E&~g;A!==0?p=fa(A):(v&=E)!==0&&(p=fa(v))}else(E=c&~g)!==0?p=fa(E):v!==0&&(p=fa(v));if(p===0)return 0;if(l!==0&&l!==p&&!(l&g)&&((g=p&-p)>=(v=l&-l)||g===16&&4194240&v))return l;if(4&p&&(p|=16&c),(l=o.entangledLanes)!==0)for(o=o.entanglements,l&=p;0<l;)g=1<<(c=31-Xr(l)),p|=o[c],l&=~g;return p}function QE(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;default:return-1}}function Dd(o){return(o=-1073741825&o.pendingLanes)!==0?o:1073741824&o?1073741824:0}function D1(){var o=Id;return!(4194240&(Id<<=1))&&(Id=64),o}function Bd(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function pa(o,l,c){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),(o=o.eventTimes)[l=31-Xr(l)]=c}function Nd(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var p=31-Xr(c),g=1<<p;g&l|o[p]&l&&(o[p]|=l),c&=~g}}var Rt=0;function B1(o){return 1<(o&=-o)?4<o?268435455&o?16:536870912:4:1}var Od=i.unstable_scheduleCallback,N1=i.unstable_cancelCallback,ZE=i.unstable_shouldYield,JE=i.unstable_requestPaint,be=i.unstable_now,Ld=i.unstable_ImmediatePriority,tS=i.unstable_UserBlockingPriority,O1=i.unstable_NormalPriority,eS=i.unstable_IdlePriority,ch=null,ui=null,jr=typeof Object.is=="function"?Object.is:function(o,l){return o===l&&(o!==0||1/o==1/l)||o!=o&&l!=l},ki=null,dh=!1,kd=!1;function L1(o){ki===null?ki=[o]:ki.push(o)}function ci(){if(!kd&&ki!==null){kd=!0;var o=0,l=Rt;try{var c=ki;for(Rt=1;o<c.length;o++){var p=c[o];do p=p(!0);while(p!==null)}ki=null,dh=!1}catch(g){throw ki!==null&&(ki=ki.slice(o+1)),Od(Ld,ci),g}finally{Rt=l,kd=!1}}return null}var qn=[],Kn=0,fh=null,ph=0,Rr=[],Pr=0,nn=null,di=1,Fi="";function on(o,l){qn[Kn++]=ph,qn[Kn++]=fh,fh=o,ph=l}function k1(o,l,c){Rr[Pr++]=di,Rr[Pr++]=Fi,Rr[Pr++]=nn,nn=o;var p=di;o=Fi;var g=32-Xr(p)-1;p&=~(1<<g),c+=1;var v=32-Xr(l)+g;if(30<v){var E=g-g%5;v=(p&(1<<E)-1).toString(32),p>>=E,g-=E,di=1<<32-Xr(l)+g|c<<g|p,Fi=v+o}else di=1<<v|c<<g|p,Fi=o}function Fd(o){o.return!==null&&(on(o,1),k1(o,1,0))}function Ud(o){for(;o===fh;)fh=qn[--Kn],qn[Kn]=null,ph=qn[--Kn],qn[Kn]=null;for(;o===nn;)nn=Rr[--Pr],Rr[Pr]=null,Fi=Rr[--Pr],Rr[Pr]=null,di=Rr[--Pr],Rr[Pr]=null}var xr=null,Ir=null,Vt=!1,ma=!1,Vr=null;function F1(o,l){var c=Or(5,null,null,0);c.elementType="DELETED",c.stateNode=l,c.return=o,(l=o.deletions)===null?(o.deletions=[c],o.flags|=16):l.push(c)}function U1(o,l){switch(o.tag){case 5:return(l=PE(l,o.type,o.pendingProps))!==null&&(o.stateNode=l,xr=o,Ir=NE(l),!0);case 6:return(l=IE(l,o.pendingProps))!==null&&(o.stateNode=l,xr=o,Ir=null,!0);case 13:if((l=ME(l))!==null){var c=nn!==null?{id:di,overflow:Fi}:null;return o.memoizedState={dehydrated:l,treeContext:c,retryLane:1073741824},(c=Or(18,null,null,0)).stateNode=l,c.return=o,o.child=c,xr=o,Ir=null,!0}return!1;default:return!1}}function Gd(o){return(1&o.mode)!=0&&(128&o.flags)==0}function Hd(o){if(Vt){var l=Ir;if(l){var c=l;if(!U1(o,l)){if(Gd(o))throw Error(n(418));l=lh(c);var p=xr;l&&U1(o,l)?F1(p,c):(o.flags=-4097&o.flags|2,Vt=!1,xr=o)}}else{if(Gd(o))throw Error(n(418));o.flags=-4097&o.flags|2,Vt=!1,xr=o}}}function G1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xr=o}function mh(o){if(!te||o!==xr)return!1;if(!Vt)return G1(o),Vt=!0,!1;if(o.tag!==3&&(o.tag!==5||VE(o.type)&&!ke(o.type,o.memoizedProps))){var l=Ir;if(l){if(Gd(o))throw H1(),Error(n(418));for(;l;)F1(o,l),l=lh(l)}}if(G1(o),o.tag===13){if(!te)throw Error(n(316));if(!(o=(o=o.memoizedState)!==null?o.dehydrated:null))throw Error(n(317));Ir=GE(o)}else Ir=xr?lh(o.stateNode):null;return!0}function H1(){for(var o=Ir;o;)o=lh(o)}function Qn(){te&&(Ir=xr=null,ma=Vt=!1)}function zd(o){Vr===null?Vr=[o]:Vr.push(o)}var rS=a.ReactCurrentBatchConfig;function gh(o,l){if(jr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),p=Object.keys(l);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var g=c[p];if(!YE.call(l,g)||!jr(o[g],l[g]))return!1}return!0}function iS(o){switch(o.tag){case 5:return da(o.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return o=Cd(o.type,!1);case 11:return o=Cd(o.type.render,!1);case 1:return o=Cd(o.type,!0);default:return""}}function Wr(o,l){if(o&&o.defaultProps){for(var c in l=s({},l),o=o.defaultProps)l[c]===void 0&&(l[c]=o[c]);return l}return l}var _h=fs(null),xh=null,Zn=null,Xd=null;function jd(){Xd=Zn=xh=null}function z1(o,l,c){sr?(Gt(_h,l._currentValue),l._currentValue=c):(Gt(_h,l._currentValue2),l._currentValue2=c)}function Vd(o){var l=_h.current;jt(_h),sr?o._currentValue=l:o._currentValue2=l}function Wd(o,l,c){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===c)break;o=o.return}}function Jn(o,l){xh=o,Xd=Zn=null,(o=o.dependencies)!==null&&o.firstContext!==null&&(o.lanes&l&&(ar=!0),o.firstContext=null)}function Mr(o){var l=sr?o._currentValue:o._currentValue2;if(Xd!==o)if(o={context:o,memoizedValue:l,next:null},Zn===null){if(xh===null)throw Error(n(308));Zn=o,xh.dependencies={lanes:0,firstContext:o}}else Zn=Zn.next=o;return l}var an=null;function $d(o){an===null?an=[o]:an.push(o)}function X1(o,l,c,p){var g=l.interleaved;return g===null?(c.next=c,$d(l)):(c.next=g.next,g.next=c),l.interleaved=c,fi(o,p)}function fi(o,l){o.lanes|=l;var c=o.alternate;for(c!==null&&(c.lanes|=l),c=o,o=o.return;o!==null;)o.childLanes|=l,(c=o.alternate)!==null&&(c.childLanes|=l),c=o,o=o.return;return c.tag===3?c.stateNode:null}var ms=!1;function Yd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j1(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ui(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function gs(o,l,c){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(2&At)!=0){var g=p.pending;return g===null?l.next=l:(l.next=g.next,g.next=l),p.pending=l,fi(o,c)}return(g=p.interleaved)===null?(l.next=l,$d(p)):(l.next=g.next,g.next=l),p.interleaved=l,fi(o,c)}function vh(o,l,c){if((l=l.updateQueue)!==null&&(l=l.shared,(4194240&c)!=0)){var p=l.lanes;c|=p&=o.pendingLanes,l.lanes=c,Nd(o,c)}}function V1(o,l){var c=o.updateQueue,p=o.alternate;if(p!==null&&c===(p=p.updateQueue)){var g=null,v=null;if((c=c.firstBaseUpdate)!==null){do{var E={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};v===null?g=v=E:v=v.next=E,c=c.next}while(c!==null);v===null?g=v=l:v=v.next=l}else g=v=l;return c={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:p.shared,effects:p.effects},void(o.updateQueue=c)}(o=c.lastBaseUpdate)===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}function yh(o,l,c,p){var g=o.updateQueue;ms=!1;var v=g.firstBaseUpdate,E=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var I=A,O=I.next;I.next=null,E===null?v=O:E.next=O,E=I;var G=o.alternate;G!==null&&(A=(G=G.updateQueue).lastBaseUpdate)!==E&&(A===null?G.firstBaseUpdate=O:A.next=O,G.lastBaseUpdate=I)}if(v!==null){var rt=g.baseState;for(E=0,G=O=I=null,A=v;;){var L=A.lane,q=A.eventTime;if((p&L)===L){G!==null&&(G=G.next={eventTime:q,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});t:{var ut=o,Et=A;switch(L=l,q=c,Et.tag){case 1:if(typeof(ut=Et.payload)=="function"){rt=ut.call(q,rt,L);break t}rt=ut;break t;case 3:ut.flags=-65537&ut.flags|128;case 0:if((L=typeof(ut=Et.payload)=="function"?ut.call(q,rt,L):ut)==null)break t;rt=s({},rt,L);break t;case 2:ms=!0}}A.callback!==null&&A.lane!==0&&(o.flags|=64,(L=g.effects)===null?g.effects=[A]:L.push(A))}else q={eventTime:q,lane:L,tag:A.tag,payload:A.payload,callback:A.callback,next:null},G===null?(O=G=q,I=rt):G=G.next=q,E|=L;if((A=A.next)===null){if((A=g.shared.pending)===null)break;A=(L=A).next,L.next=null,g.lastBaseUpdate=L,g.shared.pending=null}}if(G===null&&(I=rt),g.baseState=I,g.firstBaseUpdate=O,g.lastBaseUpdate=G,(l=g.shared.interleaved)!==null){g=l;do E|=g.lane,g=g.next;while(g!==l)}else v===null&&(g.shared.lanes=0);hn|=E,o.lanes=E,o.memoizedState=rt}}function W1(o,l,c){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],g=p.callback;if(g!==null){if(p.callback=null,p=c,typeof g!="function")throw Error(n(191,g));g.call(p)}}}var $1=new r.Component().refs;function qd(o,l,c,p){c=(c=c(p,l=o.memoizedState))==null?l:s({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var bh={isMounted:function(o){return!!(o=o._reactInternals)&&z(o)===o},enqueueSetState:function(o,l,c){o=o._reactInternals;var p=He(),g=ys(o),v=Ui(p,g);v.payload=l,c!=null&&(v.callback=c),(l=gs(o,v,g))!==null&&(Nr(l,o,g,p),vh(l,o,g))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var p=He(),g=ys(o),v=Ui(p,g);v.tag=1,v.payload=l,c!=null&&(v.callback=c),(l=gs(o,v,g))!==null&&(Nr(l,o,g,p),vh(l,o,g))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=He(),p=ys(o),g=Ui(c,p);g.tag=2,l!=null&&(g.callback=l),(l=gs(o,g,p))!==null&&(Nr(l,o,p,c),vh(l,o,p))}};function Y1(o,l,c,p,g,v,E){return typeof(o=o.stateNode).shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,v,E):!l.prototype||!l.prototype.isPureReactComponent||!gh(c,p)||!gh(g,v)}function q1(o,l,c){var p=!1,g=ps,v=l.contextType;return typeof v=="object"&&v!==null?v=Mr(v):(g=_r(l)?sn:Fe.current,v=(p=(p=l.contextTypes)!=null)?Yn(o,g):ps),l=new l(c,v),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=bh,o.stateNode=l,l._reactInternals=o,p&&((o=o.stateNode).__reactInternalMemoizedUnmaskedChildContext=g,o.__reactInternalMemoizedMaskedChildContext=v),l}function K1(o,l,c,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,p),l.state!==o&&bh.enqueueReplaceState(l,l.state,null)}function Kd(o,l,c,p){var g=o.stateNode;g.props=c,g.state=o.memoizedState,g.refs=$1,Yd(o);var v=l.contextType;typeof v=="object"&&v!==null?g.context=Mr(v):(v=_r(l)?sn:Fe.current,g.context=Yn(o,v)),g.state=o.memoizedState,typeof(v=l.getDerivedStateFromProps)=="function"&&(qd(o,l,v,c),g.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(l=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),l!==g.state&&bh.enqueueReplaceState(g,g.state,null),yh(o,c,g,p),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308)}function ga(o,l,c){if((o=c.ref)!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner){if(c.tag!==1)throw Error(n(309));var p=c.stateNode}if(!p)throw Error(n(147,o));var g=p,v=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===v?l.ref:(l=function(E){var A=g.refs;A===$1&&(A=g.refs={}),E===null?delete A[v]:A[v]=E},l._stringRef=v,l)}if(typeof o!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,o))}return o}function Th(o,l){throw o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function Q1(o){return(0,o._init)(o._payload)}function Z1(o){function l(H,P){if(o){var D=H.deletions;D===null?(H.deletions=[P],H.flags|=16):D.push(P)}}function c(H,P){if(!o)return null;for(;P!==null;)l(H,P),P=P.sibling;return null}function p(H,P){for(H=new Map;P!==null;)P.key!==null?H.set(P.key,P):H.set(P.index,P),P=P.sibling;return H}function g(H,P){return(H=Ts(H,P)).index=0,H.sibling=null,H}function v(H,P,D){return H.index=D,o?(D=H.alternate)!==null?(D=D.index)<P?(H.flags|=2,P):D:(H.flags|=2,P):(H.flags|=1048576,P)}function E(H){return o&&H.alternate===null&&(H.flags|=2),H}function A(H,P,D,W){return P===null||P.tag!==6?((P=kf(D,H.mode,W)).return=H,P):((P=g(P,D)).return=H,P)}function I(H,P,D,W){var gt=D.type;return gt===d?G(H,P,D.props.children,W,D.key):P!==null&&(P.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===M&&Q1(gt)===P.type)?((W=g(P,D.props)).ref=ga(H,P,D),W.return=H,W):((W=Yh(D.type,D.key,D.props,null,H.mode,W)).ref=ga(H,P,D),W.return=H,W)}function O(H,P,D,W){return P===null||P.tag!==4||P.stateNode.containerInfo!==D.containerInfo||P.stateNode.implementation!==D.implementation?((P=Ff(D,H.mode,W)).return=H,P):((P=g(P,D.children||[])).return=H,P)}function G(H,P,D,W,gt){return P===null||P.tag!==7?((P=dn(D,H.mode,W,gt)).return=H,P):((P=g(P,D)).return=H,P)}function rt(H,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return(P=kf(""+P,H.mode,D)).return=H,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case h:return(D=Yh(P.type,P.key,P.props,null,H.mode,D)).ref=ga(H,null,P),D.return=H,D;case u:return(P=Ff(P,H.mode,D)).return=H,P;case M:return rt(H,(0,P._init)(P._payload),D)}if(_t(P)||tt(P))return(P=dn(P,H.mode,D,null)).return=H,P;Th(H,P)}return null}function L(H,P,D,W){var gt=P!==null?P.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return gt!==null?null:A(H,P,""+D,W);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case h:return D.key===gt?I(H,P,D,W):null;case u:return D.key===gt?O(H,P,D,W):null;case M:return L(H,P,(gt=D._init)(D._payload),W)}if(_t(D)||tt(D))return gt!==null?null:G(H,P,D,W,null);Th(H,D)}return null}function q(H,P,D,W,gt){if(typeof W=="string"&&W!==""||typeof W=="number")return A(P,H=H.get(D)||null,""+W,gt);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case h:return I(P,H=H.get(W.key===null?D:W.key)||null,W,gt);case u:return O(P,H=H.get(W.key===null?D:W.key)||null,W,gt);case M:return q(H,P,D,(0,W._init)(W._payload),gt)}if(_t(W)||tt(W))return G(P,H=H.get(D)||null,W,gt,null);Th(P,W)}return null}function ut(H,P,D,W){for(var gt=null,It=null,dt=P,Pt=P=0,Ie=null;dt!==null&&Pt<D.length;Pt++){dt.index>Pt?(Ie=dt,dt=null):Ie=dt.sibling;var Mt=L(H,dt,D[Pt],W);if(Mt===null){dt===null&&(dt=Ie);break}o&&dt&&Mt.alternate===null&&l(H,dt),P=v(Mt,P,Pt),It===null?gt=Mt:It.sibling=Mt,It=Mt,dt=Ie}if(Pt===D.length)return c(H,dt),Vt&&on(H,Pt),gt;if(dt===null){for(;Pt<D.length;Pt++)(dt=rt(H,D[Pt],W))!==null&&(P=v(dt,P,Pt),It===null?gt=dt:It.sibling=dt,It=dt);return Vt&&on(H,Pt),gt}for(dt=p(H,dt);Pt<D.length;Pt++)(Ie=q(dt,H,Pt,D[Pt],W))!==null&&(o&&Ie.alternate!==null&&dt.delete(Ie.key===null?Pt:Ie.key),P=v(Ie,P,Pt),It===null?gt=Ie:It.sibling=Ie,It=Ie);return o&&dt.forEach(function(Es){return l(H,Es)}),Vt&&on(H,Pt),gt}function Et(H,P,D,W){var gt=tt(D);if(typeof gt!="function")throw Error(n(150));if((D=gt.call(D))==null)throw Error(n(151));for(var It=gt=null,dt=P,Pt=P=0,Ie=null,Mt=D.next();dt!==null&&!Mt.done;Pt++,Mt=D.next()){dt.index>Pt?(Ie=dt,dt=null):Ie=dt.sibling;var Es=L(H,dt,Mt.value,W);if(Es===null){dt===null&&(dt=Ie);break}o&&dt&&Es.alternate===null&&l(H,dt),P=v(Es,P,Pt),It===null?gt=Es:It.sibling=Es,It=Es,dt=Ie}if(Mt.done)return c(H,dt),Vt&&on(H,Pt),gt;if(dt===null){for(;!Mt.done;Pt++,Mt=D.next())(Mt=rt(H,Mt.value,W))!==null&&(P=v(Mt,P,Pt),It===null?gt=Mt:It.sibling=Mt,It=Mt);return Vt&&on(H,Pt),gt}for(dt=p(H,dt);!Mt.done;Pt++,Mt=D.next())(Mt=q(dt,H,Pt,Mt.value,W))!==null&&(o&&Mt.alternate!==null&&dt.delete(Mt.key===null?Pt:Mt.key),P=v(Mt,P,Pt),It===null?gt=Mt:It.sibling=Mt,It=Mt);return o&&dt.forEach(function(CS){return l(H,CS)}),Vt&&on(H,Pt),gt}return function H(P,D,W,gt){if(typeof W=="object"&&W!==null&&W.type===d&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case h:t:{for(var It=W.key,dt=D;dt!==null;){if(dt.key===It){if((It=W.type)===d){if(dt.tag===7){c(P,dt.sibling),(D=g(dt,W.props.children)).return=P,P=D;break t}}else if(dt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===M&&Q1(It)===dt.type){c(P,dt.sibling),(D=g(dt,W.props)).ref=ga(P,dt,W),D.return=P,P=D;break t}c(P,dt);break}l(P,dt),dt=dt.sibling}W.type===d?((D=dn(W.props.children,P.mode,gt,W.key)).return=P,P=D):((gt=Yh(W.type,W.key,W.props,null,P.mode,gt)).ref=ga(P,D,W),gt.return=P,P=gt)}return E(P);case u:t:{for(dt=W.key;D!==null;){if(D.key===dt){if(D.tag===4&&D.stateNode.containerInfo===W.containerInfo&&D.stateNode.implementation===W.implementation){c(P,D.sibling),(D=g(D,W.children||[])).return=P,P=D;break t}c(P,D);break}l(P,D),D=D.sibling}(D=Ff(W,P.mode,gt)).return=P,P=D}return E(P);case M:return H(P,D,(dt=W._init)(W._payload),gt)}if(_t(W))return ut(P,D,W,gt);if(tt(W))return Et(P,D,W,gt);Th(P,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,D!==null&&D.tag===6?(c(P,D.sibling),(D=g(D,W)).return=P,P=D):(c(P,D),(D=kf(W,P.mode,gt)).return=P,P=D),E(P)):c(P,D)}}var to=Z1(!0),J1=Z1(!1),_a={},Dr=fs(_a),xa=fs(_a),eo=fs(_a);function pi(o){if(o===_a)throw Error(n(174));return o}function Qd(o,l){Gt(eo,l),Gt(xa,o),Gt(Dr,_a),o=st(l),jt(Dr),Gt(Dr,o)}function ro(){jt(Dr),jt(xa),jt(eo)}function t0(o){var l=pi(eo.current),c=pi(Dr.current);c!==(l=X(c,o.type,l))&&(Gt(xa,o),Gt(Dr,l))}function Zd(o){xa.current===o&&(jt(Dr),jt(xa))}var ee=fs(0);function Eh(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&((c=c.dehydrated)===null||R1(c)||wd(c)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(128&l.flags)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Jd=[];function tf(){for(var o=0;o<Jd.length;o++){var l=Jd[o];sr?l._workInProgressVersionPrimary=null:l._workInProgressVersionSecondary=null}Jd.length=0}var Sh=a.ReactCurrentDispatcher,ef=a.ReactCurrentBatchConfig,ln=0,Yt=null,Te=null,Ee=null,wh=!1,va=!1,ya=0,sS=0;function Ue(){throw Error(n(321))}function rf(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!jr(o[c],l[c]))return!1;return!0}function sf(o,l,c,p,g,v){if(ln=v,Yt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Sh.current=o===null||o.memoizedState===null?lS:hS,o=c(p,g),va){v=0;do{if(va=!1,ya=0,25<=v)throw Error(n(301));v+=1,Ee=Te=null,l.updateQueue=null,Sh.current=uS,o=c(p,g)}while(va)}if(Sh.current=Rh,l=Te!==null&&Te.next!==null,ln=0,Ee=Te=Yt=null,wh=!1,l)throw Error(n(300));return o}function nf(){var o=ya!==0;return ya=0,o}function mi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?Yt.memoizedState=Ee=o:Ee=Ee.next=o,Ee}function Br(){if(Te===null){var o=Yt.alternate;o=o!==null?o.memoizedState:null}else o=Te.next;var l=Ee===null?Yt.memoizedState:Ee.next;if(l!==null)Ee=l,Te=o;else{if(o===null)throw Error(n(310));o={memoizedState:(Te=o).memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ee===null?Yt.memoizedState=Ee=o:Ee=Ee.next=o}return Ee}function ba(o,l){return typeof l=="function"?l(o):l}function of(o){var l=Br(),c=l.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=o;var p=Te,g=p.baseQueue,v=c.pending;if(v!==null){if(g!==null){var E=g.next;g.next=v.next,v.next=E}p.baseQueue=g=v,c.pending=null}if(g!==null){v=g.next,p=p.baseState;var A=E=null,I=null,O=v;do{var G=O.lane;if((ln&G)===G)I!==null&&(I=I.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),p=O.hasEagerState?O.eagerState:o(p,O.action);else{var rt={lane:G,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};I===null?(A=I=rt,E=p):I=I.next=rt,Yt.lanes|=G,hn|=G}O=O.next}while(O!==null&&O!==v);I===null?E=p:I.next=A,jr(p,l.memoizedState)||(ar=!0),l.memoizedState=p,l.baseState=E,l.baseQueue=I,c.lastRenderedState=p}if((o=c.interleaved)!==null){g=o;do v=g.lane,Yt.lanes|=v,hn|=v,g=g.next;while(g!==o)}else g===null&&(c.lanes=0);return[l.memoizedState,c.dispatch]}function af(o){var l=Br(),c=l.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=o;var p=c.dispatch,g=c.pending,v=l.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do v=o(v,E.action),E=E.next;while(E!==g);jr(v,l.memoizedState)||(ar=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),c.lastRenderedState=v}return[v,p]}function e0(){}function r0(o,l){var c=Yt,p=Br(),g=l(),v=!jr(p.memoizedState,g);if(v&&(p.memoizedState=g,ar=!0),p=p.queue,lf(n0.bind(null,c,p,o),[o]),p.getSnapshot!==l||v||Ee!==null&&1&Ee.memoizedState.tag){if(c.flags|=2048,Ta(9,s0.bind(null,c,p,g,l),void 0,null),Se===null)throw Error(n(349));30&ln||i0(c,l,g)}return g}function i0(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},(l=Yt.updateQueue)===null?(l={lastEffect:null,stores:null},Yt.updateQueue=l,l.stores=[o]):(c=l.stores)===null?l.stores=[o]:c.push(o)}function s0(o,l,c,p){l.value=c,l.getSnapshot=p,o0(l)&&a0(o)}function n0(o,l,c){return c(function(){o0(l)&&a0(o)})}function o0(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!jr(o,c)}catch{return!0}}function a0(o){var l=fi(o,1);l!==null&&Nr(l,o,1,-1)}function l0(o){var l=mi();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:o},l.queue=o,o=o.dispatch=aS.bind(null,Yt,o),[l.memoizedState,o]}function Ta(o,l,c,p){return o={tag:o,create:l,destroy:c,deps:p,next:null},(l=Yt.updateQueue)===null?(l={lastEffect:null,stores:null},Yt.updateQueue=l,l.lastEffect=o.next=o):(c=l.lastEffect)===null?l.lastEffect=o.next=o:(p=c.next,c.next=o,o.next=p,l.lastEffect=o),o}function h0(){return Br().memoizedState}function Ah(o,l,c,p){var g=mi();Yt.flags|=o,g.memoizedState=Ta(1|l,c,void 0,p===void 0?null:p)}function Ch(o,l,c,p){var g=Br();p=p===void 0?null:p;var v=void 0;if(Te!==null){var E=Te.memoizedState;if(v=E.destroy,p!==null&&rf(p,E.deps))return void(g.memoizedState=Ta(l,c,v,p))}Yt.flags|=o,g.memoizedState=Ta(1|l,c,v,p)}function u0(o,l){return Ah(8390656,8,o,l)}function lf(o,l){return Ch(2048,8,o,l)}function c0(o,l){return Ch(4,2,o,l)}function d0(o,l){return Ch(4,4,o,l)}function f0(o,l){return typeof l=="function"?(o=o(),l(o),function(){l(null)}):l!=null?(o=o(),l.current=o,function(){l.current=null}):void 0}function p0(o,l,c){return c=c!=null?c.concat([o]):null,Ch(4,4,f0.bind(null,l,o),c)}function hf(){}function m0(o,l){var c=Br();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&rf(l,p[1])?p[0]:(c.memoizedState=[o,l],o)}function g0(o,l){var c=Br();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&rf(l,p[1])?p[0]:(o=o(),c.memoizedState=[o,l],o)}function _0(o,l,c){return 21&ln?(jr(c,l)||(c=D1(),Yt.lanes|=c,hn|=c,o.baseState=!0),l):(o.baseState&&(o.baseState=!1,ar=!0),o.memoizedState=c)}function nS(o,l){var c=Rt;Rt=c!==0&&4>c?c:4,o(!0);var p=ef.transition;ef.transition={};try{o(!1),l()}finally{Rt=c,ef.transition=p}}function x0(){return Br().memoizedState}function oS(o,l,c){var p=ys(o);c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},v0(o)?y0(l,c):(c=X1(o,l,c,p))!==null&&(Nr(c,o,p,He()),b0(c,l,p))}function aS(o,l,c){var p=ys(o),g={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(v0(o))y0(l,g);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer)!==null)try{var E=l.lastRenderedState,A=v(E,c);if(g.hasEagerState=!0,g.eagerState=A,jr(A,E)){var I=l.interleaved;return I===null?(g.next=g,$d(l)):(g.next=I.next,I.next=g),void(l.interleaved=g)}}catch{}(c=X1(o,l,g,p))!==null&&(Nr(c,o,p,g=He()),b0(c,l,p))}}function v0(o){var l=o.alternate;return o===Yt||l!==null&&l===Yt}function y0(o,l){va=wh=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function b0(o,l,c){if(4194240&c){var p=l.lanes;c|=p&=o.pendingLanes,l.lanes=c,Nd(o,c)}}var Rh={readContext:Mr,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},lS={readContext:Mr,useCallback:function(o,l){return mi().memoizedState=[o,l===void 0?null:l],o},useContext:Mr,useEffect:u0,useImperativeHandle:function(o,l,c){return c=c!=null?c.concat([o]):null,Ah(4194308,4,f0.bind(null,l,o),c)},useLayoutEffect:function(o,l){return Ah(4194308,4,o,l)},useInsertionEffect:function(o,l){return Ah(4,2,o,l)},useMemo:function(o,l){var c=mi();return l=l===void 0?null:l,o=o(),c.memoizedState=[o,l],o},useReducer:function(o,l,c){var p=mi();return l=c!==void 0?c(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=oS.bind(null,Yt,o),[p.memoizedState,o]},useRef:function(o){return o={current:o},mi().memoizedState=o},useState:l0,useDebugValue:hf,useDeferredValue:function(o){return mi().memoizedState=o},useTransition:function(){var o=l0(!1),l=o[0];return o=nS.bind(null,o[1]),mi().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,c){var p=Yt,g=mi();if(Vt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=l(),Se===null)throw Error(n(349));30&ln||i0(p,l,c)}g.memoizedState=c;var v={value:c,getSnapshot:l};return g.queue=v,u0(n0.bind(null,p,v,o),[o]),p.flags|=2048,Ta(9,s0.bind(null,p,v,c,l),void 0,null),c},useId:function(){var o=mi(),l=Se.identifierPrefix;if(Vt){var c=Fi;l=":"+l+"R"+(c=(di&~(1<<32-Xr(di)-1)).toString(32)+c),0<(c=ya++)&&(l+="H"+c.toString(32)),l+=":"}else l=":"+l+"r"+(c=sS++).toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},hS={readContext:Mr,useCallback:m0,useContext:Mr,useEffect:lf,useImperativeHandle:p0,useInsertionEffect:c0,useLayoutEffect:d0,useMemo:g0,useReducer:of,useRef:h0,useState:function(){return of(ba)},useDebugValue:hf,useDeferredValue:function(o){return _0(Br(),Te.memoizedState,o)},useTransition:function(){return[of(ba)[0],Br().memoizedState]},useMutableSource:e0,useSyncExternalStore:r0,useId:x0,unstable_isNewReconciler:!1},uS={readContext:Mr,useCallback:m0,useContext:Mr,useEffect:lf,useImperativeHandle:p0,useInsertionEffect:c0,useLayoutEffect:d0,useMemo:g0,useReducer:af,useRef:h0,useState:function(){return af(ba)},useDebugValue:hf,useDeferredValue:function(o){var l=Br();return Te===null?l.memoizedState=o:_0(l,Te.memoizedState,o)},useTransition:function(){return[af(ba)[0],Br().memoizedState]},useMutableSource:e0,useSyncExternalStore:r0,useId:x0,unstable_isNewReconciler:!1};function io(o,l){try{var c="",p=l;do c+=iS(p),p=p.return;while(p);var g=c}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:o,source:l,stack:g,digest:null}}function uf(o,l,c){return{value:o,source:null,stack:c??null,digest:l??null}}function cf(o,l){try{console.error(l.value)}catch(c){setTimeout(function(){throw c})}}var cS=typeof WeakMap=="function"?WeakMap:Map;function T0(o,l,c){(c=Ui(-1,c)).tag=3,c.payload={element:null};var p=l.value;return c.callback=function(){zh||(zh=!0,If=p),cf(0,l)},c}function E0(o,l,c){(c=Ui(-1,c)).tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var g=l.value;c.payload=function(){return p(g)},c.callback=function(){cf(0,l)}}var v=o.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(c.callback=function(){cf(0,l),typeof p!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})}),c}function S0(o,l,c){var p=o.pingCache;if(p===null){p=o.pingCache=new cS;var g=new Set;p.set(l,g)}else(g=p.get(l))===void 0&&(g=new Set,p.set(l,g));g.has(c)||(g.add(c),o=yS.bind(null,o,l,c),l.then(o,o))}function w0(o){do{var l;if((l=o.tag===13)&&(l=(l=o.memoizedState)===null||l.dehydrated!==null),l)return o;o=o.return}while(o!==null);return null}function A0(o,l,c,p,g){return 1&o.mode?(o.flags|=65536,o.lanes=g,o):(o===l?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:((l=Ui(-1,1)).tag=2,gs(c,l,1))),c.lanes|=1),o)}var dS=a.ReactCurrentOwner,ar=!1;function lr(o,l,c,p){l.child=o===null?J1(l,null,c,p):to(l,o.child,c,p)}function C0(o,l,c,p,g){c=c.render;var v=l.ref;return Jn(l,g),p=sf(o,l,c,p,v,g),c=nf(),o===null||ar?(Vt&&c&&Fd(l),l.flags|=1,lr(o,l,p,g),l.child):(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~g,Gi(o,l,g))}function R0(o,l,c,p,g){if(o===null){var v=c.type;return typeof v!="function"||Lf(v)||v.defaultProps!==void 0||c.compare!==null||c.defaultProps!==void 0?((o=Yh(c.type,null,p,l,l.mode,g)).ref=l.ref,o.return=l,l.child=o):(l.tag=15,l.type=v,P0(o,l,v,p,g))}if(v=o.child,(o.lanes&g)==0){var E=v.memoizedProps;if((c=(c=c.compare)!==null?c:gh)(E,p)&&o.ref===l.ref)return Gi(o,l,g)}return l.flags|=1,(o=Ts(v,p)).ref=l.ref,o.return=l,l.child=o}function P0(o,l,c,p,g){if(o!==null){var v=o.memoizedProps;if(gh(v,p)&&o.ref===l.ref){if(ar=!1,l.pendingProps=p=v,(o.lanes&g)==0)return l.lanes=o.lanes,Gi(o,l,g);131072&o.flags&&(ar=!0)}}return df(o,l,c,p,g)}function I0(o,l,c){var p=l.pendingProps,g=p.children,v=o!==null?o.memoizedState:null;if(p.mode==="hidden")if(!(1&l.mode))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(no,vr),vr|=c;else{if(!(1073741824&c))return o=v!==null?v.baseLanes|c:c,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Gt(no,vr),vr|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:c,Gt(no,vr),vr|=p}else v!==null?(p=v.baseLanes|c,l.memoizedState=null):p=c,Gt(no,vr),vr|=p;return lr(o,l,g,c),l.child}function M0(o,l){var c=l.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(l.flags|=512,l.flags|=2097152)}function df(o,l,c,p,g){var v=_r(c)?sn:Fe.current;return v=Yn(l,v),Jn(l,g),c=sf(o,l,c,p,v,g),p=nf(),o===null||ar?(Vt&&p&&Fd(l),l.flags|=1,lr(o,l,c,g),l.child):(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~g,Gi(o,l,g))}function D0(o,l,c,p,g){if(_r(c)){var v=!0;hh(l)}else v=!1;if(Jn(l,g),l.stateNode===null)Dh(o,l),q1(l,c,p),Kd(l,c,p,g),p=!0;else if(o===null){var E=l.stateNode,A=l.memoizedProps;E.props=A;var I=E.context,O=c.contextType;typeof O=="object"&&O!==null?O=Mr(O):O=Yn(l,O=_r(c)?sn:Fe.current);var G=c.getDerivedStateFromProps,rt=typeof G=="function"||typeof E.getSnapshotBeforeUpdate=="function";rt||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==p||I!==O)&&K1(l,E,p,O),ms=!1;var L=l.memoizedState;E.state=L,yh(l,p,E,g),I=l.memoizedState,A!==p||L!==I||or.current||ms?(typeof G=="function"&&(qd(l,c,G,p),I=l.memoizedState),(A=ms||Y1(l,c,A,p,L,I,O))?(rt||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(l.flags|=4194308)):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=I),E.props=p,E.state=I,E.context=O,p=A):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{E=l.stateNode,j1(o,l),A=l.memoizedProps,O=l.type===l.elementType?A:Wr(l.type,A),E.props=O,rt=l.pendingProps,L=E.context,typeof(I=c.contextType)=="object"&&I!==null?I=Mr(I):I=Yn(l,I=_r(c)?sn:Fe.current);var q=c.getDerivedStateFromProps;(G=typeof q=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==rt||L!==I)&&K1(l,E,p,I),ms=!1,L=l.memoizedState,E.state=L,yh(l,p,E,g);var ut=l.memoizedState;A!==rt||L!==ut||or.current||ms?(typeof q=="function"&&(qd(l,c,q,p),ut=l.memoizedState),(O=ms||Y1(l,c,O,p,L,ut,I)||!1)?(G||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,ut,I),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,ut,I)),typeof E.componentDidUpdate=="function"&&(l.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===o.memoizedProps&&L===o.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&L===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=ut),E.props=p,E.state=ut,E.context=I,p=O):(typeof E.componentDidUpdate!="function"||A===o.memoizedProps&&L===o.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&L===o.memoizedState||(l.flags|=1024),p=!1)}return ff(o,l,c,p,v,g)}function ff(o,l,c,p,g,v){M0(o,l);var E=(128&l.flags)!=0;if(!p&&!E)return g&&M1(l,c,!1),Gi(o,l,v);p=l.stateNode,dS.current=l;var A=E&&typeof c.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&E?(l.child=to(l,o.child,null,v),l.child=to(l,null,A,v)):lr(o,l,A,v),l.memoizedState=p.state,g&&M1(l,c,!0),l.child}function B0(o){var l=o.stateNode;l.pendingContext?P1(0,l.pendingContext,l.pendingContext!==l.context):l.context&&P1(0,l.context,!1),Qd(o,l.containerInfo)}function N0(o,l,c,p,g){return Qn(),zd(g),l.flags|=256,lr(o,l,c,p),l.child}var Ea,Sa,Ph,Ih,pf={dehydrated:null,treeContext:null,retryLane:0};function mf(o){return{baseLanes:o,cachePool:null,transitions:null}}function O0(o,l,c){var p,g=l.pendingProps,v=ee.current,E=!1,A=(128&l.flags)!=0;if((p=A)||(p=(o===null||o.memoizedState!==null)&&(2&v)!=0),p?(E=!0,l.flags&=-129):o!==null&&o.memoizedState===null||(v|=1),Gt(ee,1&v),o===null)return Hd(l),(o=l.memoizedState)!==null&&(o=o.dehydrated)!==null?(1&l.mode?wd(o)?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(A=g.children,o=g.fallback,E?(g=l.mode,E=l.child,A={mode:"hidden",children:A},!(1&g)&&E!==null?(E.childLanes=0,E.pendingProps=A):E=qh(A,g,0,null),o=dn(o,g,c,null),E.return=l,o.return=l,E.sibling=o,l.child=E,l.child.memoizedState=mf(c),l.memoizedState=pf,o):gf(l,A));if((v=o.memoizedState)!==null&&(p=v.dehydrated)!==null)return function(O,G,rt,L,q,ut,Et){if(rt)return 256&G.flags?(G.flags&=-257,Mh(O,G,Et,L=uf(Error(n(422))))):G.memoizedState!==null?(G.child=O.child,G.flags|=128,null):(ut=L.fallback,q=G.mode,L=qh({mode:"visible",children:L.children},q,0,null),(ut=dn(ut,q,Et,null)).flags|=2,L.return=G,ut.return=G,L.sibling=ut,G.child=L,1&G.mode&&to(G,O.child,null,Et),G.child.memoizedState=mf(Et),G.memoizedState=pf,ut);if(!(1&G.mode))return Mh(O,G,Et,null);if(wd(q))return L=DE(q).digest,ut=Error(n(419)),L=uf(ut,L,void 0),Mh(O,G,Et,L);if(rt=(Et&O.childLanes)!=0,ar||rt){if((L=Se)!==null){switch(Et&-Et){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}(q=q&(L.suspendedLanes|Et)?0:q)!==0&&q!==ut.retryLane&&(ut.retryLane=q,fi(O,q),Nr(L,O,q,-1))}return Of(),Mh(O,G,Et,L=uf(Error(n(421))))}return R1(q)?(G.flags|=128,G.child=O.child,G=bS.bind(null,O),BE(q,G),null):(O=ut.treeContext,te&&(Ir=LE(q),xr=G,Vt=!0,Vr=null,ma=!1,O!==null&&(Rr[Pr++]=di,Rr[Pr++]=Fi,Rr[Pr++]=nn,di=O.id,Fi=O.overflow,nn=G)),G=gf(G,L.children),G.flags|=4096,G)}(o,l,A,g,p,v,c);if(E){E=g.fallback,A=l.mode,p=(v=o.child).sibling;var I={mode:"hidden",children:g.children};return!(1&A)&&l.child!==v?((g=l.child).childLanes=0,g.pendingProps=I,l.deletions=null):(g=Ts(v,I)).subtreeFlags=14680064&v.subtreeFlags,p!==null?E=Ts(p,E):(E=dn(E,A,c,null)).flags|=2,E.return=l,g.return=l,g.sibling=E,l.child=g,g=E,E=l.child,A=(A=o.child.memoizedState)===null?mf(c):{baseLanes:A.baseLanes|c,cachePool:null,transitions:A.transitions},E.memoizedState=A,E.childLanes=o.childLanes&~c,l.memoizedState=pf,g}return o=(E=o.child).sibling,g=Ts(E,{mode:"visible",children:g.children}),!(1&l.mode)&&(g.lanes=c),g.return=l,g.sibling=null,o!==null&&((c=l.deletions)===null?(l.deletions=[o],l.flags|=16):c.push(o)),l.child=g,l.memoizedState=null,g}function gf(o,l){return(l=qh({mode:"visible",children:l},o.mode,0,null)).return=o,o.child=l}function Mh(o,l,c,p){return p!==null&&zd(p),to(l,o.child,null,c),(o=gf(l,l.pendingProps.children)).flags|=2,l.memoizedState=null,o}function L0(o,l,c){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),Wd(o.return,l,c)}function _f(o,l,c,p,g){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:g}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=c,v.tailMode=g)}function k0(o,l,c){var p=l.pendingProps,g=p.revealOrder,v=p.tail;if(lr(o,l,p.children,c),(2&(p=ee.current))!=0)p=1&p|2,l.flags|=128;else{if(o!==null&&128&o.flags)t:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&L0(o,c,l);else if(o.tag===19)L0(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break t;for(;o.sibling===null;){if(o.return===null||o.return===l)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(Gt(ee,p),(1&l.mode)==0)l.memoizedState=null;else switch(g){case"forwards":for(c=l.child,g=null;c!==null;)(o=c.alternate)!==null&&Eh(o)===null&&(g=c),c=c.sibling;(c=g)===null?(g=l.child,l.child=null):(g=c.sibling,c.sibling=null),_f(l,!1,g,c,v);break;case"backwards":for(c=null,g=l.child,l.child=null;g!==null;){if((o=g.alternate)!==null&&Eh(o)===null){l.child=g;break}o=g.sibling,g.sibling=c,c=g,g=o}_f(l,!0,c,null,v);break;case"together":_f(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Dh(o,l){!(1&l.mode)&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Gi(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),hn|=l.lanes,(c&l.childLanes)==0)return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(c=Ts(o=l.child,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,(c=c.sibling=Ts(o,o.pendingProps)).return=l;c.sibling=null}return l.child}function gi(o){o.flags|=4}function F0(o,l){if(o!==null&&o.child===l.child)return!0;if(16&l.flags)return!1;for(o=l.child;o!==null;){if(12854&o.flags||12854&o.subtreeFlags)return!1;o=o.sibling}return!0}if($t)Ea=function(o,l){for(var c=l.child;c!==null;){if(c.tag===5||c.tag===6)St(o,c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Sa=function(){},Ph=function(o,l,c,p,g){if((o=o.memoizedProps)!==p){var v=l.stateNode,E=pi(Dr.current);c=Zt(v,c,o,p,g,E),(l.updateQueue=c)&&gi(l)}},Ih=function(o,l,c,p){c!==p&&gi(l)};else if(nr){Ea=function(o,l,c,p){for(var g=l.child;g!==null;){if(g.tag===5){var v=g.stateNode;c&&p&&(v=A1(v,g.type,g.memoizedProps,g)),St(o,v)}else if(g.tag===6)v=g.stateNode,c&&p&&(v=C1(v,g.memoizedProps,g)),St(o,v);else if(g.tag!==4){if(g.tag===22&&g.memoizedState!==null)(v=g.child)!==null&&(v.return=g),Ea(o,g,!0,!0);else if(g.child!==null){g.child.return=g,g=g.child;continue}}if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};var U0=function(o,l,c,p){for(var g=l.child;g!==null;){if(g.tag===5){var v=g.stateNode;c&&p&&(v=A1(v,g.type,g.memoizedProps,g)),w1(o,v)}else if(g.tag===6)v=g.stateNode,c&&p&&(v=C1(v,g.memoizedProps,g)),w1(o,v);else if(g.tag!==4){if(g.tag===22&&g.memoizedState!==null)(v=g.child)!==null&&(v.return=g),U0(o,g,!0,!0);else if(g.child!==null){g.child.return=g,g=g.child;continue}}if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};Sa=function(o,l){var c=l.stateNode;if(!F0(o,l)){o=c.containerInfo;var p=S1(o);U0(p,l,!1,!1),c.pendingChildren=p,gi(l),RE(o,p)}},Ph=function(o,l,c,p,g){var v=o.stateNode,E=o.memoizedProps;if((o=F0(o,l))&&E===p)l.stateNode=v;else{var A=l.stateNode,I=pi(Dr.current),O=null;E!==p&&(O=Zt(A,c,E,p,g,I)),o&&O===null?l.stateNode=v:(v=CE(v,O,c,E,p,l,o,A),ye(v,c,p,g,I)&&gi(l),l.stateNode=v,o?gi(l):Ea(v,l,!1,!1))}},Ih=function(o,l,c,p){c!==p?(o=pi(eo.current),c=pi(Dr.current),l.stateNode=pe(p,o,c,l),gi(l)):l.stateNode=o.stateNode}}else Sa=function(){},Ph=function(){},Ih=function(){};function wa(o,l){if(!Vt)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function qe(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,p=0;if(l)for(var g=o.child;g!==null;)c|=g.lanes|g.childLanes,p|=14680064&g.subtreeFlags,p|=14680064&g.flags,g.return=o,g=g.sibling;else for(g=o.child;g!==null;)c|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=o,g=g.sibling;return o.subtreeFlags|=p,o.childLanes=c,l}function fS(o,l,c){var p=l.pendingProps;switch(Ud(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(l),null;case 1:case 17:return _r(l.type)&&Pd(),qe(l),null;case 3:return c=l.stateNode,ro(),jt(or),jt(Fe),tf(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),o!==null&&o.child!==null||(mh(l)?gi(l):o===null||o.memoizedState.isDehydrated&&!(256&l.flags)||(l.flags|=1024,Vr!==null&&(Bf(Vr),Vr=null))),Sa(o,l),qe(l),null;case 5:Zd(l),c=pi(eo.current);var g=l.type;if(o!==null&&l.stateNode!=null)Ph(o,l,g,p,c),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(n(166));return qe(l),null}if(o=pi(Dr.current),mh(l)){if(!te)throw Error(n(175));o=kE(l.stateNode,l.type,l.memoizedProps,c,o,l,!ma),l.updateQueue=o,o!==null&&gi(l)}else{var v=wt(g,p,c,o,l);Ea(v,l,!1,!1),l.stateNode=v,ye(v,g,p,c,o)&&gi(l)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return qe(l),null;case 6:if(o&&l.stateNode!=null)Ih(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(n(166));if(o=pi(eo.current),c=pi(Dr.current),mh(l)){if(!te)throw Error(n(176));if(o=l.stateNode,c=l.memoizedProps,(p=FE(o,c,l,!ma))&&(g=xr)!==null)switch(g.tag){case 3:WE(g.stateNode.containerInfo,o,c,(1&g.mode)!=0);break;case 5:$E(g.type,g.memoizedProps,g.stateNode,o,c,(1&g.mode)!=0)}p&&gi(l)}else l.stateNode=pe(p,o,c,l)}return qe(l),null;case 13:if(jt(ee),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Vt&&Ir!==null&&1&l.mode&&!(128&l.flags))H1(),Qn(),l.flags|=98560,g=!1;else if(g=mh(l),p!==null&&p.dehydrated!==null){if(o===null){if(!g)throw Error(n(318));if(!te)throw Error(n(344));if(!(g=(g=l.memoizedState)!==null?g.dehydrated:null))throw Error(n(317));UE(g,l)}else Qn(),!(128&l.flags)&&(l.memoizedState=null),l.flags|=4;qe(l),g=!1}else Vr!==null&&(Bf(Vr),Vr=null),g=!0;if(!g)return 65536&l.flags?l:null}return 128&l.flags?(l.lanes=c,l):((c=p!==null)!=(o!==null&&o.memoizedState!==null)&&c&&(l.child.flags|=8192,1&l.mode&&(o===null||1&ee.current?me===0&&(me=3):Of())),l.updateQueue!==null&&(l.flags|=4),qe(l),null);case 4:return ro(),Sa(o,l),o===null&&Li(l.stateNode.containerInfo),qe(l),null;case 10:return Vd(l.type._context),qe(l),null;case 19:if(jt(ee),(g=l.memoizedState)===null)return qe(l),null;if(p=(128&l.flags)!=0,(v=g.rendering)===null)if(p)wa(g,!1);else{if(me!==0||o!==null&&128&o.flags)for(o=l.child;o!==null;){if((v=Eh(o))!==null){for(l.flags|=128,wa(g,!1),(o=v.updateQueue)!==null&&(l.updateQueue=o,l.flags|=4),l.subtreeFlags=0,o=c,c=l.child;c!==null;)g=o,(p=c).flags&=14680066,(v=p.alternate)===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,g=v.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),c=c.sibling;return Gt(ee,1&ee.current|2),l.child}o=o.sibling}g.tail!==null&&be()>Pf&&(l.flags|=128,p=!0,wa(g,!1),l.lanes=4194304)}else{if(!p)if((o=Eh(v))!==null){if(l.flags|=128,p=!0,(o=o.updateQueue)!==null&&(l.updateQueue=o,l.flags|=4),wa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Vt)return qe(l),null}else 2*be()-g.renderingStartTime>Pf&&c!==1073741824&&(l.flags|=128,p=!0,wa(g,!1),l.lanes=4194304);g.isBackwards?(v.sibling=l.child,l.child=v):((o=g.last)!==null?o.sibling=v:l.child=v,g.last=v)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=be(),l.sibling=null,o=ee.current,Gt(ee,p?1&o|2:1&o),l):(qe(l),null);case 22:case 23:return Nf(),c=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==c&&(l.flags|=8192),c&&1&l.mode?1073741824&vr&&(qe(l),$t&&6&l.subtreeFlags&&(l.flags|=8192)):qe(l),null;case 24:case 25:return null}throw Error(n(156,l.tag))}function pS(o,l){switch(Ud(l),l.tag){case 1:return _r(l.type)&&Pd(),65536&(o=l.flags)?(l.flags=-65537&o|128,l):null;case 3:return ro(),jt(or),jt(Fe),tf(),65536&(o=l.flags)&&!(128&o)?(l.flags=-65537&o|128,l):null;case 5:return Zd(l),null;case 13:if(jt(ee),(o=l.memoizedState)!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Qn()}return 65536&(o=l.flags)?(l.flags=-65537&o|128,l):null;case 19:return jt(ee),null;case 4:return ro(),null;case 10:return Vd(l.type._context),null;case 22:case 23:return Nf(),null;default:return null}}var Bh=!1,Ge=!1,mS=typeof WeakSet=="function"?WeakSet:Set,nt=null;function so(o,l){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Wt(o,l,p)}else c.current=null}function G0(o,l,c){try{c()}catch(p){Wt(o,l,p)}}var H0=!1;function Aa(o,l,c){var p=l.updateQueue;if((p=p!==null?p.lastEffect:null)!==null){var g=p=p.next;do{if((g.tag&o)===o){var v=g.destroy;g.destroy=void 0,v!==void 0&&G0(l,c,v)}g=g.next}while(g!==p)}}function Nh(o,l){if((l=(l=l.updateQueue)!==null?l.lastEffect:null)!==null){var c=l=l.next;do{if((c.tag&o)===o){var p=c.create;c.destroy=p()}c=c.next}while(c!==l)}}function xf(o){var l=o.ref;if(l!==null){var c=o.stateNode;o.tag===5?o=ht(c):o=c,typeof l=="function"?l(o):l.current=o}}function z0(o){var l=o.alternate;l!==null&&(o.alternate=null,z0(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode)!==null&&Ed(l),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function X0(o){return o.tag===5||o.tag===3||o.tag===4}function j0(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||X0(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(2&o.flags||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(2&o.flags))return o.stateNode}}function vf(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?vE(c,o,l):pE(c,o);else if(p!==4&&(o=o.child)!==null)for(vf(o,l,c),o=o.sibling;o!==null;)vf(o,l,c),o=o.sibling}function yf(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?xE(c,o,l):fE(c,o);else if(p!==4&&(o=o.child)!==null)for(yf(o,l,c),o=o.sibling;o!==null;)yf(o,l,c),o=o.sibling}var Ke=null,_i=!1;function xi(o,l,c){for(c=c.child;c!==null;)bf(o,l,c),c=c.sibling}function bf(o,l,c){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(ch,c)}catch{}switch(c.tag){case 5:Ge||so(c,l);case 6:if($t){var p=Ke,g=_i;Ke=null,xi(o,l,c),_i=g,(Ke=p)!==null&&(_i?bE(Ke,c.stateNode):yE(Ke,c.stateNode))}else xi(o,l,c);break;case 18:$t&&Ke!==null&&(_i?jE(Ke,c.stateNode):XE(Ke,c.stateNode));break;case 4:$t?(p=Ke,g=_i,Ke=c.stateNode.containerInfo,_i=!0,xi(o,l,c),Ke=p,_i=g):(nr&&(p=c.stateNode.containerInfo,g=S1(p),Sd(p,g)),xi(o,l,c));break;case 0:case 11:case 14:case 15:if(!Ge&&(p=c.updateQueue)!==null&&(p=p.lastEffect)!==null){g=p=p.next;do{var v=g,E=v.destroy;v=v.tag,E!==void 0&&(2&v||4&v)&&G0(c,l,E),g=g.next}while(g!==p)}xi(o,l,c);break;case 1:if(!Ge&&(so(c,l),typeof(p=c.stateNode).componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(A){Wt(c,l,A)}xi(o,l,c);break;case 21:xi(o,l,c);break;case 22:1&c.mode?(Ge=(p=Ge)||c.memoizedState!==null,xi(o,l,c),Ge=p):xi(o,l,c);break;default:xi(o,l,c)}}function V0(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new mS),l.forEach(function(p){var g=TS.bind(null,o,p);c.has(p)||(c.add(p),p.then(g,g))})}}function $r(o,l){var c=l.deletions;if(c!==null)for(var p=0;p<c.length;p++){var g=c[p];try{var v=o,E=l;if($t){var A=E;t:for(;A!==null;){switch(A.tag){case 5:Ke=A.stateNode,_i=!1;break t;case 3:case 4:Ke=A.stateNode.containerInfo,_i=!0;break t}A=A.return}if(Ke===null)throw Error(n(160));bf(v,E,g),Ke=null,_i=!1}else bf(v,E,g);var I=g.alternate;I!==null&&(I.return=null),g.return=null}catch(O){Wt(g,l,O)}}if(12854&l.subtreeFlags)for(l=l.child;l!==null;)W0(l,o),l=l.sibling}function W0(o,l){var c=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if($r(l,o),vi(o),4&p){try{Aa(3,o,o.return),Nh(3,o)}catch(L){Wt(o,o.return,L)}try{Aa(5,o,o.return)}catch(L){Wt(o,o.return,L)}}break;case 1:$r(l,o),vi(o),512&p&&c!==null&&so(c,c.return);break;case 5:if($r(l,o),vi(o),512&p&&c!==null&&so(c,c.return),$t){if(32&o.flags){var g=o.stateNode;try{E1(g)}catch(L){Wt(o,o.return,L)}}if(4&p&&(g=o.stateNode)!=null){var v=o.memoizedProps;if(c=c!==null?c.memoizedProps:v,p=o.type,l=o.updateQueue,o.updateQueue=null,l!==null)try{_E(g,l,p,c,v,o)}catch(L){Wt(o,o.return,L)}}}break;case 6:if($r(l,o),vi(o),4&p&&$t){if(o.stateNode===null)throw Error(n(162));g=o.stateNode,v=o.memoizedProps,c=c!==null?c.memoizedProps:v;try{mE(g,c,v)}catch(L){Wt(o,o.return,L)}}break;case 3:if($r(l,o),vi(o),4&p){if($t&&te&&c!==null&&c.memoizedState.isDehydrated)try{HE(l.containerInfo)}catch(L){Wt(o,o.return,L)}if(nr){g=l.containerInfo,v=l.pendingChildren;try{Sd(g,v)}catch(L){Wt(o,o.return,L)}}}break;case 4:if($r(l,o),vi(o),4&p&&nr){g=(v=o.stateNode).containerInfo,v=v.pendingChildren;try{Sd(g,v)}catch(L){Wt(o,o.return,L)}}break;case 13:$r(l,o),vi(o),8192&(g=o.child).flags&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Rf=be())),4&p&&V0(o);break;case 22:var E=c!==null&&c.memoizedState!==null;if(1&o.mode?(Ge=(c=Ge)||E,$r(l,o),Ge=c):$r(l,o),vi(o),8192&p){if(c=o.memoizedState!==null,(o.stateNode.isHidden=c)&&!E&&(1&o.mode)!=0)for(nt=o,p=o.child;p!==null;){for(l=nt=p;nt!==null;){var A=(E=nt).child;switch(E.tag){case 0:case 11:case 14:case 15:Aa(4,E,E.return);break;case 1:so(E,E.return);var I=E.stateNode;if(typeof I.componentWillUnmount=="function"){var O=E,G=E.return;try{var rt=O;I.props=rt.memoizedProps,I.state=rt.memoizedState,I.componentWillUnmount()}catch(L){Wt(O,G,L)}}break;case 5:so(E,E.return);break;case 22:if(E.memoizedState!==null){q0(l);continue}}A!==null?(A.return=E,nt=A):q0(l)}p=p.sibling}if($t){t:if(p=null,$t)for(l=o;;){if(l.tag===5){if(p===null){p=l;try{g=l.stateNode,c?TE(g):SE(l.stateNode,l.memoizedProps)}catch(L){Wt(o,o.return,L)}}}else if(l.tag===6){if(p===null)try{v=l.stateNode,c?EE(v):wE(v,l.memoizedProps)}catch(L){Wt(o,o.return,L)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break t;for(;l.sibling===null;){if(l.return===null||l.return===o)break t;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}}}break;case 19:$r(l,o),vi(o),4&p&&V0(o);break;case 21:break;default:$r(l,o),vi(o)}}function vi(o){var l=o.flags;if(2&l){try{if($t){t:{for(var c=o.return;c!==null;){if(X0(c)){var p=c;break t}c=c.return}throw Error(n(160))}switch(p.tag){case 5:var g=p.stateNode;32&p.flags&&(E1(g),p.flags&=-33),yf(o,j0(o),g);break;case 3:case 4:var v=p.stateNode.containerInfo;vf(o,j0(o),v);break;default:throw Error(n(161))}}}catch(E){Wt(o,o.return,E)}o.flags&=-3}4096&l&&(o.flags&=-4097)}function gS(o,l,c){nt=o,$0(o)}function $0(o,l,c){for(var p=(1&o.mode)!=0;nt!==null;){var g=nt,v=g.child;if(g.tag===22&&p){var E=g.memoizedState!==null||Bh;if(!E){var A=g.alternate,I=A!==null&&A.memoizedState!==null||Ge;A=Bh;var O=Ge;if(Bh=E,(Ge=I)&&!O)for(nt=g;nt!==null;)I=(E=nt).child,E.tag===22&&E.memoizedState!==null?K0(g):I!==null?(I.return=E,nt=I):K0(g);for(;v!==null;)nt=v,$0(v),v=v.sibling;nt=g,Bh=A,Ge=O}Y0(o)}else 8772&g.subtreeFlags&&v!==null?(v.return=g,nt=v):Y0(o)}}function Y0(o){for(;nt!==null;){var l=nt;if(8772&l.flags){var c=l.alternate;try{if(8772&l.flags)switch(l.tag){case 0:case 11:case 15:Ge||Nh(5,l);break;case 1:var p=l.stateNode;if(4&l.flags&&!Ge)if(c===null)p.componentDidMount();else{var g=l.elementType===l.type?c.memoizedProps:Wr(l.type,c.memoizedProps);p.componentDidUpdate(g,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=l.updateQueue;v!==null&&W1(l,v,p);break;case 3:var E=l.updateQueue;if(E!==null){if(c=null,l.child!==null)switch(l.child.tag){case 5:c=ht(l.child.stateNode);break;case 1:c=l.child.stateNode}W1(l,E,c)}break;case 5:var A=l.stateNode;c===null&&4&l.flags&&gE(A,l.type,l.memoizedProps,l);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(te&&l.memoizedState===null){var I=l.alternate;if(I!==null){var O=I.memoizedState;if(O!==null){var G=O.dehydrated;G!==null&&zE(G)}}}break;default:throw Error(n(163))}Ge||512&l.flags&&xf(l)}catch(rt){Wt(l,l.return,rt)}}if(l===o){nt=null;break}if((c=l.sibling)!==null){c.return=l.return,nt=c;break}nt=l.return}}function q0(o){for(;nt!==null;){var l=nt;if(l===o){nt=null;break}var c=l.sibling;if(c!==null){c.return=l.return,nt=c;break}nt=l.return}}function K0(o){for(;nt!==null;){var l=nt;try{switch(l.tag){case 0:case 11:case 15:var c=l.return;try{Nh(4,l)}catch(I){Wt(l,c,I)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var g=l.return;try{p.componentDidMount()}catch(I){Wt(l,g,I)}}var v=l.return;try{xf(l)}catch(I){Wt(l,v,I)}break;case 5:var E=l.return;try{xf(l)}catch(I){Wt(l,E,I)}}}catch(I){Wt(l,l.return,I)}if(l===o){nt=null;break}var A=l.sibling;if(A!==null){A.return=l.return,nt=A;break}nt=l.return}}var Oh=0,Lh=1,kh=2,Fh=3,Uh=4;if(typeof Symbol=="function"&&Symbol.for){var Ca=Symbol.for;Oh=Ca("selector.component"),Lh=Ca("selector.has_pseudo_class"),kh=Ca("selector.role"),Fh=Ca("selector.test_id"),Uh=Ca("selector.text")}function Tf(o){var l=la(o);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(n(364));return l}if((o=aE(o))===null)throw Error(n(362));return o.stateNode.current}function Ef(o,l){switch(l.$$typeof){case Oh:if(o.type===l.value)return!0;break;case Lh:t:{l=l.value,o=[o,0];for(var c=0;c<o.length;){var p=o[c++],g=o[c++],v=l[g];if(p.tag!==5||!ca(p)){for(;v!=null&&Ef(p,v);)v=l[++g];if(g===l.length){l=!0;break t}for(p=p.child;p!==null;)o.push(p,g),p=p.sibling}}l=!1}return l;case kh:if(o.tag===5&&uE(o.stateNode,l.value))return!0;break;case Uh:if((o.tag===5||o.tag===6)&&(o=hE(o))!==null&&0<=o.indexOf(l.value))return!0;break;case Fh:if(o.tag===5&&typeof(o=o.memoizedProps["data-testname"])=="string"&&o.toLowerCase()===l.value.toLowerCase())return!0;break;default:throw Error(n(365))}return!1}function Sf(o){switch(o.$$typeof){case Oh:return"<"+(et(o.value)||"Unknown")+">";case Lh:return":has("+(Sf(o)||"")+")";case kh:return'[role="'+o.value+'"]';case Uh:return'"'+o.value+'"';case Fh:return'[data-testname="'+o.value+'"]';default:throw Error(n(365))}}function Q0(o,l){var c=[];o=[o,0];for(var p=0;p<o.length;){var g=o[p++],v=o[p++],E=l[v];if(g.tag!==5||!ca(g)){for(;E!=null&&Ef(g,E);)E=l[++v];if(v===l.length)c.push(g);else for(g=g.child;g!==null;)o.push(g,v),g=g.sibling}}return c}function wf(o,l){if(!ua)throw Error(n(363));o=Q0(o=Tf(o),l),l=[],o=Array.from(o);for(var c=0;c<o.length;){var p=o[c++];if(p.tag===5)ca(p)||l.push(p.stateNode);else for(p=p.child;p!==null;)o.push(p),p=p.sibling}return l}var _S=Math.ceil,Gh=a.ReactCurrentDispatcher,Af=a.ReactCurrentOwner,oe=a.ReactCurrentBatchConfig,At=0,Se=null,de=null,Pe=0,vr=0,no=fs(0),me=0,Ra=null,hn=0,Hh=0,Cf=0,Pa=null,yr=null,Rf=0,Pf=1/0,_s=null;function oo(){Pf=be()+500}var Z0,zh=!1,If=null,xs=null,Xh=!1,vs=null,jh=0,Ia=0,Mf=null,Vh=-1,Wh=0;function He(){return 6&At?be():Vh!==-1?Vh:Vh=be()}function ys(o){return 1&o.mode?2&At&&Pe!==0?Pe&-Pe:rS.transition!==null?(Wh===0&&(Wh=D1()),Wh):(o=Rt)!==0?o:ha():1}function Nr(o,l,c,p){if(50<Ia)throw Ia=0,Mf=null,Error(n(185));pa(o,c,p),2&At&&o===Se||(o===Se&&(!(2&At)&&(Hh|=c),me===4&&bs(o,Pe)),hr(o,p),c===1&&At===0&&!(1&l.mode)&&(oo(),dh&&ci()))}function hr(o,l){var c=o.callbackNode;(function(g,v){for(var E=g.suspendedLanes,A=g.pingedLanes,I=g.expirationTimes,O=g.pendingLanes;0<O;){var G=31-Xr(O),rt=1<<G,L=I[G];L===-1?rt&E&&!(rt&A)||(I[G]=QE(rt,v)):L<=v&&(g.expiredLanes|=rt),O&=~rt}})(o,l);var p=uh(o,o===Se?Pe:0);if(p===0)c!==null&&N1(c),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(c!=null&&N1(c),l===1)o.tag===0?function(g){dh=!0,L1(g)}(t_.bind(null,o)):L1(t_.bind(null,o)),Wn?oE(function(){!(6&At)&&ci()}):Od(Ld,ci),c=null;else{switch(B1(p)){case 1:c=Ld;break;case 4:c=tS;break;case 16:default:c=O1;break;case 536870912:c=eS}c=l_(c,J0.bind(null,o))}o.callbackPriority=l,o.callbackNode=c}}function J0(o,l){if(Vh=-1,Wh=0,(6&At)!=0)throw Error(n(327));var c=o.callbackNode;if(cn()&&o.callbackNode!==c)return null;var p=uh(o,o===Se?Pe:0);if(p===0)return null;if(30&p||p&o.expiredLanes||l)l=$h(o,p);else{l=p;var g=At;At|=2;var v=i_();for(Se===o&&Pe===l||(_s=null,oo(),un(o,l));;)try{vS();break}catch(A){r_(o,A)}jd(),Gh.current=v,At=g,de!==null?l=0:(Se=null,Pe=0,l=me)}if(l!==0){if(l===2&&(g=Dd(o))!==0&&(p=g,l=Df(o,g)),l===1)throw c=Ra,un(o,0),bs(o,p),hr(o,be()),c;if(l===6)bs(o,p);else{if(g=o.current.alternate,(30&p)==0&&!function(A){for(var I=A;;){if(16384&I.flags){var O=I.updateQueue;if(O!==null&&(O=O.stores)!==null)for(var G=0;G<O.length;G++){var rt=O[G],L=rt.getSnapshot;rt=rt.value;try{if(!jr(L(),rt))return!1}catch{return!1}}}if(O=I.child,16384&I.subtreeFlags&&O!==null)O.return=I,I=O;else{if(I===A)break;for(;I.sibling===null;){if(I.return===null||I.return===A)return!0;I=I.return}I.sibling.return=I.return,I=I.sibling}}return!0}(g)&&((l=$h(o,p))===2&&(v=Dd(o))!==0&&(p=v,l=Df(o,v)),l===1))throw c=Ra,un(o,0),bs(o,p),hr(o,be()),c;switch(o.finishedWork=g,o.finishedLanes=p,l){case 0:case 1:throw Error(n(345));case 2:case 5:ao(o,yr,_s);break;case 3:if(bs(o,p),(130023424&p)===p&&10<(l=Rf+500-be())){if(uh(o,0)!==0)break;if(((g=o.suspendedLanes)&p)!==p){He(),o.pingedLanes|=o.suspendedLanes&g;break}o.timeoutHandle=Jt(ao.bind(null,o,yr,_s),l);break}ao(o,yr,_s);break;case 4:if(bs(o,p),(4194240&p)===p)break;for(l=o.eventTimes,g=-1;0<p;){var E=31-Xr(p);v=1<<E,(E=l[E])>g&&(g=E),p&=~v}if(p=g,10<(p=(120>(p=be()-p)?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*_S(p/1960))-p)){o.timeoutHandle=Jt(ao.bind(null,o,yr,_s),p);break}ao(o,yr,_s);break;default:throw Error(n(329))}}}return hr(o,be()),o.callbackNode===c?J0.bind(null,o):null}function Df(o,l){var c=Pa;return o.current.memoizedState.isDehydrated&&(un(o,l).flags|=256),(o=$h(o,l))!==2&&(l=yr,yr=c,l!==null&&Bf(l)),o}function Bf(o){yr===null?yr=o:yr.push.apply(yr,o)}function bs(o,l){for(l&=~Cf,l&=~Hh,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var c=31-Xr(l),p=1<<c;o[c]=-1,l&=~p}}function t_(o){if(6&At)throw Error(n(327));cn();var l=uh(o,0);if(!(1&l))return hr(o,be()),null;var c=$h(o,l);if(o.tag!==0&&c===2){var p=Dd(o);p!==0&&(l=p,c=Df(o,p))}if(c===1)throw c=Ra,un(o,0),bs(o,l),hr(o,be()),c;if(c===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,ao(o,yr,_s),hr(o,be()),null}function e_(o){vs!==null&&vs.tag===0&&!(6&At)&&cn();var l=At;At|=1;var c=oe.transition,p=Rt;try{if(oe.transition=null,Rt=1,o)return o()}finally{Rt=p,oe.transition=c,!(6&(At=l))&&ci()}}function Nf(){vr=no.current,jt(no)}function un(o,l){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==ds&&(o.timeoutHandle=ds,hi(c)),de!==null)for(c=de.return;c!==null;){var p=c;switch(Ud(p),p.tag){case 1:(p=p.type.childContextTypes)!=null&&Pd();break;case 3:ro(),jt(or),jt(Fe),tf();break;case 5:Zd(p);break;case 4:ro();break;case 13:case 19:jt(ee);break;case 10:Vd(p.type._context);break;case 22:case 23:Nf()}c=c.return}if(Se=o,de=o=Ts(o.current,null),Pe=vr=l,me=0,Ra=null,Cf=Hh=hn=0,yr=Pa=null,an!==null){for(l=0;l<an.length;l++)if((p=(c=an[l]).interleaved)!==null){c.interleaved=null;var g=p.next,v=c.pending;if(v!==null){var E=v.next;v.next=g,p.next=E}c.pending=p}an=null}return o}function r_(o,l){for(;;){var c=de;try{if(jd(),Sh.current=Rh,wh){for(var p=Yt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}wh=!1}if(ln=0,Ee=Te=Yt=null,va=!1,ya=0,Af.current=null,c===null||c.return===null){me=1,Ra=l,de=null;break}t:{var v=o,E=c.return,A=c,I=l;if(l=Pe,A.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var O=I,G=A,rt=G.tag;if(!(1&G.mode)&&(rt===0||rt===11||rt===15)){var L=G.alternate;L?(G.updateQueue=L.updateQueue,G.memoizedState=L.memoizedState,G.lanes=L.lanes):(G.updateQueue=null,G.memoizedState=null)}var q=w0(E);if(q!==null){q.flags&=-257,A0(q,E,A,0,l),1&q.mode&&S0(v,O,l),I=O;var ut=(l=q).updateQueue;if(ut===null){var Et=new Set;Et.add(I),l.updateQueue=Et}else ut.add(I);break t}if(!(1&l)){S0(v,O,l),Of();break t}I=Error(n(426))}else if(Vt&&1&A.mode){var H=w0(E);if(H!==null){!(65536&H.flags)&&(H.flags|=256),A0(H,E,A,0,l),zd(io(I,A));break t}}v=I=io(I,A),me!==4&&(me=2),Pa===null?Pa=[v]:Pa.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,l&=-l,v.lanes|=l,V1(v,T0(0,I,l));break t;case 1:A=I;var P=v.type,D=v.stateNode;if(!(128&v.flags)&&(typeof P.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(xs===null||!xs.has(D)))){v.flags|=65536,l&=-l,v.lanes|=l,V1(v,E0(v,A,l));break t}}v=v.return}while(v!==null)}n_(c)}catch(W){l=W,de===c&&c!==null&&(de=c=c.return);continue}break}}function i_(){var o=Gh.current;return Gh.current=Rh,o===null?Rh:o}function Of(){me!==0&&me!==3&&me!==2||(me=4),Se===null||!(268435455&hn)&&!(268435455&Hh)||bs(Se,Pe)}function $h(o,l){var c=At;At|=2;var p=i_();for(Se===o&&Pe===l||(_s=null,un(o,l));;)try{xS();break}catch(g){r_(o,g)}if(jd(),At=c,Gh.current=p,de!==null)throw Error(n(261));return Se=null,Pe=0,me}function xS(){for(;de!==null;)s_(de)}function vS(){for(;de!==null&&!ZE();)s_(de)}function s_(o){var l=Z0(o.alternate,o,vr);o.memoizedProps=o.pendingProps,l===null?n_(o):de=l,Af.current=null}function n_(o){var l=o;do{var c=l.alternate;if(o=l.return,(32768&l.flags)==0){if((c=fS(c,l,vr))!==null)return void(de=c)}else{if((c=pS(c,l))!==null)return c.flags&=32767,void(de=c);if(o===null)return me=6,void(de=null);o.flags|=32768,o.subtreeFlags=0,o.deletions=null}if((l=l.sibling)!==null)return void(de=l);de=l=o}while(l!==null);me===0&&(me=5)}function ao(o,l,c){var p=Rt,g=oe.transition;try{oe.transition=null,Rt=1,function(v,E,A,I){do cn();while(vs!==null);if(6&At)throw Error(n(327));A=v.finishedWork;var O=v.finishedLanes;if(A===null)return null;if(v.finishedWork=null,v.finishedLanes=0,A===v.current)throw Error(n(177));v.callbackNode=null,v.callbackPriority=0;var G=A.lanes|A.childLanes;if(function(q,ut){var Et=q.pendingLanes&~ut;q.pendingLanes=ut,q.suspendedLanes=0,q.pingedLanes=0,q.expiredLanes&=ut,q.mutableReadLanes&=ut,q.entangledLanes&=ut,ut=q.entanglements;var H=q.eventTimes;for(q=q.expirationTimes;0<Et;){var P=31-Xr(Et),D=1<<P;ut[P]=0,H[P]=-1,q[P]=-1,Et&=~D}}(v,G),v===Se&&(de=Se=null,Pe=0),!(2064&A.subtreeFlags)&&!(2064&A.flags)||Xh||(Xh=!0,l_(O1,function(){return cn(),null})),G=(15990&A.flags)!=0,(15990&A.subtreeFlags)!=0||G){G=oe.transition,oe.transition=null;var rt=Rt;Rt=1;var L=At;At|=4,Af.current=null,function(q,ut){for(Y(q.containerInfo),nt=ut;nt!==null;)if(ut=(q=nt).child,(1028&q.subtreeFlags)!=0&&ut!==null)ut.return=q,nt=ut;else for(;nt!==null;){q=nt;try{var Et=q.alternate;if(1024&q.flags)switch(q.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Et!==null){var H=Et.memoizedProps,P=Et.memoizedState,D=q.stateNode,W=D.getSnapshotBeforeUpdate(q.elementType===q.type?H:Wr(q.type,H),P);D.__reactInternalSnapshotBeforeUpdate=W}break;case 3:$t&&AE(q.stateNode.containerInfo);break;default:throw Error(n(163))}}catch(gt){Wt(q,q.return,gt)}if((ut=q.sibling)!==null){ut.return=q.return,nt=ut;break}nt=q.return}Et=H0,H0=!1}(v,A),W0(A,v),vt(v.containerInfo),v.current=A,gS(A),JE(),At=L,Rt=rt,oe.transition=G}else v.current=A;if(Xh&&(Xh=!1,vs=v,jh=O),G=v.pendingLanes,G===0&&(xs=null),function(q){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(ch,q,void 0,(128&q.current.flags)==128)}catch{}}(A.stateNode),hr(v,be()),E!==null)for(I=v.onRecoverableError,A=0;A<E.length;A++)O=E[A],I(O.value,{componentStack:O.stack,digest:O.digest});if(zh)throw zh=!1,v=If,If=null,v;1&jh&&v.tag!==0&&cn(),G=v.pendingLanes,1&G?v===Mf?Ia++:(Ia=0,Mf=v):Ia=0,ci()}(o,l,c,p)}finally{oe.transition=g,Rt=p}return null}function cn(){if(vs!==null){var o=B1(jh),l=oe.transition,c=Rt;try{if(oe.transition=null,Rt=16>o?16:o,vs===null)var p=!1;else{if(o=vs,vs=null,jh=0,(6&At)!=0)throw Error(n(331));var g=At;for(At|=4,nt=o.current;nt!==null;){var v=nt,E=v.child;if(16&nt.flags){var A=v.deletions;if(A!==null){for(var I=0;I<A.length;I++){var O=A[I];for(nt=O;nt!==null;){var G=nt;switch(G.tag){case 0:case 11:case 15:Aa(8,G,v)}var rt=G.child;if(rt!==null)rt.return=G,nt=rt;else for(;nt!==null;){var L=(G=nt).sibling,q=G.return;if(z0(G),G===O){nt=null;break}if(L!==null){L.return=q,nt=L;break}nt=q}}}var ut=v.alternate;if(ut!==null){var Et=ut.child;if(Et!==null){ut.child=null;do{var H=Et.sibling;Et.sibling=null,Et=H}while(Et!==null)}}nt=v}}if(2064&v.subtreeFlags&&E!==null)E.return=v,nt=E;else t:for(;nt!==null;){if(2048&(v=nt).flags)switch(v.tag){case 0:case 11:case 15:Aa(9,v,v.return)}var P=v.sibling;if(P!==null){P.return=v.return,nt=P;break t}nt=v.return}}var D=o.current;for(nt=D;nt!==null;){var W=(E=nt).child;if(2064&E.subtreeFlags&&W!==null)W.return=E,nt=W;else t:for(E=D;nt!==null;){if(2048&(A=nt).flags)try{switch(A.tag){case 0:case 11:case 15:Nh(9,A)}}catch(It){Wt(A,A.return,It)}if(A===E){nt=null;break t}var gt=A.sibling;if(gt!==null){gt.return=A.return,nt=gt;break t}nt=A.return}}if(At=g,ci(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(ch,o)}catch{}p=!0}return p}finally{Rt=c,oe.transition=l}}return!1}function o_(o,l,c){o=gs(o,l=T0(0,l=io(c,l),1),1),l=He(),o!==null&&(pa(o,1,l),hr(o,l))}function Wt(o,l,c){if(o.tag===3)o_(o,o,c);else for(;l!==null;){if(l.tag===3){o_(l,o,c);break}if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(xs===null||!xs.has(p))){l=gs(l,o=E0(l,o=io(c,o),1),1),o=He(),l!==null&&(pa(l,1,o),hr(l,o));break}}l=l.return}}function yS(o,l,c){var p=o.pingCache;p!==null&&p.delete(l),l=He(),o.pingedLanes|=o.suspendedLanes&c,Se===o&&(Pe&c)===c&&(me===4||me===3&&(130023424&Pe)===Pe&&500>be()-Rf?un(o,0):Cf|=c),hr(o,l)}function a_(o,l){l===0&&(1&o.mode?(l=Md,!(130023424&(Md<<=1))&&(Md=4194304)):l=1);var c=He();(o=fi(o,l))!==null&&(pa(o,l,c),hr(o,c))}function bS(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),a_(o,c)}function TS(o,l){var c=0;switch(o.tag){case 13:var p=o.stateNode,g=o.memoizedState;g!==null&&(c=g.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(l),a_(o,c)}function l_(o,l){return Od(o,l)}function ES(o,l,c,p){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(o,l,c,p){return new ES(o,l,c,p)}function Lf(o){return!(!(o=o.prototype)||!o.isReactComponent)}function Ts(o,l){var c=o.alternate;return c===null?((c=Or(o.tag,l,o.key,o.mode)).elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=14680064&o.flags,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function Yh(o,l,c,p,g,v){var E=2;if(p=o,typeof o=="function")Lf(o)&&(E=1);else if(typeof o=="string")E=5;else t:switch(o){case d:return dn(c.children,g,v,l);case f:E=8,g|=8;break;case m:return(o=Or(12,c,l,2|g)).elementType=m,o.lanes=v,o;case b:return(o=Or(13,c,l,g)).elementType=b,o.lanes=v,o;case S:return(o=Or(19,c,l,g)).elementType=S,o.lanes=v,o;case w:return qh(c,g,v,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case _:E=10;break t;case x:E=9;break t;case y:E=11;break t;case C:E=14;break t;case M:E=16,p=null;break t}throw Error(n(130,o==null?o:typeof o,""))}return(l=Or(E,c,l,g)).elementType=o,l.type=p,l.lanes=v,l}function dn(o,l,c,p){return(o=Or(7,o,p,l)).lanes=c,o}function qh(o,l,c,p){return(o=Or(22,o,p,l)).elementType=w,o.lanes=c,o.stateNode={isHidden:!1},o}function kf(o,l,c){return(o=Or(6,o,null,l)).lanes=c,o}function Ff(o,l,c){return(l=Or(4,o.children!==null?o.children:[],o.key,l)).lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function SS(o,l,c,p,g){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ds,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bd(0),this.expirationTimes=Bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bd(0),this.identifierPrefix=p,this.onRecoverableError=g,te&&(this.mutableSourceEagerHydrationData=null)}function h_(o,l,c,p,g,v,E,A,I){return o=new SS(o,l,c,A,I),l===1?(l=1,v===!0&&(l|=8)):l=0,v=Or(3,null,null,l),o.current=v,v.stateNode=o,v.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yd(v),o}function u_(o){if(!o)return ps;t:{if(z(o=o._reactInternals)!==o||o.tag!==1)throw Error(n(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(_r(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(n(171))}if(o.tag===1){var c=o.type;if(_r(c))return I1(o,c,l)}return l}function c_(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return(o=K(l))===null?null:o.stateNode}function d_(o,l){if((o=o.memoizedState)!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function Kh(o,l){d_(o,l),(o=o.alternate)&&d_(o,l)}function wS(o){return(o=K(o))===null?null:o.stateNode}function AS(){return null}return Z0=function(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps||or.current)ar=!0;else{if(!(o.lanes&c)&&!(128&l.flags))return ar=!1,function(rt,L,q){switch(L.tag){case 3:B0(L),Qn();break;case 5:t0(L);break;case 1:_r(L.type)&&hh(L);break;case 4:Qd(L,L.stateNode.containerInfo);break;case 10:z1(0,L.type._context,L.memoizedProps.value);break;case 13:var ut=L.memoizedState;if(ut!==null)return ut.dehydrated!==null?(Gt(ee,1&ee.current),L.flags|=128,null):q&L.child.childLanes?O0(rt,L,q):(Gt(ee,1&ee.current),(rt=Gi(rt,L,q))!==null?rt.sibling:null);Gt(ee,1&ee.current);break;case 19:if(ut=(q&L.childLanes)!=0,(128&rt.flags)!=0){if(ut)return k0(rt,L,q);L.flags|=128}var Et=L.memoizedState;if(Et!==null&&(Et.rendering=null,Et.tail=null,Et.lastEffect=null),Gt(ee,ee.current),ut)break;return null;case 22:case 23:return L.lanes=0,I0(rt,L,q)}return Gi(rt,L,q)}(o,l,c);ar=(131072&o.flags)!=0}else ar=!1,Vt&&1048576&l.flags&&k1(l,ph,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Dh(o,l),o=l.pendingProps;var g=Yn(l,Fe.current);Jn(l,c),g=sf(null,l,p,o,g,c);var v=nf();return l.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,_r(p)?(v=!0,hh(l)):v=!1,l.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Yd(l),g.updater=bh,l.stateNode=g,g._reactInternals=l,Kd(l,p,o,c),l=ff(null,l,p,!0,v,c)):(l.tag=0,Vt&&v&&Fd(l),lr(null,l,g,c),l=l.child),l;case 16:p=l.elementType;t:{switch(Dh(o,l),o=l.pendingProps,p=(g=p._init)(p._payload),l.type=p,g=l.tag=function(rt){if(typeof rt=="function")return Lf(rt)?1:0;if(rt!=null){if((rt=rt.$$typeof)===y)return 11;if(rt===C)return 14}return 2}(p),o=Wr(p,o),g){case 0:l=df(null,l,p,o,c);break t;case 1:l=D0(null,l,p,o,c);break t;case 11:l=C0(null,l,p,o,c);break t;case 14:l=R0(null,l,p,Wr(p.type,o),c);break t}throw Error(n(306,p,""))}return l;case 0:return p=l.type,g=l.pendingProps,df(o,l,p,g=l.elementType===p?g:Wr(p,g),c);case 1:return p=l.type,g=l.pendingProps,D0(o,l,p,g=l.elementType===p?g:Wr(p,g),c);case 3:t:{if(B0(l),o===null)throw Error(n(387));p=l.pendingProps,g=(v=l.memoizedState).element,j1(o,l),yh(l,p,null,c);var E=l.memoizedState;if(p=E.element,te&&v.isDehydrated){if(v={element:p,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},l.updateQueue.baseState=v,l.memoizedState=v,256&l.flags){l=N0(o,l,p,c,g=io(Error(n(423)),l));break t}if(p!==g){l=N0(o,l,p,c,g=io(Error(n(424)),l));break t}for(te&&(Ir=OE(l.stateNode.containerInfo),xr=l,Vt=!0,Vr=null,ma=!1),c=J1(l,null,p,c),l.child=c;c;)c.flags=-3&c.flags|4096,c=c.sibling}else{if(Qn(),p===g){l=Gi(o,l,c);break t}lr(o,l,p,c)}l=l.child}return l;case 5:return t0(l),o===null&&Hd(l),p=l.type,g=l.pendingProps,v=o!==null?o.memoizedProps:null,E=g.children,ke(p,g)?E=null:v!==null&&ke(p,v)&&(l.flags|=32),M0(o,l),lr(o,l,E,c),l.child;case 6:return o===null&&Hd(l),null;case 13:return O0(o,l,c);case 4:return Qd(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=to(l,null,p,c):lr(o,l,p,c),l.child;case 11:return p=l.type,g=l.pendingProps,C0(o,l,p,g=l.elementType===p?g:Wr(p,g),c);case 7:return lr(o,l,l.pendingProps,c),l.child;case 8:case 12:return lr(o,l,l.pendingProps.children,c),l.child;case 10:t:{if(p=l.type._context,g=l.pendingProps,v=l.memoizedProps,z1(0,p,E=g.value),v!==null)if(jr(v.value,E)){if(v.children===g.children&&!or.current){l=Gi(o,l,c);break t}}else for((v=l.child)!==null&&(v.return=l);v!==null;){var A=v.dependencies;if(A!==null){E=v.child;for(var I=A.firstContext;I!==null;){if(I.context===p){if(v.tag===1){(I=Ui(-1,c&-c)).tag=2;var O=v.updateQueue;if(O!==null){var G=(O=O.shared).pending;G===null?I.next=I:(I.next=G.next,G.next=I),O.pending=I}}v.lanes|=c,(I=v.alternate)!==null&&(I.lanes|=c),Wd(v.return,c,l),A.lanes|=c;break}I=I.next}}else if(v.tag===10)E=v.type===l.type?null:v.child;else if(v.tag===18){if((E=v.return)===null)throw Error(n(341));E.lanes|=c,(A=E.alternate)!==null&&(A.lanes|=c),Wd(E,c,l),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===l){E=null;break}if((v=E.sibling)!==null){v.return=E.return,E=v;break}E=E.return}v=E}lr(o,l,g.children,c),l=l.child}return l;case 9:return g=l.type,p=l.pendingProps.children,Jn(l,c),p=p(g=Mr(g)),l.flags|=1,lr(o,l,p,c),l.child;case 14:return g=Wr(p=l.type,l.pendingProps),R0(o,l,p,g=Wr(p.type,g),c);case 15:return P0(o,l,l.type,l.pendingProps,c);case 17:return p=l.type,g=l.pendingProps,g=l.elementType===p?g:Wr(p,g),Dh(o,l),l.tag=1,_r(p)?(o=!0,hh(l)):o=!1,Jn(l,c),q1(l,p,g),Kd(l,p,g,c),ff(null,l,p,!0,o,c);case 19:return k0(o,l,c);case 22:return I0(o,l,c)}throw Error(n(156,l.tag))},t.attemptContinuousHydration=function(o){if(o.tag===13){var l=fi(o,134217728);l!==null&&Nr(l,o,134217728,He()),Kh(o,134217728)}},t.attemptDiscreteHydration=function(o){if(o.tag===13){var l=fi(o,1);l!==null&&Nr(l,o,1,He()),Kh(o,1)}},t.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13){var l=ys(o),c=fi(o,l);c!==null&&Nr(c,o,l,He()),Kh(o,l)}},t.attemptSynchronousHydration=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var c=fa(l.pendingLanes);c!==0&&(Nd(l,1|c),hr(l,be()),!(6&At)&&(oo(),ci()))}break;case 13:e_(function(){var p=fi(o,1);if(p!==null){var g=He();Nr(p,o,1,g)}}),Kh(o,1)}},t.batchedUpdates=function(o,l){var c=At;At|=1;try{return o(l)}finally{(At=c)===0&&(oo(),dh&&ci())}},t.createComponentSelector=function(o){return{$$typeof:Oh,value:o}},t.createContainer=function(o,l,c,p,g,v,E){return h_(o,l,!1,null,0,p,0,v,E)},t.createHasPseudoClassSelector=function(o){return{$$typeof:Lh,value:o}},t.createHydrationContainer=function(o,l,c,p,g,v,E,A,I){return(o=h_(c,p,!0,o,0,v,0,A,I)).context=u_(null),c=o.current,(v=Ui(p=He(),g=ys(c))).callback=l??null,gs(c,v,g),o.current.lanes=g,pa(o,g,p),hr(o,p),o},t.createPortal=function(o,l,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:p==null?null:""+p,children:o,containerInfo:l,implementation:c}},t.createRoleSelector=function(o){return{$$typeof:kh,value:o}},t.createTestNameSelector=function(o){return{$$typeof:Fh,value:o}},t.createTextSelector=function(o){return{$$typeof:Uh,value:o}},t.deferredUpdates=function(o){var l=Rt,c=oe.transition;try{return oe.transition=null,Rt=16,o()}finally{Rt=l,oe.transition=c}},t.discreteUpdates=function(o,l,c,p,g){var v=Rt,E=oe.transition;try{return oe.transition=null,Rt=1,o(l,c,p,g)}finally{Rt=v,oe.transition=E,At===0&&oo()}},t.findAllNodes=wf,t.findBoundingRects=function(o,l){if(!ua)throw Error(n(363));l=wf(o,l),o=[];for(var c=0;c<l.length;c++)o.push(lE(l[c]));for(l=o.length-1;0<l;l--)for(var p=(c=o[l]).x,g=p+c.width,v=c.y,E=v+c.height,A=l-1;0<=A;A--)if(l!==A){var I=o[A],O=I.x,G=O+I.width,rt=I.y,L=rt+I.height;if(p>=O&&v>=rt&&g<=G&&E<=L){o.splice(l,1);break}if(!(p!==O||c.width!==I.width||L<v||rt>E)){rt>v&&(I.height+=rt-v,I.y=v),L<E&&(I.height=E-rt),o.splice(l,1);break}if(!(v!==rt||c.height!==I.height||G<p||O>g)){O>p&&(I.width+=O-p,I.x=p),G<g&&(I.width=g-O),o.splice(l,1);break}}return o},t.findHostInstance=c_,t.findHostInstanceWithNoPortals=function(o){return(o=(o=V(o))!==null?k(o):null)===null?null:o.stateNode},t.findHostInstanceWithWarning=function(o){return c_(o)},t.flushControlled=function(o){var l=At;At|=1;var c=oe.transition,p=Rt;try{oe.transition=null,Rt=1,o()}finally{Rt=p,oe.transition=c,(At=l)===0&&(oo(),ci())}},t.flushPassiveEffects=cn,t.flushSync=e_,t.focusWithin=function(o,l){if(!ua)throw Error(n(363));for(l=Q0(o=Tf(o),l),l=Array.from(l),o=0;o<l.length;){var c=l[o++];if(!ca(c)){if(c.tag===5&&cE(c.stateNode))return!0;for(c=c.child;c!==null;)l.push(c),c=c.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Rt},t.getFindAllNodesFailureDescription=function(o,l){if(!ua)throw Error(n(363));var c=0,p=[];o=[Tf(o),0];for(var g=0;g<o.length;){var v=o[g++],E=o[g++],A=l[E];if((v.tag!==5||!ca(v))&&(Ef(v,A)&&(p.push(Sf(A)),++E>c&&(c=E)),E<l.length))for(v=v.child;v!==null;)o.push(v,E),v=v.sibling}if(c<l.length){for(o=[];c<l.length;c++)o.push(Sf(l[c]));return`findAllNodes was able to match part of the selector:
  `+p.join(" > ")+`

No matching component was found for:
  `+o.join(" > ")}return null},t.getPublicRootInstance=function(o){return(o=o.current).child?o.child.tag===5?ht(o.child.stateNode):o.child.stateNode:null},t.injectIntoDevTools=function(o){if(o={bundleType:o.bundleType,version:o.version,rendererPackageName:o.rendererPackageName,rendererConfig:o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:wS,findFiberByHostInstance:o.findFiberByHostInstance||AS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)o=!0;else{try{ch=l.inject(o),ui=l}catch{}o=!!l.checkDCE}}return o},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(o,l,c,p){if(!ua)throw Error(n(363));o=wf(o,l);var g=dE(o,c,p).disconnect;return{disconnect:function(){g()}}},t.registerMutableSourceForHydration=function(o,l){var c=l._getVersion;c=c(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,c]:o.mutableSourceEagerHydrationData.push(l,c)},t.runWithPriority=function(o,l){var c=Rt;try{return Rt=o,l()}finally{Rt=c}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(o,l,c,p){var g=l.current,v=He(),E=ys(g);return c=u_(c),l.context===null?l.context=c:l.pendingContext=c,(l=Ui(v,E)).payload={element:o},(p=p===void 0?null:p)!==null&&(l.callback=p),(o=gs(g,l,E))!==null&&(Nr(o,g,E,v),vh(o,g,E)),E},t}),eT}function jg(e,t){e.addChild&&(e.addChild(t),typeof t.didMount=="function"&&t.didMount(t,e))}function _T(e,t){var r,i,s;(r=e.willUnmount)===null||r===void 0||r.call(e,e,t),((i=e.config)===null||i===void 0?void 0:i.destroyChildren)!==!1&&(s=e.children)!==null&&s!==void 0&&s.length&&us(e.children).forEach(function(n){_T(n,e)})}function nT(e,t){var r;_T(t,e),e.removeChild(t);var i=(r=t.config)!==null&&r!==void 0?r:{},s=i.destroy,n=s===void 0||s,a=i.destroyChildren,h=a===void 0||a,u=i.destroyTexture,d=u!==void 0&&u,f=i.destroyBaseTexture,m=f!==void 0&&f;n&&t.destroy({children:h,texture:d,baseTexture:m})}function oT(e,t,r){ne(t!==r,"pixi-react: PixiFiber cannot insert node before itself"),e.children.indexOf(t)!==-1&&e.removeChild(t);var i=e.getChildIndex(r);e.addChildAt(t,i)}function xT(e){if(ne(Ut.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`."),Zs.has(e)){var t=Zs.get(e).pixiFiberContainer;ni.updateContainer(null,t,void 0,function(){Zs.delete(e)})}}function vT(e){ne(Ut.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`.");var t=Zs.get(e);if(ne(!t,"Pixi React: createRoot should only be called once"),!t){var r=ni.createContainer(e);t={pixiFiberContainer:r,reactRoot:{render:function(i){return ni.updateContainer(i,r,void 0),ni.getPublicRootInstance(r)},unmount:function(){xT(e),Zs.delete(e)}}},Zs.set(e,t)}return t.reactRoot}function MC(e,t,r){var i;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),r!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),Zs.has(t)?i=Zs.get(t).reactRoot:i=vT(t),i.render(e)}function DC(e){xT(e)}function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Wl.apply(this,arguments)}function BC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lT(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,dT(i.key),i)}}function hs(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zc(e,t){return Zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Zc(e,t)}function NC(e,t){if(t&&(Ar(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hs(e)}function Jc(e){return Jc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jc(e)}function LC(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,i=Jc(e);if(t){var s=Jc(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return NC(this,r)}}function hT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hT(Object(r),!0).forEach(function(i){ce(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ET(){var e=(0,se.useContext)(td);return ne(e instanceof Un,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),e}function UC(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=ET();ne(typeof e=="function","`useTick` needs a callback function."),ne(r instanceof Un,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var i=(0,se.useRef)(null);(0,se.useEffect)(function(){i.current=e},[e]),(0,se.useEffect)(function(){if(t){var s=function(n){return i.current.apply(r.ticker,[n,r.ticker])};return r.ticker.add(s),function(){r.ticker&&r.ticker.remove(s)}}},[t])}function GC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qg(e,t,r){return Qg=GC()?Reflect.construct.bind():function(i,s,n){var a=[null];a.push.apply(a,s);var h=new(Function.bind.apply(i,a));return n&&Zc(h,n.prototype),h},Qg.apply(null,arguments)}function cT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Kc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(r),!0).forEach(function(i){ce(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var se,zt,ZA,tC,Qc,ea,fT,pT,Vg,eC,Wg,Ii,rC,iC,sC,nC,oC,aC,lC,hC,uC,cC,dC,fC,pC,mC,gC,_C,xC,vC,yC,bC,gr,TC,mT,Jb,tT,eT,rT,$g,Yg,SC,iT,CC,gT,qg,Yc,sT,ra,Gn,RC,aT,ni,PC,IC,Zs,td,yT,bT,OC,uT,TT,kC,Kg,FC,HC,zC,XC,jC,VC,WC,$C,YC,qC,KC,QC,ZC,JC,wT=T(()=>{Z();We();Be();Ag();jc();Ng();Og();Gs();Lg();Hs();Fg();bt();se=qt(Ma());Gg();nc();zt=qt(Yb());ZA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};tC=function(e){return e==null};Qc=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];fT=function(e){var t,r=e;if(!Array.isArray(r)){if(t=e,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(e)}var i={};return r.forEach(function(s){i[s]=!0}),function(s){return i[s]!==void 0}},pT=function(e){return function(){return!e.apply(void 0,arguments)}},Vg="children",eC=(ce(ea={},Vg,!0),ce(ea,"parent",!0),ce(ea,"worldAlpha",!0),ce(ea,"worldTransform",!0),ce(ea,"worldVisible",!0),ea),Wg={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Ii=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=function(h){return requestAnimationFrame(function(){var u,d;h==null||(u=h.__reactpixi)===null||u===void 0||(d=u.root)===null||d===void 0||d.emit("__REACT_PIXI_REQUEST_RENDER__")})},s=function(h,u){if(r.hasOwnProperty(h))return ne(u.typeofs.some(function(d){return Ar(r[h])===d})||u.instanceofs.some(function(d){return r[h]instanceof d}),"".concat(e," ").concat(h," prop is invalid")),r[h]};if(r.texture)return ne(r.texture instanceof $,"".concat(e," texture needs to be typeof `Texture`")),r.texture;var n=s("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||s("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||s("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,$]});ne(!!n,"".concat(e," could not get texture from props"));var a=$.from(n);return a.__reactpixi={root:t},a.once("update",i),a.once("loaded",i),a.valid&&i(a),a},rC=pT(fT([].concat(us(Object.keys(eC)),us(Qc))));iC=function(e,t){var r=t.text,i=t.style;return new bc(r,i)},sC=function(){return new Ut};nC=["draw","geometry"],oC=function(e,t){var r=t.geometry;ne(!r||r instanceof Pi,"Graphics geometry needs to be a `PIXI.Graphics`");var i=r?new Pi(r.geometry):new Pi;return i.applyProps=function(s,n,a){var h=a.draw;a.geometry;var u=Mi(s,n,Js(a,nC));return n.draw!==h&&typeof h=="function"&&(u=!0,h.call(i,i)),u},i},aC=["image","texture"],lC=function(e,t){var r=t.leftWidth,i=r===void 0?10:r,s=t.topHeight,n=s===void 0?10:s,a=t.rightWidth,h=a===void 0?10:a,u=t.bottomHeight,d=u===void 0?10:u,f=Ii("NineSlicePlane",e,t),m=new Ll(f,i,n,h,d);return m.applyProps=function(_,x,y){var b=y.image,S=y.texture,C=Mi(_,x,Js(y,aC));return(b||S)&&(S!==x.texture&&(C=!0),_.texture=Ii("NineSlicePlane",e,y)),C},m};hC=function(e,t){var r=t.maxSize,i=r===void 0?1500:r,s=t.batchSize,n=s===void 0?16384:s,a=t.autoResize,h=a!==void 0&&a,u=$c($c({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),d=$c($c({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),f=new Ul(i,u,n,h);return f.willUnmount=function(m,_,x){m.destroy(d)},f},uC=["image","texture"],cC=function(e,t){var r=new ve(Ii("Sprite",e,t));return r.applyProps=function(i,s,n){var a=n.image,h=n.texture,u=Mi(i,s,Js(n,uC));return(h&&s.texture!==n.texture||a&&s.image!==n.image)&&(s.texture!==n.texture&&(u=!0),i.texture=Ii("Sprite",e,n)),u},r},dC=["textures","isPlaying","initialFrame"],fC=function(e,t){var r=t.textures,i=t.images,s=t.isPlaying,n=s===void 0||s,a=t.initialFrame,h=function(d){return d.map(function(f){return ne(f instanceof $||f?.texture,"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),f})},u=i?ls.fromImages(i):new ls(h(r));return u[n?"gotoAndPlay":"gotoAndStop"](a||0),u.applyProps=function(d,f,m){var _=m.textures,x=m.isPlaying,y=m.initialFrame,b=Mi(d,f,Js(m,dC));if(_&&f.textures!==_&&(d.textures=h(_),b=!0),x!==f.isPlaying||y!==f.initialFrame){var S=typeof y=="number"?y:u.currentFrame||0;u[x?"gotoAndPlay":"gotoAndStop"](S),b=!0}return b},u},pC=function(e,t){var r=t.text,i=r===void 0?"":r,s=t.style,n=s===void 0?{}:s,a=t.isSprite,h=new Mn(i,n);return a?(h.updateText(),new ve(h.texture)):h},mC=["tileScale","tilePosition","image","texture"],gC=function(e,t){var r=t.width,i=r===void 0?100:r,s=t.height,n=s===void 0?100:s,a=Ii("TilingSprite",e,t),h=new Fn(a,i,n);return h.applyProps=function(u,d,f){var m=f.tileScale,_=f.tilePosition,x=f.image,y=f.texture,b=Mi(u,d,Js(f,mC));if(_){var S,C=Vl(_);(S=u.tilePosition).set.apply(S,us(C)),b=!qb(Vl(d.tilePosition),C)||b}if(m){var M,w=Vl(m);(M=u.tileScale).set.apply(M,us(w)),b=!qb(Vl(d.tileScale),w)||b}return(x||y)&&(y!==d.texture&&(b=!0),u.texture=Ii("Sprite",e,f)),b},h},_C=["image","texture"],xC=function(e,t){var r=Ii("Mesh",e,t),i=t.vertices,s=t.uvs,n=t.indices,a=t.drawMode,h=a===void 0?ze.TRIANGLES:a,u=new kl(r,i,s,n,h);return u.applyProps=function(d,f,m){var _=m.image,x=m.texture,y=Mi(d,f,Js(m,_C));return(_||x)&&(x!==f.texture&&(y=!0),d.texture=Ii("Mesh",e,m)),y},u},vC=["image","texture"],yC=function(e,t){var r=Ii("SimpleRope",e,t),i=t.points,s=new Fl(r,i);return s.applyProps=function(n,a,h){var u=h.image,d=h.texture,f=Js(h,vC);ne(Array.isArray(h.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var m=Mi(n,a,f);return(u||d)&&(d!==a.texture&&(m=!0),n.texture=Ii("SimpleRope",e,h)),m},s},bC=Object.freeze({__proto__:null,BitmapText:iC,Container:sC,Graphics:oC,NineSlicePlane:lC,ParticleContainer:hC,Sprite:cC,Text:pC,TilingSprite:gC,SimpleMesh:xC,SimpleRope:yC,AnimatedSprite:fC});gr={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},TC=Object.keys(gr).reduce(function(e,t){return Zb(Zb({},e),{},ce({},t,bC[t]))},{}),mT={};$g={},Yg={},SC={get exports(){return Yg},set exports(e){Yg=e}},iT={};({get exports(){return $g},set exports(e){$g=e}}).exports=AC();CC=JA($g),gT={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},qg={},Yc={get exports(){return qg},set exports(e){qg=e}};(function(){var e,t,r,i,s,n;typeof performance<"u"&&performance!==null&&performance.now?Yc.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Yc.exports=function(){return(e()-s)/1e6},t=process.hrtime,i=(e=function(){var a;return 1e9*(a=t())[0]+a[1]})(),n=1e9*process.uptime(),s=i-n):Date.now?(Yc.exports=function(){return Date.now()-r},r=Date.now()):(Yc.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(ZA);ra={},Gn={};({get exports(){return ra},set exports(e){ra=e}}).exports=(sT||(sT=1,Gn.ConcurrentRoot=1,Gn.ContinuousEventPriority=4,Gn.DefaultEventPriority=16,Gn.DiscreteEventPriority=1,Gn.IdleEventPriority=536870912,Gn.LegacyRoot=0),Gn);RC={};aT=null,ni=CC({getRootHostContext:function(){return RC},getChildHostContext:function(e){return e},getChildHostContextForEventComponent:function(e){return e},getPublicInstance:function(e){return e},getCurrentEventPriority:function(){return function(){var e,t;if(typeof window>"u")return ra.DefaultEventPriority;switch((e=window)===null||e===void 0||(t=e.event)===null||t===void 0?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ra.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ra.ContinuousEventPriority;default:return ra.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(e){var t,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=TC[e];if(typeof n=="function"&&(t=n(s,i)),!t){var a=mT[e];a&&((t=a.create(i,{root:s})).didMount=a.didMount?a.didMount.bind(t):void 0,t.willUnmount=a.willUnmount?a.willUnmount.bind(t):void 0,t.applyProps=a.applyProps?a.applyProps.bind(t):void 0,t.config=a.config)}return t&&(t.__reactpixi={root:s},(typeof((r=t)===null||r===void 0?void 0:r.applyProps)=="function"?t.applyProps:Mi)(t,{},i)),t},hideInstance:function(e){e.visible=!1},unhideInstance:function(e,t){var r=t==null||!t.hasOwnProperty("visible")||t.visible;e.visible=r},finalizeInitialChildren:function(e,t,r){return!1},prepareUpdate:function(e,t,r,i,s,n){return aT=function(a,h,u,d){var f=null;for(var m in u)!d.hasOwnProperty(m)&&u.hasOwnProperty(m)&&u[m]!==null&&(m===Vg||(f||(f=[]),f.push(m,null)));for(var _ in d){var x=d[_],y=u!==null?u[_]:void 0;!d.hasOwnProperty(_)||x===y||x===null&&y===null||_===Vg||(f||(f=[]),f.push(_,x))}return f}(0,0,r,i)},shouldSetTextContent:function(e,t){return!1},shouldDeprioritizeSubtree:function(e,t){var r=t.alpha===void 0||t.alpha>0,i=t.renderable===void 0||t.renderable===!0,s=t.visible===void 0||t.visible===!0;return!(r&&i&&s)},createTextInstance:function(e,t,r){ne(!1,'pixi-react: Error trying to add text node "'.concat(e,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(e,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:qg,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var e,t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var n=jg.apply(null,i);return(e=i[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),n},appendChild:function(){for(var e,t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var n=jg.apply(null,i);return(e=i[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),n},appendChildToContainer:function(){for(var e,t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var n=jg.apply(null,i);return(e=i[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),n},removeChild:function(){for(var e,t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var n=nT.apply(null,i);return(e=i[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),n},removeChildFromContainer:function(){for(var e,t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var n=nT.apply(null,i);return(e=i[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),n},insertBefore:oT,insertInContainerBefore:function(){for(var e,t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var n=oT.apply(null,i);return(e=i[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),n},commitUpdate:function(e,t,r,i,s){var n,a,h=e&&e.applyProps;typeof h!="function"&&(h=Mi),(h(e,i,s)||aT)&&((n=e.__reactpixi)===null||n===void 0||(a=n.root)===null||a===void 0||a.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(e,t,r,i,s){},commitTextUpdate:function(e,t,r){},resetTextContent:function(e){},clearContainer:function(e){},getFundamentalComponentInstance:function(e){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(e){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},getInstanceFromNode:function(e){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(e){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(e){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(e){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(e){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(e){}}),PC=gT.dependencies["react-dom"].replace(/[^0-9.]/g,""),IC=gT.name;ni.injectIntoDevTools({bundleType:0,version:PC,rendererPackageName:IC,findHostInstanceByFiber:ni.findHostInstance});Zs=new Map;td=se.default.createContext(null),yT=td.Provider,bT=td.Consumer,OC=function(e){var t=se.default.forwardRef(function(r,i){return se.default.createElement(bT,null,function(s){return se.default.createElement(e,Wl({},r,{ref:i,app:s}))})});return t.displayName="withPIXIApp(".concat(e.displayName||e.name,")"),t};uT=function(){},TT={width:zt.default.number,height:zt.default.number,onMount:zt.default.func,onUnmount:zt.default.func,raf:zt.default.bool,renderOnComponentChange:zt.default.bool,children:zt.default.node,options:zt.default.shape({autoStart:zt.default.bool,width:zt.default.number,height:zt.default.number,useContextAlpha:zt.default.bool,backgroundAlpha:zt.default.number,autoDensity:zt.default.bool,antialias:zt.default.bool,preserveDrawingBuffer:zt.default.bool,resolution:zt.default.number,forceCanvas:zt.default.bool,backgroundColor:zt.default.number,clearBeforeRender:zt.default.bool,powerPreference:zt.default.string,sharedTicker:zt.default.bool,sharedLoader:zt.default.bool,resizeTo:function(e,t){var r=e[t];r&&ne(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ar(r),", expect `window` or an `HTMLElement`."))},view:function(e,t,r){var i=e[t];i&&ne(i instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ar(i),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},kC={width:800,height:600,onMount:uT,onUnmount:uT,raf:!0,renderOnComponentChange:!0},Kg=function(e){(function(a,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(h&&h.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),h&&Zc(a,h)})(n,se.default.Component);var t,r,i,s=LC(n);function n(){var a;BC(this,n);for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return ce(hs(a=s.call.apply(s,[this].concat(u))),"_canvas",null),ce(hs(a),"_mediaQuery",null),ce(hs(a),"_ticker",null),ce(hs(a),"_needsUpdate",!0),ce(hs(a),"app",null),ce(hs(a),"updateSize",function(){var f=a.props,m=f.width,_=f.height,x=f.options;x!=null&&x.resolution||(a.app.renderer.resolution=window.devicePixelRatio,a.resetInteractionManager()),a.app.renderer.resize(m,_)}),ce(hs(a),"needsRenderUpdate",function(){a._needsUpdate=!0}),ce(hs(a),"renderStage",function(){var f=a.props,m=f.renderOnComponentChange;!f.raf&&m&&a._needsUpdate&&(a._needsUpdate=!1,a.app.renderer.render(a.app.stage))}),a}return t=n,(r=[{key:"componentDidMount",value:function(){var a=this.props,h=a.onMount,u=a.width,d=a.height,f=a.options,m=a.raf,_=a.renderOnComponentChange;this.app=new Un(qc(qc({width:u,height:d,view:this._canvas},f),{},{autoDensity:f?.autoDensity!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[m?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=ni.createContainer(this.app.stage),ni.updateContainer(this.getChildren(),this.mountNode,this),h(this.app),f!=null&&f.autoDensity&&window.matchMedia&&f?.resolution===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),_&&!m&&(this._ticker=new Ot,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(a,h,u){var d,f=this.props,m=f.width,_=f.height,x=f.raf,y=f.renderOnComponentChange,b=f.options;b?.resolution!==void 0&&a?.options.resolution!==b?.resolution&&(this.app.renderer.resolution=b.resolution,this.resetInteractionManager()),a.height===_&&a.width===m&&((d=a.options)===null||d===void 0?void 0:d.resolution)===b?.resolution||this.updateSize(),a.raf!==x&&this.app.ticker[x?"start":"stop"](),ni.updateContainer(this.getChildren(),this.mountNode,this),a.width===m&&a.height===_&&a.raf===x&&a.renderOnComponentChange===y&&a.options===b||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var a=this.app.renderer.plugins.interaction;a!=null&&a.resolution&&(a.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var a=this.props.children;return se.default.createElement(yT,{value:this.app},a)}},{key:"componentDidCatch",value:function(a,h){console.error("Error occurred in `Stage`."),console.error(a),console.error(h)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),ni.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var a,h,u=this,d=this.props.options;return d&&d.view?(ne(d.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):se.default.createElement("canvas",Wl({},(a=this.props,h=[].concat(us(Object.keys(TT)),us(Object.keys(Wg))),Object.keys(a).filter(function(f){return!h.includes(f)}).reduce(function(f,m){return qc(qc({},f),{},ce({},m,a[m]))},{})),{ref:function(f){return u._canvas=f}}))}}])&&lT(t.prototype,r),i&&lT(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}();Kg.propTypes=TT,Kg.defaultProps=kC;FC=Kg;HC=["children","apply"];zC=function(e,t){ne(Ar(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(t),i=function(s){var n=s.children,a=s.apply,h=Js(s,HC),u=(0,se.useRef)((0,se.useMemo)(function(){return r.map(function(m){var _,x=(h==null||(_=h[m])===null||_===void 0?void 0:_.construct)||[];return Qg(t[m],us(x))})},[r])),d=(0,se.useMemo)(function(){return r.reduce(function(m,_,x){return Kc(Kc({},m),{},ce({},_,u.current[x]))},{})},[r]),f=(0,se.useMemo)(function(){return Object.keys(h).filter(pT(fT(r))).reduce(function(m,_){return Kc(Kc({},m),{},ce({},_,h[_]))},{})},[h,r]);return r.forEach(function(m,_){return Object.assign(u.current[_],h[m])}),a&&function(){for(var m=arguments.length,_=new Array(m),x=0;x<m;x++)_[x]=arguments[x];return _.every(function(y){return typeof y=="function"})}(a)&&a.call(e,d),se.default.createElement(e,Wl({},f,{filters:u.current}),n)};return i.displayName="FilterWrapper",i.propTypes={children:zt.default.node,apply:zt.default.func},i},XC=gr.BitmapText,jC=gr.Container,VC=gr.Graphics,WC=gr.NineSlicePlane,$C=gr.ParticleContainer,YC=gr.Sprite,qC=gr.AnimatedSprite,KC=gr.Text,QC=gr.TilingSprite,ZC=gr.SimpleMesh,JC=gr.SimpleRope});var Zg=Yr((kH,AT)=>{AT.exports=(wT(),RS(ST))});var ed=Yr(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0});function tR(e){var t=new Uint32Array(1);return t[0]=e[0]*1664525+1013904223,t}Jg.default=tR});var PT=Yr(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.makeNoise2D=void 0;var rd=ed(),eR=1/47,e1=(Math.sqrt(2+1)-1)/2,rR=(1/Math.sqrt(2+1)-1)/2;function CT(e,t,r){return{dx:-t-e*e1,dy:-r-e*e1,xsb:t,ysb:r}}function iR(e){for(var t=[],r=0;r<$l.length;r+=4){for(var i=sR[$l[r]],s=null,n=null,a=0;a<i.length;a+=3)n=CT(i[a],i[a+1],i[a+2]),s===null?t[r/4]=n:s.next=n,s=n;n.next=CT($l[r+1],$l[r+2],$l[r+3])}for(var h=[],r=0;r<t1.length;r+=2)h[t1[r]]=t[t1[r+1]];for(var u=new Uint8Array(256),d=new Uint8Array(256),f=new Uint8Array(256),r=0;r<256;r++)f[r]=r;var m=new Uint32Array(1);m[0]=e,m=rd.default(rd.default(rd.default(m)));for(var r=255;r>=0;r--){m=rd.default(m);var _=new Uint32Array(1);_[0]=(m[0]+31)%(r+1),_[0]<0&&(_[0]+=r+1),u[r]=f[_[0]],d[r]=u[r]&14,f[_[0]]=f[r]}return function(x,y){for(var b=(x+y)*rR,S=x+b,C=y+b,M=Math.floor(S),w=Math.floor(C),R=(M+w)*e1,tt=x-(M+R),et=y-(w+R),j=S-M,z=C-w,it=j+z,V=j-z+1|it<<1|it+z<<2|it+j<<4,K=0,ot=h[V];ot!==void 0;ot=ot.next){var k=tt+ot.dx,F=et+ot.dy,_t=2-k*k-F*F;if(_t>0){var ht=M+ot.xsb,st=w+ot.ysb,X=u[ht&255],Y=d[X+st&255],vt=RT[Y]*k+RT[Y+1]*F;K+=_t*_t*_t*_t*vt}}return K*eR}}id.makeNoise2D=iR;var sR=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],RT=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],t1=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],$l=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0]});var IT=Yr(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.makeNoise3D=void 0;var sd=ed(),nR=1/103,nd=(Math.sqrt(3+1)-1)/3,oR=(1/Math.sqrt(3+1)-1)/3;function r1(e,t,r,i){return{dx:-t-e*nd,dy:-r-e*nd,dz:-i-e*nd,xsb:t,ysb:r,zsb:i}}function aR(e){for(var t=[],r=0;r<Di.length;r+=9){for(var i=lR[Di[r]],s=null,n=null,a=0;a<i.length;a+=4)n=r1(i[a],i[a+1],i[a+2],i[a+3]),s===null?t[r/9]=n:s.next=n,s=n;n.next=r1(Di[r+1],Di[r+2],Di[r+3],Di[r+4]),n.next.next=r1(Di[r+5],Di[r+6],Di[r+7],Di[r+8])}for(var h=[],r=0;r<s1.length;r+=2)h[s1[r]]=t[s1[r+1]];for(var u=new Uint8Array(256),d=new Uint8Array(256),f=new Uint8Array(256),r=0;r<256;r++)f[r]=r;var m=new Uint32Array(1);m[0]=e,m=sd.default(sd.default(sd.default(m)));for(var r=255;r>=0;r--){m=sd.default(m);var _=new Uint32Array(1);_[0]=(m[0]+31)%(r+1),_[0]<0&&(_[0]+=r+1),u[r]=f[_[0]],d[r]=u[r]%24*3,f[_[0]]=f[r]}return function(x,y,b){for(var S=(x+y+b)*oR,C=x+S,M=y+S,w=b+S,R=Math.floor(C),tt=Math.floor(M),et=Math.floor(w),j=(R+tt+et)*nd,z=x-(R+j),it=y-(tt+j),V=b-(et+j),K=C-R,ot=M-tt,k=w-et,F=K+ot+k,_t=ot-k+1|K-ot+1<<1|K-k+1<<2|F<<3|F+k<<5|F+ot<<7|F+K<<9,ht=0,st=h[_t];st!==void 0;st=st.next){var X=z+st.dx,Y=it+st.dy,vt=V+st.dz,wt=2-X*X-Y*Y-vt*vt;if(wt>0){var St=R+st.xsb,ye=tt+st.ysb,Zt=et+st.zsb,ke=u[St&255],pe=u[ke+ye&255],Jt=d[pe+Zt&255],hi=i1[Jt]*X+i1[Jt+1]*Y+i1[Jt+2]*vt;ht+=wt*wt*wt*wt*hi}}return ht*nR}}od.makeNoise3D=aR;var lR=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],i1=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],s1=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],Di=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0]});var MT=Yr(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.makeNoise4D=void 0;var ad=ed(),hR=1/30,Yl=(Math.sqrt(4+1)-1)/4,uR=(1/Math.sqrt(4+1)-1)/4;function ld(e,t,r,i,s){return{dx:-t-e*Yl,dy:-r-e*Yl,dz:-i-e*Yl,dw:-s-e*Yl,xsb:t,ysb:r,zsb:i,wsb:s}}function cR(e){for(var t=[],r=0;r<Le.length;r+=16){for(var i=dR[Le[r]],s=null,n=null,a=0;a<i.length;a+=5)n=ld(i[a],i[a+1],i[a+2],i[a+3],i[a+4]),s===null?t[r/16]=n:s.next=n,s=n;n.next=ld(Le[r+1],Le[r+2],Le[r+3],Le[r+4],Le[r+5]),n.next.next=ld(Le[r+6],Le[r+7],Le[r+8],Le[r+9],Le[r+10]),n.next.next.next=ld(Le[r+11],Le[r+12],Le[r+13],Le[r+14],Le[r+15])}for(var h=[],r=0;r<n1.length;r+=2)h[n1[r]]=t[n1[r+1]];for(var u=new Uint8Array(256),d=new Uint8Array(256),f=new Uint8Array(256),r=0;r<256;r++)f[r]=r;var m=new Uint32Array(1);m[0]=e,m=ad.default(ad.default(ad.default(m)));for(var r=255;r>=0;r--){m=ad.default(m);var _=new Uint32Array(1);_[0]=(m[0]+31)%(r+1),_[0]<0&&(_[0]+=r+1),u[r]=f[_[0]],d[r]=u[r]&252,f[_[0]]=f[r]}return function(x,y,b,S){for(var C=(x+y+b+S)*uR,M=x+C,w=y+C,R=b+C,tt=S+C,et=Math.floor(M),j=Math.floor(w),z=Math.floor(R),it=Math.floor(tt),V=(et+j+z+it)*Yl,K=x-(et+V),ot=y-(j+V),k=b-(z+V),F=S-(it+V),_t=M-et,ht=w-j,st=R-z,X=tt-it,Y=_t+ht+st+X,vt=st-X+1|ht-st+1<<1|ht-X+1<<2|_t-ht+1<<3|_t-st+1<<4|_t-X+1<<5|Y<<6|Y+X<<8|Y+st<<11|Y+ht<<14|Y+_t<<17,wt=0,St=h[vt];St!==void 0;St=St.next){var ye=K+St.dx,Zt=ot+St.dy,ke=k+St.dz,pe=F+St.dw,Jt=2-ye*ye-Zt*Zt-ke*ke-pe*pe;if(Jt>0){var hi=et+St.xsb,ds=j+St.ysb,sr=z+St.zsb,$t=it+St.wsb,nr=u[hi&255],te=u[nr+ds&255],la=u[te+sr&255],Li=d[la+$t&255],ha=hd[Li]*ye+hd[Li+1]*Zt+hd[Li+2]*ke+hd[Li+3]*pe;wt+=Jt*Jt*Jt*Jt*ha}}return wt*hR}}ud.makeNoise4D=cR;var dR=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],hd=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],n1=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],Le=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1]});var DT=Yr(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.makeNoise4D=tn.makeNoise3D=tn.makeNoise2D=void 0;var fR=PT();Object.defineProperty(tn,"makeNoise2D",{enumerable:!0,get:function(){return fR.makeNoise2D}});var pR=IT();Object.defineProperty(tn,"makeNoise3D",{enumerable:!0,get:function(){return pR.makeNoise3D}});var mR=MT();Object.defineProperty(tn,"makeNoise4D",{enumerable:!0,get:function(){return mR.makeNoise4D}})});var iE=qt(Zg()),Td=qt(m_()),sE=qt(DT());Z();We();Gs();var BT=new Tt;Ct.prototype._cacheAsBitmap=!1;Ct.prototype._cacheData=null;Ct.prototype._cacheAsBitmapResolution=null;Ct.prototype._cacheAsBitmapMultisample=null;var o1=class{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}};Object.defineProperties(Ct.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new o1),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Ct.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Ct.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;let r=this.alpha;this.alpha=1,t.batch.flush();let i=this.getLocalBounds(null,!0).clone();if(this.filters?.length){let _=this.filters[0].padding;i.pad(_)}i.ceil(B.RESOLUTION);let s=t.renderTexture.current,n=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),h=t.projection.transform,u=fr.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),d=`cacheAsBitmap_${Q.uid()}`;this._cacheData.textureCacheId=d,lt.addToCache(u.baseTexture,d),$.addToCache(u,d);let f=this.transform.localTransform.copyTo(BT).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:f,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=h,t.renderTexture.bind(s,n,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;let m=new ve(u);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(i.x/i.width),m.anchor.y=-(i.y/i.height),m.alpha=r,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)};Ct.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Ct.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;let r=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;let s=t.canvasContext.activeContext,n=t._projTransform;r.ceil(B.RESOLUTION);let a=fr.create({width:r.width,height:r.height}),h=`cacheAsBitmap_${Q.uid()}`;this._cacheData.textureCacheId=h,lt.addToCache(a.baseTexture,h),$.addToCache(a,h);let u=BT;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=r.x,u.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:a,clear:!0,transform:u,skipUpdateTransform:!1}),t.canvasContext.activeContext=s,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;let d=new ve(a);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(r.x/r.width),d.anchor.y=-(r.y/r.height),d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)};Ct.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ct.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ct.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,lt.removeFromCache(this._cacheData.textureCacheId),$.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ct.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};We();Ct.prototype.name=null;Ut.prototype.getChildByName=function(t,r){for(let i=0,s=this.children.length;i<s;i++)if(this.children[i].name===t)return this.children[i];if(r)for(let i=0,s=this.children.length;i<s;i++){let n=this.children[i];if(!n.getChildByName)continue;let a=n.getChildByName(t,!0);if(a)return a}return null};Z();We();Ct.prototype.getGlobalPosition=function(t=new mt,r=!1){return this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};Z();Z();var NT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;var ql=class extends kt{constructor(t=1){super(Pm,NT,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}};Z();Z();var gR={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},_R=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function OT(e){let t=gR[e],r=t.length,i=_R,s="",n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a;for(let h=0;h<e;h++){let u=n.replace("%index%",h.toString());a=h,h>=r&&(a=e-h-1),u=u.replace("%value%",t[a].toString()),s+=u,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",e.toString()),i}var xR=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function LT(e,t){let r=Math.ceil(e/2),i=xR,s="",n;t?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let a=0;a<e;a++){let h=n.replace("%index%",a.toString());h=h.replace("%sampleIndex%",`${a-(r-1)}.0`),s+=h,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",e.toString()),i}var en=class extends kt{constructor(t,r=8,i=4,s=kt.defaultResolution,n=5){let a=LT(n,t),h=OT(n);super(a,h),this.horizontal=t,this.resolution=s,this._quality=0,this.quality=i,this.blur=r}apply(t,r,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/r.width):this.uniforms.strength=1/i.height*(i.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,i,s);else{let n=t.getFilterTexture(),a=t.renderer,h=r,u=n;this.state.blend=!1,t.applyFilter(this,h,u,Tr.CLEAR);for(let d=1;d<this.passes-1;d++){t.bindAndClear(h,Tr.BLIT),this.uniforms.uSampler=u;let f=u;u=h,h=f,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,u,i,s),t.returnFilterTexture(n)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}};var Hn=class extends kt{constructor(t=8,r=4,i=kt.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new en(!0,t,r,i,s),this.blurYFilter=new en(!1,t,r,i,s),this.resolution=i,this.quality=r,this.blur=t,this.repeatEdgePixels=!1}apply(t,r,i,s){let n=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(n&&a){let h=t.getFilterTexture();this.blurXFilter.apply(t,r,h,Tr.CLEAR),this.blurYFilter.apply(t,h,i,s),t.returnFilterTexture(h)}else a?this.blurYFilter.apply(t,r,i,s):this.blurXFilter.apply(t,r,i,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}};Z();var kT=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;var zn=class extends kt{constructor(){let t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(dl,kT,t),this.alpha=1}_loadMatrix(t,r=!1){let i=t;r&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,r,i){return t[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],t[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],t[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],t[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],t[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],t[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],t[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],t[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],t[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],t[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],t[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],t[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],t[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],t[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],t[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],t[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],t[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],t[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],t[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],t[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],t}_colorMatrix(t){let r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(t,r){let i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,r)}tint(t,r){let[i,s,n]=xt.shared.setValue(t).toArray(),a=[i,0,0,0,0,0,s,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(a,r)}greyscale(t,r){let i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,r)}blackAndWhite(t){let r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)}hue(t,r){t=(t||0)/180*Math.PI;let i=Math.cos(t),s=Math.sin(t),n=Math.sqrt,a=1/3,h=n(a),u=i+(1-i)*a,d=a*(1-i)-h*s,f=a*(1-i)+h*s,m=a*(1-i)+h*s,_=i+a*(1-i),x=a*(1-i)-h*s,y=a*(1-i)-h*s,b=a*(1-i)+h*s,S=i+a*(1-i),C=[u,d,f,0,0,m,_,x,0,0,y,b,S,0,0,0,0,0,1,0];this._loadMatrix(C,r)}contrast(t,r){let i=(t||0)+1,s=-.5*(i-1),n=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(n,r)}saturate(t=0,r){let i=t*2/3+1,s=(i-1)*-.5,n=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(n,r)}desaturate(){this.saturate(-1)}negative(t){let r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)}sepia(t){let r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)}technicolor(t){let r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)}polaroid(t){let r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)}toBGR(t){let r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)}kodachrome(t){let r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)}browni(t){let r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)}vintage(t){let r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)}colorTone(t,r,i,s,n){t=t||.2,r=r||.15,i=i||16770432,s=s||3375104;let a=xt.shared,[h,u,d]=a.setValue(i).toArray(),[f,m,_]=a.setValue(s).toArray(),x=[.3,.59,.11,0,0,h,u,d,t,0,f,m,_,r,0,h-f,u-m,d-_,0,0];this._loadMatrix(x,n)}night(t,r){t=t||.1;let i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,r)}predator(t,r){let i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,r)}lsd(t){let r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)}reset(){let t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}};zn.prototype.grayscale=zn.prototype.greyscale;Z();var FT=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`;var UT=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;var Kl=class extends kt{constructor(t,r){let i=new Tt;t.renderable=!1,super(UT,FT,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,r==null&&(r=20),this.scale=new mt(r,r)}apply(t,r,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;let n=this.maskSprite.worldTransform,a=Math.sqrt(n.a*n.a+n.b*n.b),h=Math.sqrt(n.c*n.c+n.d*n.d);a!==0&&h!==0&&(this.uniforms.rotation[0]=n.a/a,this.uniforms.rotation[1]=n.b/a,this.uniforms.rotation[2]=n.c/h,this.uniforms.rotation[3]=n.d/h),t.applyFilter(this,r,i,s)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}};Z();var GT=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;var HT=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;var Ql=class extends kt{constructor(){super(HT,GT)}};Z();var zT=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;var Zl=class extends kt{constructor(t=.5,r=Math.random()){super(dl,zT,{uNoise:0,uSeed:0}),this.noise=t,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}};var a1={AlphaFilter:ql,BlurFilter:Hn,BlurFilterPass:en,ColorMatrixFilter:zn,DisplacementFilter:Kl,FXAAFilter:Ql,NoiseFilter:Zl};Object.entries(a1).forEach(([e,t])=>{Object.defineProperty(a1,e,{get(){return Q.deprecation("7.1.0",`filters.${e} has moved to ${e}`),t}})});Z();We();Z();Z();var l1=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Ot.system.add(this.tickerUpdate,this,mr.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ot.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}},Bi=new l1;Z();Z();var oi=class{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=oi.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new mt,this.page=new mt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,r,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,r,i,s,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}};var Ni=class extends oi{constructor(){super(...arguments),this.client=new mt,this.movement=new mt,this.offset=new mt,this.global=new mt,this.screen=new mt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,r,i){return t.worldTransform.applyInverse(i||this.global,r)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,r,i,s,n,a,h,u,d,f,m,_,x,y,b){throw new Error("Method not implemented.")}};var Ye=class extends Ni{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}};var ai=class extends Ni{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};ai.DOM_DELTA_PIXEL=0;ai.DOM_DELTA_LINE=1;ai.DOM_DELTA_PAGE=2;var vR=2048,yR=new mt,h1=new mt,Jl=class{constructor(t){this.dispatch=new Q.EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,r){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:r,priority:0}),this.mappingTable[t].sort((i,s)=>i.priority-s.priority)}dispatchEvent(t,r){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,r),this.dispatch.emit(r||t.type,t)}mapEvent(t){if(!this.rootTarget)return;let r=this.mappingTable[t.type];if(r)for(let i=0,s=r.length;i<s;i++)r[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,r){Bi.pauseUpdate=!0;let s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[s](this.rootTarget,this.rootTarget.eventMode,yR.set(t,r),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,r){if(!t.target)return;let i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,n=i.length-1;s<n;s++)if(t.currentTarget=i[s],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,r),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,r,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;let s=Array.isArray(r)?r:[r];for(let n=i.length-1;n>=0;n--)s.forEach(a=>{t.currentTarget=i[n],this.notifyTarget(t,a)})}propagationPath(t){let r=[t];for(let i=0;i<vR&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(t.parent),t=t.parent}return r.reverse(),r}hitTestMoveRecursive(t,r,i,s,n,a=!1){let h=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(Bi.pauseUpdate=!1),t.interactiveChildren&&t.children){let f=t.children;for(let m=f.length-1;m>=0;m--){let _=f[m],x=this.hitTestMoveRecursive(_,this._isInteractive(r)?r:_.eventMode,i,s,n,a||n(t,i));if(x){if(x.length>0&&!x[x.length-1].parent)continue;let y=t.isInteractive();(x.length>0||y)&&(y&&this._allInteractiveElements.push(t),x.push(t)),this._hitElements.length===0&&(this._hitElements=x),h=!0}}}let u=this._isInteractive(r),d=t.isInteractive();return d&&d&&this._allInteractiveElements.push(t),a||this._hitElements.length>0?null:h?this._hitElements:u&&!n(t,i)&&s(t,i)?d?[t]:[]:null}hitTestRecursive(t,r,i,s,n){if(this._interactivePrune(t)||n(t,i))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(Bi.pauseUpdate=!1),t.interactiveChildren&&t.children){let u=t.children;for(let d=u.length-1;d>=0;d--){let f=u[d],m=this.hitTestRecursive(f,this._isInteractive(r)?r:f.eventMode,i,s,n);if(m){if(m.length>0&&!m[m.length-1].parent)continue;let _=t.isInteractive();return(m.length>0||_)&&m.push(t),m}}}let a=this._isInteractive(r),h=t.isInteractive();return a&&s(t,i)?h?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,r){if(t.hitArea&&(t.worldTransform.applyInverse(r,h1),!t.hitArea.contains(h1.x,h1.y)))return!0;if(t._mask){let i=t._mask.isMaskData?t._mask.maskObject:t._mask;if(i&&!i.containsPoint?.(r))return!0}return!1}hitTestFn(t,r){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(r):!1}notifyTarget(t,r){r=r??t.type;let i=`on${r}`;t.currentTarget[i]?.(t);let s=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${r}capture`:r;this.notifyListeners(t,s),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,r)}mapPointerDown(t){if(!(t instanceof Ye)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){let s=r.button===2;this.dispatchEvent(r,s?"rightdown":"mousedown")}let i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(t){if(!(t instanceof Ye)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let r=this.createPointerEvent(t);this._isPointerMoveEvent=!1;let i=r.pointerType==="mouse"||r.pointerType==="pen",s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.overTargets);if(s.overTargets?.length>0&&n!==r.target){let u=t.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(t,u,n);if(this.dispatchEvent(d,"pointerout"),i&&this.dispatchEvent(d,"mouseout"),!r.composedPath().includes(n)){let f=this.createPointerEvent(t,"pointerleave",n);for(f.eventPhase=f.AT_TARGET;f.target&&!r.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}if(n!==r.target){let u=t.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(r,u);this.dispatchEvent(d,"pointerover"),i&&this.dispatchEvent(d,"mouseover");let f=n?.parent;for(;f&&f!==this.rootTarget.parent&&f!==r.target;)f=f.parent;if(!f||f===this.rootTarget.parent){let _=this.clonePointerEvent(r,"pointerenter");for(_.eventPhase=_.AT_TARGET;_.target&&_.target!==n&&_.target!==this.rootTarget.parent;)_.currentTarget=_.target,this.notifyTarget(_),i&&this.notifyTarget(_,"mouseenter"),_.target=_.target.parent;this.freeEvent(_)}this.freeEvent(d)}let a=[],h=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(r,"pointermove"),h&&a.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),h&&a.push("globaltouchmove")),i&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),h&&a.push("globalmousemove"),this.cursor=r.target?.cursor),a.length>0&&this.all(r,a),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(t){if(!(t instanceof Ye)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let r=this.trackingData(t.pointerId),i=this.createPointerEvent(t),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=i.target?.cursor);let n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),s&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;r.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof Ye)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let r=this.trackingData(t.pointerId);if(r.overTargets){let i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.findMountedTarget(r.overTargets),n=this.createPointerEvent(t,"pointerout",s);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");let a=this.createPointerEvent(t,"pointerleave",s);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),i&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;r.overTargets=null,this.freeEvent(n),this.freeEvent(a)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ye)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let r=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let h=i.button===2;this.dispatchEvent(i,h?"rightup":"mouseup")}let s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.pressTargetsByButton[t.button]),a=n;if(n&&!i.composedPath().includes(n)){let h=n;for(;h&&!i.composedPath().includes(h);){if(i.currentTarget=h,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let u=i.button===2;this.notifyTarget(i,u?"rightupoutside":"mouseupoutside")}h=h.parent}delete s.pressTargetsByButton[t.button],a=h}if(a){let h=this.clonePointerEvent(i,"click");h.target=a,h.path=null,s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:h.target,timeStamp:r});let u=s.clicksByButton[t.button];if(u.target===h.target&&r-u.timeStamp<200?++u.clickCount:u.clickCount=1,u.target=h.target,u.timeStamp=r,h.detail=u.clickCount,h.pointerType==="mouse"){let d=h.button===2;this.dispatchEvent(h,d?"rightclick":"click")}else h.pointerType==="touch"&&this.dispatchEvent(h,"tap");this.dispatchEvent(h,"pointertap"),this.freeEvent(h)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof Ye)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let r=this.trackingData(t.pointerId),i=this.findMountedTarget(r.pressTargetsByButton[t.button]),s=this.createPointerEvent(t);if(i){let n=i;for(;n;)s.currentTarget=n,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete r.pressTargetsByButton[t.button]}this.freeEvent(s)}mapWheel(t){if(!(t instanceof ai)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}let r=this.createWheelEvent(t);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(t){if(!t)return null;let r=t[0];for(let i=1;i<t.length&&t[i].parent===r;i++)r=t[i];return r}createPointerEvent(t,r,i){let s=this.allocateEvent(Ye);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof r=="string"&&(s.type=r),s}createWheelEvent(t){let r=this.allocateEvent(ai);return this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(t,r){let i=this.allocateEvent(Ye);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=r??i.type,i}copyWheelData(t,r){r.deltaMode=t.deltaMode,r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ}copyPointerData(t,r){t instanceof Ye&&r instanceof Ye&&(r.pointerId=t.pointerId,r.width=t.width,r.height=t.height,r.isPrimary=t.isPrimary,r.pointerType=t.pointerType,r.pressure=t.pressure,r.tangentialPressure=t.tangentialPressure,r.tiltX=t.tiltX,r.tiltY=t.tiltY,r.twist=t.twist)}copyMouseData(t,r){t instanceof Ni&&r instanceof Ni&&(r.altKey=t.altKey,r.button=t.button,r.buttons=t.buttons,r.client.copyFrom(t.client),r.ctrlKey=t.ctrlKey,r.metaKey=t.metaKey,r.movement.copyFrom(t.movement),r.screen.copyFrom(t.screen),r.shiftKey=t.shiftKey,r.global.copyFrom(t.global))}copyData(t,r){r.isTrusted=t.isTrusted,r.srcElement=t.srcElement,r.timeStamp=performance.now(),r.type=t.type,r.detail=t.detail,r.view=t.view,r.which=t.which,r.layer.copyFrom(t.layer),r.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);let r=this.eventPool.get(t).pop()||new t(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let r=t.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(t)}notifyListeners(t,r){let i=t.currentTarget._events[r];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(r,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let s=0,n=i.length;s<n&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeListener(r,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,t)}};Z();var bR=1,TR={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},u1=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Jl(null),Bi.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ye(null),this.rootWheelEvent=new ai(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...u1.defaultEventFeatures},{set:(t,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){let{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,u1._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;let r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=t.length;r<i;r++){let s=t[r],n=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;Bi.pointerMoved();let t=this.normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){let s=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let r=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,n=i.length;s<n;s++){let a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=r,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=this.normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){let s=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Bi.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Bi.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Bi.removeTickerListener();let e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){let i;this.domElement.parentElement?i=this.domElement.getBoundingClientRect():i={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};let s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){let s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=bR),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){let t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=TR[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}},Xn=u1;Xn.extension={name:"events",type:[N.RendererSystem,N.CanvasRendererSystem]};Xn.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};U.add(Xn);Z();We();function XT(e){return e==="dynamic"||e==="static"}var jT={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??XT(Xn.defaultEventMode)},set interactive(e){Q.deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Xn.defaultEventMode},set eventMode(e){this._internalInteractive=XT(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){let i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof t=="function"?void 0:t;e=i?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,s)},removeEventListener(e,t,r){let i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof t=="function"?void 0:t;e=i?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,s)},dispatchEvent(e){if(!(e instanceof oi))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};Ct.mixin(jT);var c1={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ct.mixin(c1);var ER=9,cd=100,SR=0,wR=0,VT=2,WT=1,AR=-1e3,CR=-1e3,RR=2,th=class{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Q.isMobile.tablet||Q.isMobile.phone)&&this.createTouchHook();let r=document.createElement("div");r.style.width=`${cd}px`,r.style.height=`${cd}px`,r.style.position="absolute",r.style.top=`${SR}px`,r.style.left=`${wR}px`,r.style.zIndex=VT.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){let t=document.createElement("button");t.style.width=`${WT}px`,t.style.height=`${WT}px`,t.style.position="absolute",t.style.top=`${AR}px`,t.style.left=`${CR}px`,t.style.zIndex=RR.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);let r=t.children;if(r)for(let i=0;i<r.length;i++)this.updateAccessibleObjects(r[i])}update(){let t=performance.now();if(Q.isMobile.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);let{x:r,y:i,width:s,height:n}=this.renderer.view.getBoundingClientRect(),{width:a,height:h,resolution:u}=this.renderer,d=s/a*u,f=n/h*u,m=this.div;m.style.left=`${r}px`,m.style.top=`${i}px`,m.style.width=`${a}px`,m.style.height=`${h}px`;for(let _=0;_<this.children.length;_++){let x=this.children[_];if(x.renderId!==this.renderId)x._accessibleActive=!1,Q.removeItems(this.children,_,1),this.div.removeChild(x._accessibleDiv),this.pool.push(x._accessibleDiv),x._accessibleDiv=null,_--;else{m=x._accessibleDiv;let y=x.hitArea,b=x.worldTransform;x.hitArea?(m.style.left=`${(b.tx+y.x*b.a)*d}px`,m.style.top=`${(b.ty+y.y*b.d)*f}px`,m.style.width=`${y.width*b.a*d}px`,m.style.height=`${y.height*b.d*f}px`):(y=x.getBounds(),this.capHitArea(y),m.style.left=`${y.x*d}px`,m.style.top=`${y.y*f}px`,m.style.width=`${y.width*d}px`,m.style.height=`${y.height*f}px`,m.title!==x.accessibleTitle&&x.accessibleTitle!==null&&(m.title=x.accessibleTitle),m.getAttribute("aria-label")!==x.accessibleHint&&x.accessibleHint!==null&&m.setAttribute("aria-label",x.accessibleHint)),(x.accessibleTitle!==m.title||x.tabIndex!==m.tabIndex)&&(m.title=x.accessibleTitle,m.tabIndex=x.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);let{width:r,height:i}=this.renderer;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${cd}px`,r.style.height=`${cd}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=VT.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,r){let{displayObject:i}=t.target,s=this.renderer.events.rootBoundary,n=Object.assign(new oi(s),{target:i});s.rootTarget=this.renderer.lastObjectRendered,r.forEach(a=>s.dispatchEvent(n,a))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===ER&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}};th.extension={name:"accessibility",type:[N.RendererPlugin,N.CanvasRendererPlugin]};U.add(th);Gg();Ko();var ir=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(ir||{}),rn={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};Z();var cs,ia;function $T(){ia={s3tc:cs.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:cs.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:cs.getExtension("WEBGL_compressed_texture_etc"),etc1:cs.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:cs.getExtension("WEBGL_compressed_texture_pvrtc")||cs.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:cs.getExtension("WEBGL_compressed_texture_atc"),astc:cs.getExtension("WEBGL_compressed_texture_astc")}}var d1={extension:{type:N.DetectionParser,priority:2},test:async()=>{let t=B.ADAPTER.createCanvas().getContext("webgl");return t?(cs=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{ia||$T();let t=[];for(let r in ia)ia[r]&&t.push(r);return[...t,...e]},remove:async e=>(ia||$T(),e.filter(t=>!(t in ia)))};U.add(d1);Ko();Z();Z();var sa=class extends dr{constructor(t,r={width:1,height:1,autoLoad:!0}){let i,s;typeof t=="string"?(i=t,s=new Uint8Array):(i=null,s=t),super(s,r),this.origin=i,this.buffer=s?new Rs(s):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Rs(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}};var Cr=class extends sa{constructor(t,r){super(t,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=Cr._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||Cr._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,r,i){let s=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let a=0,h=this.levels;a<h;a++){let{levelID:u,levelWidth:d,levelHeight:f,levelBuffer:m}=this._levelBuffers[a];s.compressedTexImage2D(s.TEXTURE_2D,u,this.format,d,f,0,m)}return!0}onBlobLoaded(){this._levelBuffers=Cr._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,r,i,s,n,a,h){let u=new Array(i),d=t.byteOffset,f=a,m=h,_=f+s-1&~(s-1),x=m+n-1&~(n-1),y=_*x*rn[r];for(let b=0;b<i;b++)u[b]={levelID:b,levelWidth:i>1?f:_,levelHeight:i>1?m:x,levelBuffer:new Uint8Array(t.buffer,d,y)},d+=y,f=f>>1||1,m=m>>1||1,_=f+s-1&~(s-1),x=m+n-1&~(n-1),y=_*x*rn[r];return u}};var f1=4,dd=124,PR=32,YT=20,IR=542327876,fd={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},MR={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},pd={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var DR=1,BR=2,NR=4,OR=64,LR=512,kR=131072,FR=827611204,UR=861165636,GR=894720068,HR=808540228,zR=4,XR={[FR]:ir.COMPRESSED_RGBA_S3TC_DXT1_EXT,[UR]:ir.COMPRESSED_RGBA_S3TC_DXT3_EXT,[GR]:ir.COMPRESSED_RGBA_S3TC_DXT5_EXT},jR={[70]:ir.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:ir.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:ir.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:ir.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:ir.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:ir.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:ir.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:ir.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:ir.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function md(e){let t=new Uint32Array(e);if(t[0]!==IR)throw new Error("Invalid DDS file magic word");let i=new Uint32Array(e,0,dd/Uint32Array.BYTES_PER_ELEMENT),s=i[fd.HEIGHT],n=i[fd.WIDTH],a=i[fd.MIPMAP_COUNT],h=new Uint32Array(e,fd.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,PR/Uint32Array.BYTES_PER_ELEMENT),u=h[DR];if(u&NR){let d=h[MR.FOURCC];if(d!==HR){let w=XR[d],R=f1+dd,tt=new Uint8Array(e,R);return[new Cr(tt,{format:w,width:n,height:s,levels:a})]}let f=f1+dd,m=new Uint32Array(t.buffer,f,YT/Uint32Array.BYTES_PER_ELEMENT),_=m[pd.DXGI_FORMAT],x=m[pd.RESOURCE_DIMENSION],y=m[pd.MISC_FLAG],b=m[pd.ARRAY_SIZE],S=jR[_];if(S===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${_}`);if(y===zR)throw new Error("DDSParser does not support cubemap textures");if(x===6)throw new Error("DDSParser does not supported 3D texture data");let C=new Array,M=f1+dd+YT;if(b===1)C.push(new Uint8Array(e,M));else{let w=rn[S],R=0,tt=n,et=s;for(let z=0;z<a;z++){let it=Math.max(1,tt+3&-4),V=Math.max(1,et+3&-4),K=it*V*w;R+=K,tt=tt>>>1,et=et>>>1}let j=M;for(let z=0;z<b;z++)C.push(new Uint8Array(e,j,R)),j+=R}return C.map(w=>new Cr(w,{format:S,width:n,height:s,levels:a}))}throw u&OR?new Error("DDSParser does not support uncompressed texture data."):u&LR?new Error("DDSParser does not supported YUV uncompressed texture data."):u&kR?new Error("DDSParser does not support single-channel (lumninance) texture data!"):u&BR?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}Z();var qT=[171,75,84,88,32,49,49,187,13,10,26,10],VR=67305985,li={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},p1=64,gd={[at.UNSIGNED_BYTE]:1,[at.UNSIGNED_SHORT]:2,[at.INT]:4,[at.UNSIGNED_INT]:4,[at.FLOAT]:4,[at.HALF_FLOAT]:8},m1={[J.RGBA]:4,[J.RGB]:3,[J.RG]:2,[J.RED]:1,[J.LUMINANCE]:1,[J.LUMINANCE_ALPHA]:2,[J.ALPHA]:1},g1={[at.UNSIGNED_SHORT_4_4_4_4]:2,[at.UNSIGNED_SHORT_5_5_5_1]:2,[at.UNSIGNED_SHORT_5_6_5]:2};function _d(e,t,r=!1){let i=new DataView(t);if(!WR(e,i))return null;let s=i.getUint32(li.ENDIANNESS,!0)===VR,n=i.getUint32(li.GL_TYPE,s),a=i.getUint32(li.GL_FORMAT,s),h=i.getUint32(li.GL_INTERNAL_FORMAT,s),u=i.getUint32(li.PIXEL_WIDTH,s),d=i.getUint32(li.PIXEL_HEIGHT,s)||1,f=i.getUint32(li.PIXEL_DEPTH,s)||1,m=i.getUint32(li.NUMBER_OF_ARRAY_ELEMENTS,s)||1,_=i.getUint32(li.NUMBER_OF_FACES,s),x=i.getUint32(li.NUMBER_OF_MIPMAP_LEVELS,s),y=i.getUint32(li.BYTES_OF_KEY_VALUE_DATA,s);if(d===0||f!==1)throw new Error("Only 2D textures are supported");if(_!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(m!==1)throw new Error("WebGL does not support array textures");let b=4,S=4,C=u+3&-4,M=d+3&-4,w=new Array(m),R=u*d;n===0&&(R=C*M);let tt;if(n!==0?gd[n]?tt=gd[n]*m1[a]:tt=g1[n]:tt=rn[h],tt===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");let et=r?YR(i,y,s):null,z=R*tt,it=u,V=d,K=C,ot=M,k=p1+y;for(let F=0;F<x;F++){let _t=i.getUint32(k,s),ht=k+4;for(let st=0;st<m;st++){let X=w[st];X||(X=w[st]=new Array(x)),X[F]={levelID:F,levelWidth:x>1||n!==0?it:K,levelHeight:x>1||n!==0?V:ot,levelBuffer:new Uint8Array(t,ht,z)},ht+=z}k+=_t+4,k=k%4!==0?k+4-k%4:k,it=it>>1||1,V=V>>1||1,K=it+b-1&~(b-1),ot=V+S-1&~(S-1),z=K*ot*tt}return n!==0?{uncompressed:w.map(F=>{let _t=F[0].levelBuffer,ht=!1;return n===at.FLOAT?_t=new Float32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4):n===at.UNSIGNED_INT?(ht=!0,_t=new Uint32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4)):n===at.INT&&(ht=!0,_t=new Int32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4)),{resource:new dr(_t,{width:F[0].levelWidth,height:F[0].levelHeight}),type:n,format:ht?$R(a):a}}),kvData:et}:{compressed:w.map(F=>new Cr(null,{format:h,width:u,height:d,levels:x,levelBuffers:F})),kvData:et}}function WR(e,t){for(let r=0;r<qT.length;r++)if(t.getUint8(r)!==qT[r])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function $R(e){switch(e){case J.RGBA:return J.RGBA_INTEGER;case J.RGB:return J.RGB_INTEGER;case J.RG:return J.RG_INTEGER;case J.RED:return J.RED_INTEGER;default:return e}}function YR(e,t,r){let i=new Map,s=0;for(;s<t;){let n=e.getUint32(p1+s,r),a=p1+s+4,h=3-(n+3)%4;if(n===0||n>t-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let u=0;for(;u<n&&e.getUint8(a+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}let d=new TextDecoder().decode(new Uint8Array(e.buffer,a,u)),f=new DataView(e.buffer,a+u+1,n-u-1);i.set(d,f),s+=4+n+h}return i}var _1={extension:{type:N.LoadParser,priority:ue.High},name:"loadDDS",test(e){return $e(e,".dds")},async load(e,t,r){let s=await(await B.ADAPTER.fetch(e)).arrayBuffer(),a=md(s).map(h=>{let u=new lt(h,{mipmap:Me.OFF,alphaMode:fe.NO_PREMULTIPLIED_ALPHA,resolution:Q.getResolutionOfUrl(e),...t.data});return Ri(u,r,e)});return a.length===1?a[0]:a},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};U.add(_1);Ko();Z();var x1={extension:{type:N.LoadParser,priority:ue.High},name:"loadKTX",test(e){return $e(e,".ktx")},async load(e,t,r){let s=await(await B.ADAPTER.fetch(e)).arrayBuffer(),{compressed:n,uncompressed:a,kvData:h}=_d(e,s),u=n??a,d={mipmap:Me.OFF,alphaMode:fe.NO_PREMULTIPLIED_ALPHA,resolution:Q.getResolutionOfUrl(e),...t.data},f=u.map(m=>{u===a&&Object.assign(d,{type:m.type,format:m.format});let _=new lt(m,d);return _.ktxKeyValueData=h,Ri(_,r,e)});return f.length===1?f[0]:f},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};U.add(x1);Z();var v1={extension:N.ResolveParser,test:e=>{let r=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(r)},parse:e=>{if(e.split("?")[0].split(".").pop()==="ktx"){let i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(i.some(s=>e.endsWith(s)))return{resolution:parseFloat(B.RETINA_PREFIX.exec(e)?.[1]??"1"),format:i.find(s=>e.endsWith(s)),src:e}}return{resolution:parseFloat(B.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e}}};U.add(v1);Z();We();Z();var qR=new ct,KR=4,eh=class{constructor(e){this.renderer=e}async image(e,t,r){let i=new Image;return i.src=await this.base64(e,t,r),i}async base64(e,t,r){let i=this.canvas(e);if(i.toBlob!==void 0)return new Promise((s,n)=>{i.toBlob(a=>{if(!a){n(new Error("ICanvas.toBlob failed!"));return}let h=new FileReader;h.onload=()=>s(h.result),h.onerror=n,h.readAsDataURL(a)},t,r)});if(i.toDataURL!==void 0)return i.toDataURL(t,r);if(i.convertToBlob!==void 0){let s=await i.convertToBlob({type:t,quality:r});return new Promise((n,a)=>{let h=new FileReader;h.onload=()=>n(h.result),h.onerror=a,h.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){let{pixels:r,width:i,height:s,flipY:n}=this._rawPixels(e,t);n&&eh._flipY(r,i,s),eh._unpremultiplyAlpha(r);let a=new Q.CanvasRenderTarget(i,s,1),h=new ImageData(new Uint8ClampedArray(r.buffer),i,s);return a.context.putImageData(h,0,0),a.canvas}pixels(e,t){let{pixels:r,width:i,height:s,flipY:n}=this._rawPixels(e,t);return n&&eh._flipY(r,i,s),eh._unpremultiplyAlpha(r),r}_rawPixels(e,t){let r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,s=!1,n,a=!1;if(e&&(e instanceof fr?n=e:(n=r.generateTexture(e,{resolution:r.resolution,multisample:r.multisample}),a=!0)),n){if(i=n.baseTexture.resolution,t=t??n.frame,s=!1,!a){r.renderTexture.bind(n);let m=n.framebuffer.glFramebuffers[r.CONTEXT_UID];m.blitFramebuffer&&r.framebuffer.bind(m.blitFramebuffer)}}else i=r.resolution,t||(t=qR,t.width=r.width/i,t.height=r.height/i),s=!0,r.renderTexture.bind();let h=Math.round(t.width*i),u=Math.round(t.height*i),d=new Uint8Array(KR*h*u),f=r.gl;return f.readPixels(Math.round(t.x*i),Math.round(t.y*i),h,u,f.RGBA,f.UNSIGNED_BYTE,d),a&&n?.destroy(!0),{pixels:d,width:h,height:u,flipY:s}}destroy(){this.renderer=null}static _flipY(e,t,r){let i=t<<2,s=r>>1,n=new Uint8Array(i);for(let a=0;a<s;a++){let h=a*i,u=(r-a-1)*i;n.set(e.subarray(h,h+i)),e.copyWithin(h,u,u+i),e.set(n,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));let t=e.length;for(let r=0;r<t;r+=4){let i=e[r+3];if(i!==0){let s=255.001/i;e[r]=e[r]*s+.5,e[r+1]=e[r+1]*s+.5,e[r+2]=e[r+2]*s+.5}}}},y1=eh;y1.extension={name:"extract",type:N.RendererSystem};U.add(y1);jc();zs();Ng();Og();Z();Z();Z();We();Hs();var rh=class{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}};function QR(e,t){let r=!1;if(e?._textures?.length){for(let i=0;i<e._textures.length;i++)if(e._textures[i]instanceof $){let s=e._textures[i].baseTexture;t.includes(s)||(t.push(s),r=!0)}}return r}function ZR(e,t){if(e.baseTexture instanceof lt){let r=e.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function JR(e,t){if(e._texture&&e._texture instanceof $){let r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function t2(e,t){return t instanceof Mn?(t.updateText(!0),!0):!1}function e2(e,t){if(t instanceof tr){let r=t.toFontString();return he.measureFont(r),!0}return!1}function r2(e,t){if(e instanceof Mn){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);let r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function i2(e,t){return e instanceof tr?(t.includes(e)||t.push(e),!0):!1}var KT=class{constructor(e){this.limiter=new rh(KT.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(r2),this.registerFindHook(i2),this.registerFindHook(QR),this.registerFindHook(ZR),this.registerFindHook(JR),this.registerUploadHook(t2),this.registerUploadHook(e2)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Ot.system.addOnce(this.tick,this,mr.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){let e=this.queue[0],t=!1;if(e&&!e._destroyed){for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Ot.system.addOnce(this.tick,this,mr.UTILITY);else{this.ticking=!1;let e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Ut)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Ot.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}},jn=KT;jn.uploadsPerFrame=4;Object.defineProperties(B,{UPLOADS_PER_FRAME:{get(){return jn.uploadsPerFrame},set(e){Q.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),jn.uploadsPerFrame=e}}});Z();jc();function QT(e,t){return t instanceof lt?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function s2(e,t){if(!(t instanceof Pi))return!1;let{geometry:r}=t;t.finishPoly(),r.updateBatches();let{batches:i}=r;for(let s=0;s<i.length;s++){let{texture:n}=i[s].style;n&&QT(e,n.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function n2(e,t){return e instanceof Pi?(t.push(e),!0):!1}var ih=class extends jn{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(n2),this.registerUploadHook(QT),this.registerUploadHook(s2)}};ih.extension={name:"prepare",type:N.RendererSystem};U.add(ih);Gs();Lg();Fg();Z();var sh=class{constructor(e,t,r=null){this.linkedSheets=[],this._texture=e instanceof $?e:null,this.baseTexture=e instanceof lt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;let i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){let{scale:t}=this.data.meta,r=Q.getResolutionOfUrl(e,null);return r===null&&(r=parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=sh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e,r=sh.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){let i=this._frameKeys[t],s=this._frames[i],n=s.frame;if(n){let a=null,h=null,u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,d=new ct(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new ct(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):a=new ct(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new ct(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[i]=new $(this.baseTexture,a,d,h,s.rotated?2:0,s.anchor,s.borders),$.addToCache(this.textures[i],i)}t++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){let i=e[t][r];this.animations[t].push(this.textures[i])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*sh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*sh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(let t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}},nh=sh;nh.BATCH_SIZE=1e3;Ko();Z();var o2=["jpg","png","jpeg","avif","webp"];function ZT(e,t,r){let i={};if(e.forEach(s=>{i[s]=t}),Object.keys(t.textures).forEach(s=>{i[s]=t.textures[s]}),!r){let s=Q.path.dirname(e[0]);t.linkedSheets.forEach((n,a)=>{let h=ZT([`${s}/${t.data.meta.related_multi_packs[a]}`],n,!0);Object.assign(i,h)})}return i}var JT={extension:N.Asset,cache:{test:e=>e instanceof nh,getCacheableAssets:(e,t)=>ZT(e,t,!1)},resolver:{test:e=>{let r=e.split("?")[0].split("."),i=r.pop(),s=r.pop();return i==="json"&&o2.includes(s)},parse:e=>{let t=e.split(".");return{resolution:parseFloat(B.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:N.LoadParser,priority:ue.Normal},async testParse(e,t){return Q.path.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,r){let i=Q.path.dirname(t.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let s=i+e.meta.image;s=Nn(s,t.src);let a=(await r.load([s]))[s],h=new nh(a.baseTexture,e,t.src);await h.parse();let u=e?.meta?.related_multi_packs;if(Array.isArray(u)){let d=[];for(let m of u){if(typeof m!="string")continue;let _=i+m;t.data?.ignoreMultiPack||(_=Nn(_,t.src),d.push(r.load({src:_,data:{ignoreMultiPack:!0}})))}let f=await Promise.all(d);h.linkedSheets=f,f.forEach(m=>{m.linkedSheets=[h].concat(h.linkedSheets.filter(_=>_!==m))})}return h},unload(e){e.destroy(!0)}}};U.add(JT);Hs();Ag();Z();Gs();Hs();Z();Hs();var na=class extends tr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new na(Object.keys(na.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete na.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){let{availableFonts:r}=na;if(r[e]){let i=r[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return B.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,n)=>{let a=URL.createObjectURL(i),h=new FileReader;h.onload=()=>s([a,h.result]),h.onerror=n,h.readAsDataURL(i)})).then(async([i,s])=>{let n=Object.assign({family:Q.path.basename(e,Q.path.extname(e)),weight:"normal",style:"normal",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);r[e]=n,this._fonts.push(n),this.styleID++;let a=new FontFace(n.family,`url(${n.src})`,{weight:n.weight,style:n.style});n.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){let t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){let t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=Q.rgb2hex(e)),typeof e=="number"?Q.hex2string(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor),t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));let s=`${r}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,na.defaultOptions)}onBeforeDraw(){let{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){let{userAgent:e}=B.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}},Vn=na;Vn.availableFonts={};Vn.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};var oa=class extends ve{constructor(e="",t={}){super($.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;let r=new Image,i=$.from(r,{scaleMode:B.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new ct,i.trim=new ct,this.texture=i;let s="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),h=document.createElementNS(s,"foreignObject"),u=document.createElementNS(n,"div"),d=document.createElementNS(n,"style");h.setAttribute("width","10000"),h.setAttribute("height","10000"),h.style.overflow="hidden",a.appendChild(h),this.maxWidth=oa.defaultMaxWidth,this.maxHeight=oa.defaultMaxHeight,this._domElement=u,this._styleElement=d,this._svgRoot=a,this._foreignObject=h,this._foreignObject.appendChild(d),this._foreignObject.appendChild(u),this._image=r,this._loadImage=new Image,this._autoResolution=oa.defaultAutoResolution,this._resolution=oa.defaultResolution??B.RESOLUTION,this.text=e,this.style=t}measureText(e){let{text:t,style:r,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);let s=this._domElement.getBoundingClientRect();this._svgRoot.remove();let n=Math.min(this.maxWidth,Math.ceil(s.width)),a=Math.min(this.maxHeight,Math.ceil(s.height));return this._svgRoot.setAttribute("width",n.toString()),this._svgRoot.setAttribute("height",a.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(i)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:n+r.padding*2,height:a+r.padding*2}}async updateText(e=!0){let{style:t,_image:r,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;let{width:s,height:n}=this.measureText();r.width=i.width=Math.ceil(Math.max(1,s)),r.height=i.height=Math.ceil(Math.max(1,n)),this._loading||(this._loading=!0,await new Promise(a=>{i.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,r.src=i.src,i.onload=null,i.src="",this.updateTexture(),a()};let h=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(h)}`}))}get source(){return this._image}updateTexture(){let{style:e,texture:t,_image:r,resolution:i}=this,{padding:s}=e,{baseTexture:n}=t;t.trim.width=t._frame.width=r.width/i,t.trim.height=t._frame.height=r.height/i,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(r.width,r.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},oa.defaultDestroyOptions,e),super.destroy(e);let t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);let t=Q.sign(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);let t=Q.sign(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Vn?(this.ownsStyle=!1,this._style=e):e instanceof tr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Vn.from(e)):(this.ownsStyle=!0,this._style=new Vn(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}},oh=oa;oh.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};oh.defaultMaxWidth=2024;oh.defaultMaxHeight=2024;oh.defaultAutoResolution=!0;var Oi=qt(Ma());var xd=qt(Zg()),vd=qt(Ma());var tE=qt(yi());function b1(e){let[t,r]=(0,vd.useState)(0);(0,xd.useTick)(()=>r(Date.now()));let i=(0,vd.useCallback)(s=>{__(e.draw),e.draw(s)},[t]);return(0,tE.jsx)(xd.Graphics,{...e,draw:i})}var yd=qt(Ma());PS();var eE=qt(yi());function T1({to:e,children:t,altText:r}){let[i,s]=(0,yd.useState)(!1),n=(0,yd.useRef)(null);return x_(n,{go:i,from:{max:1,min:0},key:"opacity"}),(0,eE.jsx)(p_,{to:e,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),ref:n,className:"font-bold text-blue-400",children:i&&r?r:t})}var ah=qt(m_()),aa=qt(Ma()),rE=qt(yi());function bd({children:e}){let[t,r]=(0,aa.useState)(e),i=(0,aa.useRef)();return(0,aa.useEffect)(()=>{let s=()=>{r(n=>{if(!n)return"";let a=n.split(" "),h=ah.default.random(a.length-1),u=a[h],d=ah.default.random(u.length-1);return a[h]=a[h].slice(0,d)+ah.default.sample("abcdefghijklmnopqrstuvwxyz")+a[h].slice(d+1),a.join(" ")}),t&&(i.current=window.setTimeout(s,ah.default.random(1e3)))};return t&&s(),()=>{i.current&&window.clearTimeout(i.current)}},[t]),(0,rE.jsx)("span",{className:"relative -z-10 mx-2 break-all opacity-50",children:t})}var Re=qt(yi());function a2(e){return(0,Re.jsx)(Oi.Suspense,{fallback:(0,Re.jsx)(Re.Fragment,{}),children:(0,Re.jsx)(l2,{...e})})}function l2({children:e,gptText:t}){let{w:r,h:i}=g_(),s=(0,Oi.useMemo)(()=>{if(!t)return;let h=r/8*(i/24),u=t;for(;u.length<h;)u+=u;let f=u.slice(0,h).split(" "),m=e.map(()=>Td.default.random(f.length,!1)).sort(),_=0,x=[];for(let y of m)x.push(f.slice(_,y).join(" ")),_=y;return x.push(f.slice(_).join(" ")),x},[t,e]),n=(0,Oi.useMemo)(()=>(0,sE.makeNoise3D)(Date.now()),[]),a=(0,Oi.useMemo)(()=>new Hn(5),[]);return s?(0,Re.jsxs)("div",{className:"h-full w-full overflow-hidden",children:[(0,Re.jsx)(iE.Stage,{className:"absolute left-0 top-0 z-0 bg-transparent",width:r,height:i,options:{backgroundAlpha:0},children:(0,Re.jsx)(b1,{filters:[a],width:r,height:i,x:0,y:0,draw:h=>{h.clear();let u=Date.now();for(let d=0;d<=r;d+=10)for(let f=0;f<=i;f+=10){let m=n(d,f,u/1e3);h.beginFill("white",m*.05),h.drawCircle(d,f,20)}}})}),e.map((h,u)=>{var _;let d=h.props.children.split(" "),f=Td.default.random(d.length),m=(0,Re.jsx)(T1,{to:"/demos/zettelkablooey/"+((_=Td.default.sample(v_))==null?void 0:_.id),children:d[f]});return(0,Re.jsxs)(Oi.Fragment,{children:[(0,Re.jsx)(bd,{children:s[u]}),(0,Oi.cloneElement)(h,{children:[(0,Re.jsx)("span",{children:d.slice(0,f).join(" ")+" "}),m,(0,Re.jsx)("span",{children:" "+d.slice(f+1).join(" ")})]})]},u)}),(0,Re.jsx)(bd,{children:s[s.length-1]})]}):(0,Re.jsx)(Re.Fragment,{})}var nE=qt(yi());function h2({children:e}){return(0,nE.jsx)("span",{className:"relative z-10",children:e})}export{a2 as a,h2 as b};
/*! Bundled license information:

@pixi/react/dist/index.es.js:
  (**
   * @license React
   * react-reconciler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
